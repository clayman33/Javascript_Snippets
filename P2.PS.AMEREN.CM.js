// P2.PS.AMEREN.CM.js
(function($){
Type.registerNamespace('P2.PS.AMEREN.CM.CustomPanels');P2.PS.AMEREN.CM.CustomPanels.CrewChanges=function(){this.$3_0='';this.$3_2='';this.$3_3='';this.$3_4='';this.$3_7=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();this.$3_8='';P2.PS.AMEREN.CM.CustomPanels.CrewChanges.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.CrewChanges.prototype={$3_1:null,$3_5:null,$3_6:null,init:function(){P2.PS.AMEREN.CM.CustomPanels.CrewChanges.callBaseMethod(this, 'init');W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_9));var $0='<div><button id="btn3" style="display:inline;background-color: #ff9800;border: none;color: white;padding: 10px 10px; text-align: center; text-decoration: none;display: none; font-size: 16px;  margin: 4px 2px; cursor: pointer;width:25%;">Set Crew Leader</button></div>';$($0).appendTo(this.get_mainElement());$('#btn3',this.get_mainElement()).click(ss.Delegate.create(this,this.$3_B));},$3_9:function($p0,$p1){this.$3_6=$p0;var $0=$p0.getCollectionIDByName('CrewAllocation');if($p1.get_formObject().get_objectType()===$0){$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('ID')!=null){this.$3_8=$p1_0.getPropertyByName('Name').toString();}}));$p0.getBusinessViewServices().getAllBusinessViewItemsByObjectType($p0.getCollectionIDByName('CrewAllocation'),ss.Delegate.create(this,function($p1_0){
if($p1_0!=null){if(!!$p1_0.get_count()){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=$1_0.getPropertyByName('StartTime').toString();var $1_2=Date.parseDate($1_1);var $1_3=$1_0.getPropertyByName('FinishTime').toString();var $1_4=Date.parseDate($1_3);if(($1_2<=Date.get_now()&&$1_4>Date.get_now())){this.$3_7.add($1_0);}}}}}));}},$3_A:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('CrewAllocation')){if($p1.get_formServices().getUIPropertyValueByName('AllocatedResource')!=null){var $0=$p1.get_formServices().getUIPropertyValueByName('AllocatedResource');if($0.get_displayString()!==this.$3_8&&this.$3_7.get_count()>1&&P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74===$p0.getSharedData('LoggedEnggBusinessLine').toString()){this.$3_6=$p0;if(!!$0.get_key().toString()||!!$0.get_key().toString()){this.$3_4=$0.get_key().toString();this.$3_6.setSharedData('EngineerKey',this.$3_4);}$('#btn3').css('display','inline-block');}if($p1.get_formServices().getUIPropertyValueByName('Crew')!=null){var $1=$p1.get_formServices().getUIPropertyValueByName('Crew');this.$3_2=$1.get_key().toString();this.$3_3=$1.get_displayString();}}}},$3_B:function($p0){var $0=null;if(!!this.$3_2&&!!this.$3_6.getSharedData('EngineerKey').toString()){this.$3_4=this.$3_6.getSharedData('EngineerKey').toString();var $1='<SXPMultipleOperations><Operations><Operation><Action>CreateOrUpdate</Action><Object><Engineer>'+'<Key>'+this.$3_2+'</Key>'+'<Name>'+this.$3_3+'</Name>'+'<CrewLeader_SO>'+'<Key>'+this.$3_4+'</Key></CrewLeader_SO>'+'</Engineer></Object></Operation></Operations><ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries><OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError></SXPMultipleOperations> ';this.$3_6.externalMaskOnWithText('Please Wait...');this.$3_6.sendWrappedCustomSXP($1);}}}
P2.PS.AMEREN.CM.CustomPanels.Asset=function(){this.assetId='';this.assetDescription='';this.circuitNumber='';this.inServiceDate=null;this.manufacturer='';this.manufacturerModel='';this.manufactureDate=null;this.serialNumber='';this.assetUpdateComments='';this.locationId='';this.locationDescription='';this.parentLocation='';this.substationName='';}
P2.PS.AMEREN.CM.CustomPanels.Asset.prototype={assetId:null,assetDescription:null,circuitNumber:null,inServiceDate:null,manufacturer:null,manufacturerModel:null,manufactureDate:null,serialNumber:null,assetUpdateComments:null,locationId:null,locationDescription:null,parentLocation:null,substationName:null}
P2.PS.AMEREN.CM.CustomPanels.CreateCustomTableForInlineObject=function(){this.headingList=[];this.propertyList=[];P2.PS.AMEREN.CM.CustomPanels.CreateCustomTableForInlineObject.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.CreateCustomTableForInlineObject.prototype={$3_0:null,objectName:'',objCollectionID:0,xmlDoc:null,$3_1:null,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_2));this.xmlDoc=ss.parseXml(this.get_customSettings());},$3_2:function($p0,$p1){if(this.get_formObject().get_objectType()===$p1.get_formObject().get_objectType()){this.$3_0=$p0;var $0=null;var $1=null;var $2=null;var $3='';var $4=null;var $5='';if(this.xmlDoc!=null){$0=this.xmlDoc.selectNodes('Field');$1=this.xmlDoc.selectSingleNode('Object');this.objectName=$1.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$2=this.xmlDoc.selectSingleNode('SortProperty');$3=$2.text;}if(this.xmlDoc.selectSingleNode('TableHeader')!=null){$4=this.xmlDoc.selectSingleNode('TableHeader');$5=$4.text;}}this.$3_1=$p1.get_formObject();this.objCollectionID=$p0.getCollectionIDByName(this.objectName);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $6=$enum1.current;this.headingList.add($6.childNodes[0].text.toString());this.propertyList.add($6.childNodes[1].text.toString());}this.createTable(this.headingList,this.propertyList,this.objectName,$5);this.getData(this.objectName,this.propertyList);}},getData:function(objectName,propertyList){var $0=this.$3_1.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,objectName);var $1=0;var $2=false;if($0!=null){var $3=ss.parseXml($0.toString());var $enum1=ss.IEnumerator.getEnumerator($3.documentElement.childNodes);while($enum1.moveNext()){var $4=$enum1.current;$2=true;var $5=[];var $6=[];var $enum2=ss.IEnumerator.getEnumerator(propertyList);while($enum2.moveNext()){var $7=$enum2.current;var $8=false;var $9='';var $enum3=ss.IEnumerator.getEnumerator($4.childNodes);while($enum3.moveNext()){var $A=$enum3.current;if($A.nodeName===$7){if($A.text!=null){$9=$A.text;if(!!$9){if(P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeNeedTobeFormatted.contains($7)){var $B=Date.parseDate($9);$9=$B.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat);}$5.add($9);$6.add($7);}else{$5.add('');$6.add($7);}}else{$5.add('');$6.add($7);}$8=true;break;}}if(!$8){$5.add('');$6.add($7);}}this.appendtoUI(objectName,$6,$5,$1);$1++;}}if(!$2){var $C=propertyList.length;var $D='<tr id="'+objectName+'_noRecords"><td colspan="'+$C+'">No Records to Display</td></tr>';$('#'+objectName+'_noRecords').remove();$('#'+objectName+'_Table > tbody').append($D);}},createTable:function(headingList,propertyList,objectName,tableHeading){try{$('#'+objectName+'_Table').remove();var $0=headingList.length+1;var $1='<table id="'+objectName+"_Table\" style=\"border-collapse: collapse; color:rgb(2,113,182);font-family:'Calibri', sans-serif;font-weight:540;font-size:11.0pt; margin-top: 2%;margin-bottom: 3%;\">"+'<thead><tr style="background-color: rgb(11, 125, 195);color: white;border: 1px solid rgb(2,113,182);"><th id="'+objectName+'_Title" colspan="'+$0+'" style="font - size:14.0pt">'+tableHeading+'</th></tr><tr id="'+objectName+'_headings"><th style="background-color: rgb(2,113,182);color: white;border: 1px solid rgb(2,113,182); width:4em;">SL NO:</th>';var $2=0;for(var $4=0;$4<headingList.length;$4++){$2=$4+1;$1+='<th id="'+objectName+'_'+propertyList[$4]+'" colNum="'+$2+'" style="background-color: rgb(2,113,182);color: white;border: 1px solid rgb(2,113,182);">'+headingList[$4]+'</th>';}$1+='</tr></thead><tbody></tbody></table>';var $3=$($1);$3.appendTo(this.get_mainElement());}catch($5){this.$3_0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.collapse'+$5);}},appendtoUI:function(objectName,propertyName,propertyValue,position){try{$('#'+objectName+'_noRecords').remove();var $0='<tr id="'+objectName+'_Row_'+position+'">';var $1=position+1;var $2='<td id="'+objectName+'_SLNO_Value'+position+'" style="border: 1px solid rgb(2,113,182);padding-left: 10px;padding-right: 10px;">'+$1+'</td>';for(var $3=0;$3<propertyName.length;$3++){$2+='<td val="'+propertyValue[$3]+'" id="'+objectName+'_'+propertyName[$3]+'_Value'+position+'" style="border: 1px solid rgb(2,113,182);">'+propertyValue[$3]+'</td>';}$0=$0+$2+'</tr>';if(!position){$('#'+objectName+'_Table > tbody').append($0);}else{$('#'+objectName+'_Table > tbody tr:last').after($0);}}catch($4){this.$3_0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.AppendtoUI'+$4);}},$3_3:function($p0,$p1){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_2));}}
P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButtonSupervisor=function(){P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButtonSupervisor.initializeBase(this);W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_8));}
P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButtonSupervisor.prototype={$3_0:'Create Follow-Up',$3_1:'FollowUpWork',$3_2:'FollowUpWorks',$3_3:'FUWAssets',$3_4:'#AddFUpButton',$3_5:2,$3_6:null,$3_7:0,$3_8:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)){if($p1.get_formServices().getUIPropertyValueByName('BusinessLine')==null){var $0=(ss.isNullOrUndefined($p0.getSharedData('TaskBusinessLine')))?'':$p0.getSharedData('TaskBusinessLine').toString();$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('BusinessLine'),$0,10,function($p1_0){
$p1.get_formServices().setUIPropertyValueByName('BusinessLine',$p1_0.get_item(0));});}}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){var $1=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).toString();var $2=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString();$p0.setSharedData('ASSET_ASSETID',$1);$p0.setSharedData('ASSET_LOCATIONID',$2);var $3=(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)))?'':window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if($3===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){document.getElementById('AddFUpButton').style.display = 'block';document.getElementById('createSrBtnTitle').style.display = 'block';}else{document.getElementById('AddFUpButton').style.display = 'none';document.getElementById('createSrBtnTitle').style.display = 'none';}}}catch($4){this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_AfterOpenForm()',$4);}},$3_9:function($p0,$p1){try{}catch($0){this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_AfterSaveForm()',$0);}},$3_A:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)&&$p1.get_formObject().getPropertyByName('FUWStatus')==null){if($p1.get_formServices().getUIPropertyValueByName('IsWorkRequest')!=null&&$p1.get_formServices().getUIPropertyValueByName('IsWorkRequest').toString().toLowerCase()==='false'&&$p1.get_formServices().getUIPropertyValueByName('IsEmergentTask')!=null&&$p1.get_formServices().getUIPropertyValueByName('IsEmergentTask').toString().toLowerCase()==='false'){var $0=$p0.guidGenerator();$p1.get_formObject().setPropertyByName('MobileKey',$0);$p0.setSharedData('FWMKey',$0);$p1.get_formServices().setUIPropertyValueByName('FUWRegion',$p0.getSharedData('SID_REGION'));$p1.get_formServices().setUIPropertyValueByName('FUWDistrict',$p0.getSharedData('SID_DISTRICT'));$p1.get_formServices().setUIPropertyValueByName('FUWState',$p0.getSharedData('SID_STATE'));$p1.get_formServices().setUIPropertyValueByName('FUWLatitude',$p0.getSharedData('SID_LATITUDE'));$p1.get_formServices().setUIPropertyValueByName('FUWLongitude',$p0.getSharedData('SID_LONGITUDE'));$p1.get_formServices().setUIPropertyValueByName('IsFollowUpTask',true);$p1.get_formServices().setUIPropertyValueByName('SourceSite',$p0.getSharedData('TASK_SOURCESITE'));$p1.get_formServices().setUIPropertyValueByName('AssetID',$p0.getSharedData('ASSET_ASSETID'));$p1.get_formServices().setUIPropertyValueByName('LocationID',$p0.getSharedData('ASSET_LOCATIONID'));var $1=$p0.getSharedData('SID_COORDX');if($1!=null){$p1.get_formObject().setPropertyByName('FUWCoordX',$1);}$1=$p0.getSharedData('SID_COORDY');if($1!=null){$p1.get_formObject().setPropertyByName('FUWCoordY',$1);}$p1.get_formServices().setUIPropertyValueByName('FUWCoordXStr',$p0.getSharedData('SID_COORDXSTR'));$p1.get_formServices().setUIPropertyValueByName('FUWCoordYStr',$p0.getSharedData('SID_COORDYSTR'));$p1.get_formServices().setUIPropertyValueByName('RelatedTaskCallID',$p0.getSharedData('SID_CALLID'));$p1.get_formServices().setUIPropertyValueByName('RelatedTaskNumber',$p0.getSharedData('SID_NUMBER'));$p1.get_formObject().setPropertyByName('RelatedWONum',$p0.getSharedData('SID_SOURCEID'));$p1.get_formServices().setUIPropertyValueByName('FUWOpenDate',Date.get_now());$p1.get_formServices().setUIPropertyValueByName('FUWStart',Date.get_now());$p1.get_formServices().setUIPropertyValueByName('FUWFinish',this.$3_D(Date.get_now(),60));this.controllerServices.getLoggedInEngineer(function($p1_0){
if($p1_0.get_key()!==-1){var $1_0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(8,'Engineer',null);$1_0.set_mobileKey($p1_0.get_mobileKey());$1_0.set_key($p1_0.get_key());var $1_1=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($p1_0.get_key(),$p1_0.get_mobileKey(),null,$1_0);$p1.get_formServices().setUIPropertyValueByName('FUWEngineer',$1_1);}});}}}catch($2){console.error("Error source:: CreateFollowUpTaskButton/FormEvents_BeforeOpenNewForm(); Error:: $2.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_BeforeOpenNewForm()',$2);}},$3_B:function($p0,$p1){},$3_C:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)){this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY','');this.controllerServices.setSharedData('PARENT_TASKTYPE','');this.$3_7=0;}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenNewForm(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_9));}}catch($0){console.error("Error source:: CreateFollowUpTaskButton/FormEvents_AfterCloseForm(); Error:: $0.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_AfterCloseForm()',$0);}},$3_D:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);},init:function(){try{P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButtonSupervisor.callBaseMethod(this, 'init');var $0='<div id="AddFUpButton" class = "W6CMPanel W6CMPropPanelCombo"><table style = "width: 100%;">'+'<tr><td style = "width: 100%;"><div class="col"><div id="divDuplicate" class="button1 save" style='+'"height: 32px;" >'+this.$3_0+'</div></div></td></tr></table></div>';$($0).appendTo(this.get_mainElement());$(this.$3_4,this.get_mainElement()).click(ss.Delegate.create(this,this.$3_E));}catch($1){console.error("Error source:: CreateFollowUpTaskButton/Init(); Error:: $1.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/Init()',$1);}},$3_E:function($p0){try{W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenNewForm(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_8));this.$3_6=this.controllerServices.getFormServices().getOpenFormByType(this.controllerServices.getCollectionIDByName('Asset')).get_formObject();var $0=null;$0=this.controllerServices.getFormServices().getOpenFormByType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task);this.controllerServices.setSharedData('SID_REGION',$0.getUIPropertyValueByNameEx(2,'Region'));this.controllerServices.setSharedData('SID_DISTRICT',$0.getUIPropertyValueByNameEx(2,'District'));this.controllerServices.setSharedData('SID_STATE',$0.getUIPropertyValueByNameEx(2,'State'));this.controllerServices.setSharedData('SID_LATITUDE',$0.getUIPropertyValueByNameEx(2,'Latitude'));this.controllerServices.setSharedData('SID_LONGITUDE',$0.getUIPropertyValueByNameEx(2,'Longitude'));this.controllerServices.setSharedData('SID_COORDX',$0.getUIPropertyValueByNameEx(2,'CoordX'));this.controllerServices.setSharedData('SID_COORDY',$0.getUIPropertyValueByNameEx(2,'CoordY'));this.controllerServices.setSharedData('SID_COORDXSTR',$0.getUIPropertyValueByNameEx(2,'CoordXStr'));this.controllerServices.setSharedData('SID_COORDYSTR',$0.getUIPropertyValueByNameEx(2,'CoordYStr'));this.controllerServices.setSharedData('SID_CALLID',$0.getUIPropertyValueByNameEx(2,'CallID'));this.controllerServices.setSharedData('SID_NUMBER',$0.getUIPropertyValueByNameEx(2,'Number'));this.controllerServices.setSharedData('SID_SOURCEID',$0.getUIPropertyValueByNameEx(2,'SourceID'));this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY',$0.get_formObject().get_key());this.controllerServices.setSharedData('PARENT_TASKTYPE',$0.getUIPropertyValueByNameEx(2,'TaskType').toString());this.controllerServices.setSharedData('TASK_SOURCESITE',$0.getUIPropertyValueByNameEx(2,'SourceSite'));var $1=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(47919880,'Task',null);var $2=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm(this.get_formObject().get_parentObject().get_objectType(),this.get_formObject().get_parentObject().get_key());var $3=$2.getPanelsByPropertyName(2,'FollowUpWorks')[0];var $4=$3;$4.openNewGenericObjectForm();}catch($5){console.error("Error source:: CreateFollowUpTaskButton/ButtonClick(); Error:: $5.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/ButtonClick()',$5);}}}
P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable=function(formServices){this.$0='';this.$1=formServices;if(!formServices.get_formObject().get_objectType()||formServices.get_formObject().get_objectType()===2){this.$0=formServices.getUIPropertyValueByNameEx(2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();}else{this.$0=(ss.isNullOrUndefined(window.localStorage.getItem('CallID')))?'':window.localStorage.getItem('CallID').toString();}}
P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable.prototype={$1:null,sortClick:true,tableOutline:function(key){var $0=$('<html><div id="'+key+'-SummaryFormDiv" style="font-size:15px">'+'<div id="'+key+'-SortAndFilterDiv">'+'</div><div id="'+key+'-SummaryTableDiv" style="min-width:100%">'+'</div></html>');return $0;},createTable_WithOBJ:function(header,fields,keyValue,listofObjectList){var $0='';var $1='';var $2=0;var $3='<table id="'+keyValue+'-summaryTable" style="border-collapse:collapse;border:1px solid gainsboro; width:100%">';var $enum1=ss.IEnumerator.getEnumerator(listofObjectList);while($enum1.moveNext()){var $5=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)&&P2.PS.AMEREN.CM.AmerenP2Constants.number===parseInt($5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString())){$2++;var $6=$5.get_key().toString();$0='<tr class="Row_'+$6+'" id="'+keyValue+'-row'+$2+'" Name="'+keyValue+'-row'+$2+'" style="border:1px solid gainsboro;" bgcolor="'+P2.PS.AMEREN.CM.AmerenP2Constants.startColor+'">';$0+='<td style="cursor: pointer;" class ="'+keyValue+'-SummaryDataCol"  Key="'+$6+'" name="'+keyValue+'-SummaryDataCol_'+$2+'" id="'+keyValue+'-SummaryDataCol_'+$2+'">';for(var $7=0;$7<fields.length;$7++){var $8='';if($5.getPropertyByName(fields[$7])!=null){$8=$5.getPropertyByName(fields[$7]).toString();}if(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFields.contains(keyValue+'-'+fields[$7])){var $9=$5.getPropertyByName(fields[$7]);$8=$9.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$25);}if(P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeFields.contains(keyValue+'-'+fields[$7])){if($5.getPropertyByName(fields[$7])!=null){var $A=$5.getPropertyByName(fields[$7]);$8=$A.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}}$0+='<div id="'+keyValue+'-'+fields[$7]+'_'+$2+'" name="'+keyValue+'-'+fields[$7]+'_'+$2+'"><span id="'+keyValue+'-Heading-'+header[$7].replaceAll(' ','')+'_'+$2+'"'+'style="margin-left:10px;font-weight:bold;font-size: 14px;font-family: Helvetica;">'+header[$7]+' : </span><span style="font-weight:bold;font-size: 14px;font-family: Helvetica" id="'+keyValue+'-Data-'+header[$7].replaceAll(' ','')+'_'+$2+'">'+$8+'</span></br></div>';}$0+='</td></tr>';$1+=$0;}}if(!$2){$1='<tr><td>No Records to Display</td></tr>';}$3=$3+$1+'</table>';var $4=$($3);return $4;},createTableWithCheckBox_WithOBJ:function(header,fields,keyValue,listofObjectList){var $0='<table id="'+keyValue+'-summaryTable" edited="false" style="border-collapse:collapse;border:1px solid gainsboro; width:100%">';var $1='';var $2='';var $3=0;var $enum1=ss.IEnumerator.getEnumerator(listofObjectList);while($enum1.moveNext()){var $5=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)&&P2.PS.AMEREN.CM.AmerenP2Constants.number===parseInt($5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString())){$3++;var $6=$5.get_key().toString();var $7='';var $8='';var $9='';if($5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29)!=null){$7=$5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29).toString();}if($5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D)!=null){$8=$5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).toString();}if($5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37)!=null){$9=$5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37).toString();}if($9.length>=1&&$7.length>1){$1='<tr status="Complete" class="Row_'+$6+'" id="'+keyValue+'-row'+$3+'" Name="'+keyValue+'-row'+$3+'" bgcolor= "'+P2.PS.AMEREN.CM.AmerenP2Constants.remarkColor+'" style="border:1px solid gainsboro"><td>';}else if($8===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){$1='<tr status="Complete" class="Row_'+$6+'" id="'+keyValue+'-row'+$3+'" Name="'+keyValue+'-row'+$3+'" bgcolor= "'+P2.PS.AMEREN.CM.AmerenP2Constants.completeColor+'" style="border:1px solid gainsboro;"><td>';}else{$1='<tr status="" class="Row_'+$6+'" id="'+keyValue+'-row'+$3+'" Name="'+keyValue+'-row'+$3+'" style="border:1px solid gainsboro"><td>';}var $A=(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)))?'':window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if(!String.isNullOrEmpty($7)&&($A===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E)){if($7.length>=2){if($8===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){$1+='<input type="checkbox" class="'+keyValue+'-checkbox" id="'+keyValue+'-checkboxField_'+$3+'" style="margin-left:10px" Name="'+keyValue+'-checkboxField_'+$3+'" checked >';}else{$1+='<input type="checkbox" class="'+keyValue+'-checkbox" id="'+keyValue+'-checkboxField_'+$3+'" style="margin-left:10px" Name="'+keyValue+'-checkboxField_'+$3+'">';}}else{$1+='<input type="checkbox" class="'+keyValue+'-checkbox" id="'+keyValue+'-checkboxField_'+$3+'" style="margin-left:10px" Name="'+keyValue+'-checkboxField_'+$3+'" disabled>';}}else{$1+='<input type="checkbox" class="'+keyValue+'-checkbox" id="'+keyValue+'-checkboxField_'+$3+'" style="margin-left:10px" Name="'+keyValue+'-checkboxField_'+$3+'" disabled>';}if($A===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){$1+='<td>By:<input type="text" class="'+keyValue+'-text" id="'+keyValue+'-text_'+$3+'" Name = "'+keyValue+'-text_'+$3+'" value="'+$7+'" style="margin-left:10px;width:50px"></td>'+'</td>';}else{$1+='<td>By:<input type="text"  disabled class="'+keyValue+'-text" id="'+keyValue+'-text_'+$3+'" Name = "'+keyValue+'-text_'+$3+'" value="'+$7+'" style="margin-left:10px;width:50px"></td>'+'</td>';}$1+='<td style="cursor: pointer;" class ="'+keyValue+'-SummaryDataCol"  Key="'+$6+'" name="'+keyValue+'-SummaryDataCol_'+$3+'" id="'+keyValue+'-SummaryDataCol_'+$3+'">';for(var $B=0;$B<fields.length;$B++){var $C='';if($5.getPropertyByName(fields[$B])!=null){$C=$5.getPropertyByName(fields[$B]).toString();}if(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFields.contains(keyValue+'-'+fields[$B])){if($5.getPropertyByName(fields[$B])!=null){var $D=$5.getPropertyByName(fields[$B]);$C=$D.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeFields.contains(keyValue+'-'+fields[$B])){if($5.getPropertyByName(fields[$B])!=null){var $E=$5.getPropertyByName(fields[$B]);$C=$E.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}}$1+='<span id="'+keyValue+'-Heading-'+header[$B].replaceAll(' ','')+'_'+$3+'"  style="margin-left:10px;font-weight:bold;font-size: 14px;font-family: Helvetica;">'+header[$B]+' : </span><span style="font-weight:bold;font-size: 14px;font-family: Helvetica" id="'+keyValue+'-Data-'+header[$B].replaceAll(' ','')+'_'+$3+'">'+$C+'</span></br>';}$1+='<span id="'+keyValue+'-Heading-Remarks_'+$3+'"  style="margin-left:10px;display:none"> Remarks: </span><span style="display:none" id="'+keyValue+'-Data-Remarks_'+$3+'">'+$9+'</span>';$1+='</td></tr>';$2+=$1;}}if(!$3){$2='<tr><td>No Records to Display</td></tr>';}$0=$0+$2+'</table>';var $4=$($0);return $4;},createTableWithStartFinishCompleteButtonsWithOBJ:function(header,fields,keyValue,listofObjectList){var $0='';var $1='';var $2=0;var $3='<table id="'+keyValue+'-summaryTable" edited="false" style="border-collapse:collapse;border:1px solid gainsboro; width:100%">';var $enum1=ss.IEnumerator.getEnumerator(listofObjectList);while($enum1.moveNext()){var $5=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)&&P2.PS.AMEREN.CM.AmerenP2Constants.number===parseInt($5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString())){$2++;var $6=$5.get_key().toString();var $7='';var $8='';var $9='';var $A=(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)))?'':window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if($A!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){$8='<button type="button" class="'+keyValue+'_startButton" id="'+keyValue+'-StartButtonField_'+$2+'" style="margin-left:10px;display:block; background-color: rgb(169,169,169);border: none;color: white;padding: 10px 24px;text-align: center;text-decoration: none;font-size: 13px;font-family:Verdana,Arial,sans-serif;border-radius: 10px;font-weight: bold;width: 100px;" Name="'+keyValue+'-StartButtonField_'+$2+'" disabled>Start</button>';}else{$8='<button type="button" class="'+keyValue+'_startButton" id="'+keyValue+'-StartButtonField_'+$2+'" style="margin-left:10px;display:block; background-color: rgb(2, 113, 182);border: none;color: white;padding: 10px 24px;text-align: center;text-decoration: none;font-size: 13px;font-family:Verdana,Arial,sans-serif;border-radius: 10px;font-weight: bold;width: 100px;" Name="'+keyValue+'-StartButtonField_'+$2+'">Start</button>';}if($A!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){$9='<button type="button" class="'+keyValue+'_finishButton" id="'+keyValue+'-FinishButtonField_'+$2+'" style="margin-left:10px;display:block; background-color:#FF7F50;border: none;color: white;padding: 10px 24px;;text-align: center;text-decoration: none;font-size: 13px;font-family:Verdana,Arial,sans-serif;border-radius: 10px;font-weight: bold;width: 100px;" Name="'+keyValue+'-FinishButtonField_'+$2+'" disabled>Finish</button>';}else{$9='<button type="button" class="'+keyValue+'_finishButton" id="'+keyValue+'-FinishButtonField_'+$2+'" style="margin-left:10px;display:block; background-color: #FF7F50;border: none;color: white;padding: 10px 24px;;text-align: center;text-decoration: none;font-size: 13px;font-family:Verdana,Arial,sans-serif;border-radius: 10px;font-weight: bold;width: 100px;" Name="'+keyValue+'-FinishButtonField_'+$2+'">Finish</button>';}var $B='<button type="button" class="'+keyValue+'_completeButton" id="'+keyValue+'-CompleteButtonField_'+$2+'" style="margin-left:10px;display:block;background-color: #228B22;border: none;padding: 10px 12px;border-radius: 10px;background-repeat:no-repeat;color:white;;font-size: 13px;font-family:Verdana,Arial,sans-serif;text-align: center;text-decoration: none;font-weight: bold;width: 100px;" Name="'+keyValue+'-CompleteButtonField_'+$2+'" disabled>Complete</button>';var $C='<button type="button" class="'+keyValue+'_startButton" id="'+keyValue+'-StartButtonField_'+$2+'" style="margin-left:10px;display:none; background-color: rgb(2, 113, 182);border: none;color: white;padding: 10px 24px;;text-align: center;text-decoration: none;font-size: 13px;font-family:Verdana,Arial,sans-serif;border-radius: 10px;font-weight: bold;width: 100px;"  Name="'+keyValue+'-StartButtonField_'+$2+'" >Start</button>';var $D='<button type="button" class="'+keyValue+'_finishButton" id="'+keyValue+'-FinishButtonField_'+$2+'" style="margin-left:10px;display:none; background-color: #FF7F50;border: none;color: white;padding: 10px 24px;;text-align: center;text-decoration: none;font-size: 13px;font-family:Verdana,Arial,sans-serif;border-radius: 10px;font-weight: bold;width: 100px;" Name="'+keyValue+'-FinishButtonField_'+$2+'" >Finish</button>';var $E='<button type="button" class="'+keyValue+'_completeButton" id="'+keyValue+'-CompleteButtonField_'+$2+'" style="margin-left:10px;display:none;background-color: #228B22;border: none;padding: 10px 12px;border-radius: 10px;background-repeat:no-repeat;color:white;;font-size: 13px;font-family:Verdana,Arial,sans-serif;text-align: center;text-decoration: none;font-weight: bold;width: 100px;" Name="'+keyValue+'-CompleteButtonField_'+$2+'" disabled>Complete</button>';if($5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)!=null){$7=$5.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();}if(!$7||!$7){$0='<tr class="Row_'+$6+'" id="'+keyValue+'-row'+$2+'" Name="'+keyValue+'-row'+$2+'" style="border:1px solid gainsboro;" bgcolor="white"><td>';$0+=$8;$0+=$D;$0+=$E;}else if($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3E){$0='<tr class="Row_'+$6+'" id="'+keyValue+'-row'+$2+'" Name="'+keyValue+'-row'+$2+'" style="border:1px solid gainsboro" bgcolor="'+P2.PS.AMEREN.CM.AmerenP2Constants.finishColor+'"><td>';$0+=$C;$0+=$9;$0+=$E;}else if($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C){$0='<tr status="Complete" class="Row_'+$6+'" id="'+keyValue+'-row'+$2+'" Name="'+keyValue+'-row'+$2+'" style="border:1px solid gainsboro;" bgcolor="'+P2.PS.AMEREN.CM.AmerenP2Constants.completeColor+'"><td>';$0+=$C;$0+=$D;$0+=$B;}$0+='<td style="cursor: pointer;" class ="'+keyValue+'-SummaryDataCol"  Key="'+$6+'" name="'+keyValue+'-SummaryDataCol_'+$2+'" id="'+keyValue+'-SummaryDataCol_'+$2+'">';for(var $F=0;$F<fields.length;$F++){var $10='';if($5.getPropertyByName(fields[$F])!=null){$10=$5.getPropertyByName(fields[$F]).toString();}if(P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeFields.contains(keyValue+'-'+fields[$F])){if($5.getPropertyByName(fields[$F])!=null){var $11=$5.getPropertyByName(fields[$F]);$10=$11.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFields.contains(keyValue+'-'+fields[$F])){var $12=$5.getPropertyByName(fields[$F]);$10=$12.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$25);}if((!$7&&P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart.contains(fields[$F]))||($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3E&&P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish.contains(fields[$F]))||($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C&&P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete.contains(fields[$F]))){$0+='<div id="'+keyValue+'-'+fields[$F]+'_'+$2+'"><span id="'+keyValue+'-Heading-'+header[$F].replaceAll(' ','')+'_'+$2+'"  style="margin-left:10px;font-weight:bold;font-size: 14px;font-family: Helvetica;">'+header[$F]+' : </span><span style="font-weight:bold;font-size: 14px;font-family: Helvetica" id="'+keyValue+'-Data-'+header[$F].replaceAll(' ','')+'_'+$2+'">'+$10+'</span></br></div>';}else{$0+='<div id="'+keyValue+'-'+fields[$F]+'_'+$2+'" style="display:none"><span id="'+keyValue+'-Heading-'+header[$F].replaceAll(' ','')+'_'+$2+'"  style="margin-left:10px;font-weight:bold;font-size: 14px;font-family: Helvetica;">'+header[$F]+' : </span><span style="font-weight:bold;font-size: 14px;font-family: Helvetica;" id="'+keyValue+'-Data-'+header[$F].replaceAll(' ','')+'_'+$2+'">'+$10+'</span></br></div>';}}$0+='<span id="'+keyValue+'-Heading-Status_'+$2+'"  style="margin-left:10px;display:none"> Status: </span><span style="display:none" id="'+keyValue+'-Data-Status_'+$2+'">'+$7+'</span>';$0+='</td></tr>';$1+=$0;}}if(!$2){$1='<tr><td>No Records to Display</td></tr>';}$3=$3+$1+'</table>';var $4=$($3);return $4;},createSortButton:function(keyValue,sortProperty){var $0='<div id="'+keyValue+'-sortDivision" style="width:42%;float:left;" id="'+keyValue+'-SortId" class="sortBtn button1">Sort</div><Span style="display:none" class="'+keyValue+'_SortProperty'+'">'+sortProperty+'</Span>';var $1=$($0);return $1;},createFilter:function(headingValues,keyValue){var $0='<div id="'+keyValue+'-filterContainer" class="button1 filterBtn" style="width:45%;float:right;">Search</div>'+'<div id="'+keyValue+'-filterDiv" style="min-width:55%;float:right">'+'<table style="width:100%"><tr id="'+keyValue+'-selectFieldRow" style="display:none;"><td><span style="display:block font-size:13px; font-family:Helvetica; color:rgb(2, 113, 182);float: right;">Select Field</span></td>'+'<td><select style="width: 100%;height: 25px; display:inline" id="'+keyValue+'-filterDDL">';var $1='<option value="SelectField">Select Field</option>';var $enum1=ss.IEnumerator.getEnumerator(headingValues);while($enum1.moveNext()){var $3=$enum1.current;$1+='<option value="'+$3.replaceAll(' ','')+'">'+$3+'</option>';}$0=$0+$1+'</select></td></tr><tr id="'+keyValue+'-searchvalueRow" style="display:none;"><td><span style="display:block font-size:13px; font-family:Helvetica; color:rgb(2, 113, 182)">Contains</span></td>'+'<td><input type="text" style="line-height: 20px;width:93%;height:20px; display:inline;" Name="'+keyValue+'-filterTextbox" id="'+keyValue+'-filterTextbox" placeholder="Search..." value""></td></tr></table></div>';var $2=$($0);return $2;},searchDivClick:function(e){var $0=e.target.id.toString().split('-')[0];if(!$('#'+$0+'-selectFieldRow').is(':visible')){$('#'+$0+'-selectFieldRow').css('display','table-row');}else{$('#'+$0+'-selectFieldRow').css('display','none');$('#'+$0+'-searchvalueRow').css('display','none');$('#'+$0+'-filterDDL').val('SelectField');this.showAllRows($0);}},filterChange:function(e){var $0=e.target.id.toString().split('-')[0];if($('#'+e.target.id).val()!=null){if($('#'+e.target.id).val().toString()!=='SelectField'&&!!$('#'+e.target.id).val().toString()){$('#'+$0+'-searchvalueRow').css('display','table-row');}else{$('#'+$0+'-searchvalueRow').css('display','none');}if($('#'+e.target.id).val().toString()==='SelectField'){this.showAllRows($0);}}else{$('#'+$0+'-searchvalueRow').css('display','none');}$('#'+$0+'-filterTextbox').val('').trigger('change');},showAllRows:function(keyVal){var $0=$('#'+keyVal+'-SummaryTableDiv');$('tr',$0).each(function($p1_0,$p1_1){
if(!$p1_1.id.indexOf(keyVal+'-row')){$('#'+$p1_1.id).css('display','table-row');}});},applyfilter:function(e){var $0=e.target.id.toString().split('-')[0];var $1=$('#'+$0+'-filterDDL').val();var $2='';var $3='';if($1!=null){$2=''+$0+'-Data-'+$1.toString();}var $4=$('#'+$0+'-filterTextbox').val();if($4!=null){$3=$4.toString().toLowerCase();}var $5=$('#'+$0+'-SummaryTableDiv');$('span',$5).each(function($p1_0,$p1_1){
if(!$p1_1.id.indexOf($2)){var $1_0='';if($('#'+$p1_1.id)!=null){$1_0=$('#'+$p1_1.id).text().toLowerCase();}var $1_1=parseInt($p1_1.id.split('_')[1]);if(!String.isNullOrEmpty($3)){if($1_0.indexOf($3)===-1){$('#'+$0+'-row'+$1_1).css('display','none');}else{$('#'+$0+'-row'+$1_1).css('display','table-row');}}else{$('#'+$0+'-row'+$1_1).css('display','table-row');}}});},sort:function(e){var $0=e.target.id.toString().split('-')[0];var $1=$('#'+$0+'-SummaryTableDiv');var $2='';var $3=[];var $4={};$2=($('.'+$0+'_SortProperty').text()!=null)?$('.'+$0+'_SortProperty').text():'';$('Span',$1).each(function($p1_0,$p1_1){
var $1_0=parseInt($p1_1.id.split('_')[1]);if(!$p1_1.id.indexOf($0+'-Data-'+$2+'_'+$1_0)){var $1_1=($('#'+$p1_1.id).text()!=null)?$('#'+$p1_1.id).text():'';$3.add($1_1);var $1_2=$('#'+$0+'-row'+$1_0);$4[$1_1]=$1_2;$('#'+$0+'-summaryTable').remove('#'+$0+'-row'+$1_0);}});if(this.sortClick){$3.sort();this.sortClick=false;}else{$3.sort();$3.reverse();this.sortClick=true;}var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $5=$enum1.current;$('#'+$0+'-summaryTable').append($4[$5]);}},sortWithThreeAtrr:function(e){var $0=e.target.id.toString().split('-')[0];var $1=$('#'+$0+'-SummaryTableDiv');var $2=[];var $3=[];var $4=[];$('input',$1).each(function($p1_0,$p1_1){
var $1_0=$('#'+$p1_1.id).attr('Name');var $1_1=parseInt($1_0.split('_')[1]);$1_0=$1_0.split('_')[0];if(!$1_0.indexOf($0+'-checkboxField')){if($('#'+$0+'-row'+$1_1).attr('bgcolor')!=null){if($('#'+$0+'-row'+$1_1).attr('bgcolor').toString()===P2.PS.AMEREN.CM.AmerenP2Constants.remarkColor){var $1_2=$('#'+$0+'-row'+$1_1);$3.add($1_2);$('#'+$0+'-summaryTable').remove('#'+$0+'-row'+$1_1);}else if($('#'+$0+'-row'+$1_1).attr('bgcolor').toString()===P2.PS.AMEREN.CM.AmerenP2Constants.completeColor){var $1_3=$('#'+$0+'-row'+$1_1);$4.add($1_3);$('#'+$0+'-summaryTable').remove('#'+$0+'-row'+$1_1);}}else{var $1_4=$('#'+$0+'-row'+$1_1);$2.add($1_4);$('#'+$0+'-summaryTable').remove('#'+$0+'-row'+$1_1);}}});var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $5=$enum1.current;$('#'+$0+'-summaryTable').append($5);}var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $6=$enum2.current;$('#'+$0+'-summaryTable').append($6);}var $enum3=ss.IEnumerator.getEnumerator($4);while($enum3.moveNext()){var $7=$enum3.current;$('#'+$0+'-summaryTable').append($7);}},sortWithStartFinishCompeteButtonClick:function(e){var $0=e.target.id.toString().split('-')[0];var $1=$('#'+$0+'-SummaryTableDiv');var $2=[];var $3=[];var $4=[];$('tr',$1).each(function($p1_0,$p1_1){
if(!$p1_1.id.indexOf($0+'-row')){var $1_0=$('#'+$p1_1.id).attr('Name');var $1_1=parseInt($1_0.split('-')[1].substr(3));$1_0=$1_0.split('_')[0];if($('#'+$0+'-row'+$1_1).attr('bgcolor')!=null){if($('#'+$0+'-row'+$1_1).attr('bgcolor').toString()===P2.PS.AMEREN.CM.AmerenP2Constants.startColor){var $1_2=$('#'+$0+'-row'+$1_1);$2.add($1_2);$('#'+$0+'-summaryTable').remove('#'+$0+'-row'+$1_1);}else if($('#'+$0+'-row'+$1_1).attr('bgcolor').toString()===P2.PS.AMEREN.CM.AmerenP2Constants.finishColor){var $1_3=$('#'+$0+'-row'+$1_1);$3.add($1_3);$('#'+$0+'-summaryTable').remove('#'+$0+'-row'+$1_1);}else if($('#'+$0+'-row'+$1_1).attr('bgcolor').toString()===P2.PS.AMEREN.CM.AmerenP2Constants.completeColor){var $1_4=$('#'+$0+'-row'+$1_1);$4.add($1_4);$('#'+$0+'-summaryTable').remove('#'+$0+'-row'+$1_1);}}}});var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $5=$enum1.current;$('#'+$0+'-summaryTable').append($5);}var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $6=$enum2.current;$('#'+$0+'-summaryTable').append($6);}var $enum3=ss.IEnumerator.getEnumerator($4);while($enum3.moveNext()){var $7=$enum3.current;$('#'+$0+'-summaryTable').append($7);}},checkBoxClick:function(e){var $0=this.$1.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();this.$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,'');this.$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$0);var $1=e.target.id.toString().split('-')[0];var $2=e.target.id;var $3=$('#'+e.target.id).attr('Name');$('#'+$1+'-summaryTable').attr('edited','true');var $4=parseInt($3.split('_')[1]);$3=$3.split('_')[0];var $5='';var $6='';if($('#'+$1+'-Data-Remarks_'+$4).text()!=null){$6=$('#'+$1+'-Data-Remarks_'+$4).text().toString();}if($('#'+$1+'-Data-Remarks_'+$4).text()!=null){$5=$('#'+$1+'-text_'+$4).val().toString();}if($('#'+e.target.id).is(':checked')){if(!($6.length>=1&&$5.length>=2)){$('#'+$1+'-row'+$4).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.completeColor);$('#'+$1+'-row'+$4).attr('status','Complete');}}else{$('#'+$1+'-row'+$4).removeAttr('bgcolor');$('#'+$1+'-text_'+$4).val('');$('#'+$1+'-Data-Remarks_'+$4).text('');$('#'+$1+'-checkboxField_'+$4).prop('checked',false);$('#'+$1+'-checkboxField_'+$4).prop('disabled',true);$('#'+$1+'-row'+$4).attr('status','');}},textBoxChange:function(e){var $0=this.$1.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();this.$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,'');this.$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$0);var $1=e.target.id.toString().split('-')[0];$('#'+$1+'-summaryTable').attr('edited','true');var $2=$('#'+e.target.id).val();var $3=$('#'+e.target.id).attr('Name');var $4=parseInt($3.split('_')[1]);var $5=$1+'-row'+$4;if(!String.isNullOrEmpty($2)){if($2.length>=2){$('#'+$1+'-checkboxField_'+$4).removeAttr('disabled');var $6='';if($('#'+$1+'-Data-Remarks_'+$4).text()!=null){$6=$('#'+$1+'-Data-Remarks_'+$4).text().toString();}if($6.length>=1){$('#'+$1+'-row'+$4).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.remarkColor);$('#'+$1+'-row'+$4).attr('status','Complete');}}else{$('#'+$5).removeAttr('bgcolor');$('#'+$1+'-row'+$4).attr('status','');$('#'+$1+'-checkboxField_'+$4).prop('checked',false);$('#'+$1+'-checkboxField_'+$4).prop('disabled',true);}}else{$('#'+$5).removeAttr('bgcolor');$('#'+$1+'-row'+$4).attr('status','');$('#'+$1+'-checkboxField_'+$4).prop('checked',false);$('#'+$1+'-checkboxField_'+$4).prop('disabled',true);}},getDateObject:function(dateTime){if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){if(dateTime.indexOf('PM')>0){if(parseInt($1[3])<12){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3])+12,parseInt($1[4]),parseInt($1[5]));}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return Date.empty;}}else{return Date.empty;}},startFinishCompeteButtonClick:function(e){var $0=this.$1.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();this.$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,'');this.$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$0);var $1=e.target.id.toString().split('-')[0];var $2=$('#'+e.target.id).attr('Name');var $3=parseInt($2.split('_')[1]);var $4=$1+'-'+'StartButtonField_'+$3;var $5=$1+'-'+'FinishButtonField_'+$3;var $6=$1+'-'+'CompleteButtonField_'+$3;var $7=$1+'-row'+$3;$('#'+$1+'-summaryTable').attr('edited','true');if(e.target.id.indexOf('StartButtonField_')>0){$('#'+$4).css('display','none');$('#'+$5).css('display','block');$('#'+$6).css('display','none');$('#'+$7).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.finishColor);$('#'+$1+'-Data-Status_'+$3).text(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3E);$('#'+$7).attr('status','');$('#'+$1+'-Data-ActualFinishDateTime_'+$3).text('');var $8=Date.get_now();$8.setSeconds(0);$('#'+$1+'-Data-ActualStartDateTime_'+$3).text($8.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));var $9=Date.empty;var $A=Date.empty;var $B=Date.empty;var $C=Date.empty;var $D=Date.empty;var $E=0;if($('#'+$1+'-Data-PlannedStartDateTime_'+$3).text()!=null){$9=this.getDateObject($('#'+$1+'-Data-PlannedStartDateTime_'+$3).text().toString());}if($('#'+$1+'-Data-PlannedFinishDateTime_'+$3).text()!=null){$A=this.getDateObject($('#'+$1+'-Data-PlannedFinishDateTime_'+$3).text().toString());}if($('#'+$1+'-Data-ActualStartDateTime_'+$3).text()!=null){$C=this.getDateObject($('#'+$1+'-Data-ActualStartDateTime_'+$3).text().toString());}$E=$A-$9;if($A!==$D&&$9!==$D){if($A.getFullYear().toString()!=='1899'&&$9.getFullYear().toString()!=='1899'){$B=this.$2($C,$E);$B.setSeconds(0);$('#'+$1+'-Data-EstimatedFinishDateTime_'+$3).text($B.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));}}var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum1.moveNext()){var $F=$enum1.current;$('#'+$1+'-'+$F+'_'+$3).css('display','none');}var $enum2=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum2.moveNext()){var $10=$enum2.current;$('#'+$1+'-'+$10+'_'+$3).css('display','none');}var $enum3=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum3.moveNext()){var $11=$enum3.current;$('#'+$1+'-'+$11+'_'+$3).css('display','table-row');}}else if(e.target.id.indexOf('FinishButtonField_')>0){$('#'+$4).css('display','none');$('#'+$5).css('display','none');$('#'+$6).css('display','block');$('#'+$7).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.completeColor);$('#'+$7).attr('status','Complete');$('#'+$1+'-Data-Status_'+$3).text(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C);var $12=Date.get_now();$12.setSeconds(0);$('#'+$1+'-Data-ActualFinishDateTime_'+$3).text($12.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));var $enum4=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum4.moveNext()){var $13=$enum4.current;$('#'+$1+'-'+$13+'_'+$3).css('display','none');}var $enum5=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum5.moveNext()){var $14=$enum5.current;$('#'+$1+'-'+$14+'_'+$3).css('display','none');}var $enum6=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum6.moveNext()){var $15=$enum6.current;$('#'+$1+'-'+$15+'_'+$3).css('display','table-row');}}},$2:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds(),$p0.getMilliseconds()+$p1);}}
P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequest=function(){this.$3_1=new P2.PS.AMEREN.CM.CustomPanels.Asset();this.$3_3='';this.$3_4='';this.$3_5='';this.$3_6='';this.$3_8='';P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequest.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequest.prototype={$3_0:null,$3_2:0,$3_7:0,ev:null,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_9));var $0=ss.parseXml(this.get_customSettings());var $1=$0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7D).text;var $2=$0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7E).text;var $3=$0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7F).text;var $4=this.createCustomButton($1,$2,$3);$4.click(ss.Delegate.create(this,this.openServiceRequest));$4.appendTo(this.get_mainElement());},$3_9:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY','');W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenForm(ss.Delegate.create(this,this.$3_F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_9));this.$3_7=0;}},$3_A:function($p0,$p1){try{var $0=$p0.getCollectionIDByName('ServiceRequest');if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('ServiceRequest')){var $1=($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80)==null)?'':$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80).toString();if($1==='Record Updates'||$1==='Asset Creation'){var $3='';if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString())){$3+='AssetDescription: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString())){$3+='circuitNumber: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString())){$3+='inServiceDate: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString())){$3+='manufacturer: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString())){$3+='manufacturerModel: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString())){$3+='manufactureDate: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString())){$3+='serialNumber: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName('DivisionOC')!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName('DivisionOC').toString())){$3+='DivisionOC: '+$p1.get_formServices().getUIPropertyValueByName('DivisionOC').toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString())){$3+='parentLocation: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A).toString())){$3+='locationDescription: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString())){$3+='substationName: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName('RegionDistrict')!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName('RegionDistrict').toString())){$3+='RegionDistrict: '+$p1.get_formServices().getUIPropertyValueByName('RegionDistrict').toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString())){$3+='AssetUpdateComments: '+this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString()+',';}this.ev.get_formServices().setUIPropertyValueByNameEx($0,'ServiceRequestComments',$3.remove($3.length-1));}else if($1==='Construction'){var $4='';if(this.ev.get_formServices().getUIPropertyValueByName('EquipmentType')!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName('EquipmentType').toString())){$4+='EquipmentType: '+this.ev.get_formServices().getUIPropertyValueByName('EquipmentType').toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString())){$4+='Location: '+this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName('Position')!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName('Position').toString())){$4+='Position: '+this.ev.get_formServices().getUIPropertyValueByName('Position').toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName('Phase')!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName('Phase').toString())){$4+='Phase: '+this.ev.get_formServices().getUIPropertyValueByName('Phase').toString()+',';}if(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)!=null&&!String.isNullOrEmpty(this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString())){$4+='Comments: '+this.ev.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString()+',';}this.ev.get_formServices().setUIPropertyValueByNameEx($0,'ServiceRequestComments',$4.remove($4.length-1));}var $2=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName('ServiceRequest'),'Attachments');if($2.get_count()>0){$p0.setSharedData('SID_SRKey',$p1.get_formObject().get_mobileKey());}else{$p1.get_formServices().setUIPropertyValueByNameEx($0,'IsTaskCompleted',true);}}}catch($5){this.controllerServices.errorLogEx('Error source:: CreateServiceRequest/FormEvents_BeforeSaveForm()',$5);}},$3_B:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('ServiceRequest')&&$p1.get_formObject().get_key()===-1){if(!this.$3_7){var $0=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem(-1,$p1.get_formObject().getPropertyByName('Name').toString(),'ServiceRequestKey',$p1.get_formObject());if(!$p1.get_formObject().getPropertyByName('IsStandAlone')){var $1=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,parseInt(this.controllerServices.getSharedData('PARENT_ASSIGNMENT_KEY').toString()));var $2=$1.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'ServiceRequests');$2.add($0);$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'ServiceRequests',$2);$1.saveForm();$1.refreshUIPropertyByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'ServiceRequests');}this.$3_7++;}$p1.get_formServices().closeForm();}}catch($3){this.controllerServices.errorLogEx('Error source:: CreateServiceRequest/FormEvents_AfterSaveForm()',$3);}},$3_C:function($p0,$p1){this.$3_2=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);if($p1.get_formObject().get_objectType()===this.$3_2){try{$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,'CallID',P2.PS.AMEREN.CM.AmerenP2Constants.callid);$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,'Number',P2.PS.AMEREN.CM.AmerenP2Constants.number);this.ev=$p1;$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('ID')!=null){var $1_0=$p1_0.getPropertyByName('ID').toString();$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,'CreatedBy',$1_0);}if($p1_0.getPropertyByName('District')!=null){var $1_1=$p1_0.getPropertyByName('District').toString();var $1_2=$1_1.split(' ');this.$3_6=$1_2[$1_2.length-1];var $1_3=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6F);$p0.getDictionaryItemsFilterByName($1_3,$1_1,50,ss.Delegate.create(this,function($p2_0){
if($p2_0.get_item(0)!=null){var $2_0=ss.parseXml($p2_0.get_item(0).get_body());this.$3_5=$2_0.selectSingleNode('State').text;}}));}}));}catch($0){$p0.errorLog('Error in CustomPanels.CreateServiceRequest.FormEvents_AfterOpenForm: '+$0.message);}}},$3_D:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15)){var $0=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);var $1=$p1.get_formServices().getUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80);var $2=($1==null)?'':$1.toString();try{if($p1.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80){this.$3_2=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,'');$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,'');if($2!=null){var $3=null;switch($2){case 'Construction':$3=((this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82)==null)?new P2.PS.AMEREN.CM.CustomPanels.Asset():this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82));this.$3_E($p1.get_formServices(),$0,$3);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$3.locationId);if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}break;case 'Record Updates':$3=((this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82)==null)?new P2.PS.AMEREN.CM.CustomPanels.Asset():this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82));this.$3_E($p1.get_formServices(),$0,$3);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}break;case 'Corrective':$3=new P2.PS.AMEREN.CM.CustomPanels.Asset();this.$3_E($p1.get_formServices(),$0,$3);$3=((this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82)==null)?new P2.PS.AMEREN.CM.CustomPanels.Asset():this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82));$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$3.assetId);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$3.locationId);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8B,'');if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,'REL-REPAIR');}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A5);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,'XMSNLINE-REPAIR');}break;case 'Asset Creation':$3=new P2.PS.AMEREN.CM.CustomPanels.Asset();this.$3_E($p1.get_formServices(),$0,$3);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}break;}}}}catch($4){this.controllerServices.errorLog('Error in CustomPanels.CreateServiceRequest.AfterPropertyChanged : '+$4.message);}}},getDateObject:function(dateTime){try{if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){if(dateTime.indexOf('PM')>0){if(parseInt($1[3])<12){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3])+12,parseInt($1[4]),parseInt($1[5]));}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return Date.empty;}}else{return Date.empty;}}catch($2){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$2.message);return Date.empty;}},$3_E:function($p0,$p1,$p2){try{$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$p2.assetId);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83,$p2.assetDescription);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84,$p2.assetUpdateComments);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85,$p2.circuitNumber);if(String.isNullOrEmpty($p2.inServiceDate)){$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C,Date.empty);}else{$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C,new Date($p2.inServiceDate));}$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86,$p2.manufacturer);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87,$p2.manufacturerModel);if(String.isNullOrEmpty($p2.inServiceDate)){$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C,Date.empty);}else{$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92,new Date($p2.manufactureDate));}$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88,$p2.serialNumber);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$p2.locationId);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A,$p2.locationDescription);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95,$p2.parentLocation);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96,$p2.substationName);}catch($0){this.controllerServices.errorLog('Error in CustomPanels.CreateServiceRequest.SetUIPropertyValues: '+$0.message);}},$3_F:function($p0,$p1){this.$3_0=$p0;if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15)){$p1.get_formObject().setPropertyByName('Name',this.controllerServices.guidGenerator());}if($p1.get_formObject().get_objectType()===this.$3_0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$0)){try{this.$3_1.assetId=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).toString();this.$3_1.assetDescription=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString();this.$3_1.assetUpdateComments=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString();this.$3_1.circuitNumber=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString();this.$3_1.inServiceDate=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C)==null)?null:$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString();this.$3_1.manufacturer=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString();this.$3_1.manufacturerModel=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString();this.$3_1.manufactureDate=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92)==null)?null:$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString();this.$3_1.serialNumber=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString();this.$3_1.locationId=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString();this.$3_1.locationDescription=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A).toString();this.$3_1.parentLocation=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString();this.$3_1.substationName=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString();}catch($0){this.controllerServices.errorLog('Error in CustomPanels.CreateServiceRequest.FormEvents_BeforeOpenForm: '+$0.message);}}},openServiceRequest:function(e){this.$3_7=0;var $0=this.$3_0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);var $1=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15,null);this.$3_0.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82,this.$3_1);var $2=null;$2=this.controllerServices.getFormServices().getOpenFormByType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment);this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY',$2.get_formObject().get_key());$1.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4,this.controllerServices.guidGenerator());this.$3_0.openFormByObject($1,false,null,function($p1_0){
});},createCustomButton:function(title,id,text){var $0=null;var $1='<div id='+title+' class="button1 save" style="height: 32px;">'+text+'</div>';$0=$($1);return $0;}}
P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequestSupervisor=function(){this.$3_1=new P2.PS.AMEREN.CM.CustomPanels.Asset();this.$3_3='';this.$3_4='';this.$3_5='';this.$3_6='';P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequestSupervisor.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequestSupervisor.prototype={$3_0:null,$3_2:0,$3_7:0,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenNewForm(ss.Delegate.create(this,this.$3_8));var $0=ss.parseXml(this.get_customSettings());var $1=$0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7D).text;var $2=$0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7E).text;var $3=$0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7F).text;var $4=this.createCustomButton($1,$2,$3);$4.click(ss.Delegate.create(this,this.openServiceRequest));$4.appendTo(this.get_mainElement());},$3_8:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15)){$p1.get_formObject().setPropertyByName('Name',this.controllerServices.guidGenerator());}},$3_9:function($p0,$p1){try{var $0=$p0.getCollectionIDByName('ServiceRequest');if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('ServiceRequest')){var $1=($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80)==null)?'':$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80).toString();if($1==='Record Updates'||$1==='Asset Creation'){var $3='';if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString())){$3+='AssetDescription: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString())){$3+='circuitNumber: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString())){$3+='inServiceDate: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString())){$3+='manufacturer: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString())){$3+='manufacturerModel: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString())){$3+='manufactureDate: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString())){$3+='serialNumber: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('DivisionOC')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('DivisionOC').toString())){$3+='DivisionOC: '+$p1.get_formServices().getUIPropertyValueByName('DivisionOC').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString())){$3+='parentLocation: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A).toString())){$3+='locationDescription: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString())){$3+='substationName: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('RegionDistrict')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('RegionDistrict').toString())){$3+='RegionDistrict: '+$p1.get_formServices().getUIPropertyValueByName('RegionDistrict').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString())){$3+='AssetUpdateComments: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString()+',';}$p1.get_formServices().setUIPropertyValueByNameEx($0,'ServiceRequestComments',$3.remove($3.length-1));}else if($1==='Construction'){var $4='';if($p1.get_formServices().getUIPropertyValueByName('EquipmentType')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('EquipmentType').toString())){$4+='EquipmentType: '+$p1.get_formServices().getUIPropertyValueByName('EquipmentType').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString())){$4+='Location: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('Position')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('Position').toString())){$4+='Position: '+$p1.get_formServices().getUIPropertyValueByName('Position').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('Phase')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('Phase').toString())){$4+='Phase: '+$p1.get_formServices().getUIPropertyValueByName('Phase').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString())){$4+='GeneralInfo: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString()+',';}$p1.get_formServices().setUIPropertyValueByNameEx($0,'ServiceRequestComments',$4.remove($4.length-1));}var $2=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName('ServiceRequest'),'Attachments');if($2.get_count()>0){$p0.setSharedData('SID_SRKey',$p1.get_formObject().get_mobileKey());}else{$p1.get_formServices().setUIPropertyValueByNameEx($0,'IsTaskCompleted',true);}}}catch($5){this.controllerServices.errorLogEx('Error source:: CreateServiceRequestSupervisor/FormEvents_BeforeSaveForm()',$5);}},$3_A:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY','');W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenForm(ss.Delegate.create(this,this.$3_F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenNewForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_A));this.$3_7=0;}},$3_B:function($p0,$p1){try{$p1.get_formServices().closeForm();}catch($0){this.controllerServices.errorLogEx('Error source:: CreateServiceRequestSupervisor/FormEvents_AfterSaveForm()',$0);}},$3_C:function($p0,$p1){this.$3_2=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);if($p1.get_formObject().get_objectType()===this.$3_2){try{$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
var $1_0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer;var $1_1=$p1_0.getBody();var $1_2=ss.parseXml($1_1);var $1_3=null;if($1_2!=null){$1_3=$1_2.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9D);var $enum1=ss.IEnumerator.getEnumerator($1_3);while($enum1.moveNext()){var $1_4=$enum1.current;var $1_5=$1_4.attributes.getNamedItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9E).nodeValue;var $1_6=$p1_0.getPropertyName($1_0,parseInt($1_5));if($1_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$41){this.$3_3=$1_4.text;if(!!this.$3_3){var $1_7=$1_4.text.split(' ');this.$3_6=$1_7[$1_7.length-1];if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16)!=null&&String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16).toString())){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());}var $1_8=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6F);$p0.getDictionaryItemsFilterByName($1_8,this.$3_3,50,ss.Delegate.create(this,function($p2_0){
if($p2_0.get_item(0)!=null){$1_2=ss.parseXml($p2_0.get_item(0).get_body());this.$3_4=$1_2.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$70).text;if(!!this.$3_4){var $2_0=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$70);$p0.getDictionaryItemsFilterByName($2_0,this.$3_4,50,ss.Delegate.create(this,function($p3_0){
if($p3_0.get_item(0)!=null){$1_2=ss.parseXml($p3_0.get_item(0).get_body());this.$3_5=$1_2.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;}}));}}}));}}}}}));}catch($0){$p0.errorLog('Error in CustomPanels.CreateServiceRequest.FormEvents_AfterOpenForm: '+$0.message);}}},$3_D:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15)){var $0=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);var $1=$p1.get_formServices().getUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80);var $2=($1==null)?'':$1.toString();try{if($p1.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80){this.$3_2=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,'');$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,'');if($2!=null){var $3=null;switch($2){case 'Construction':$3=((this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82)==null)?new P2.PS.AMEREN.CM.CustomPanels.Asset():this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82));this.$3_E($p1.get_formServices(),$0,$3);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$3.locationId);if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}break;case 'Record Updates':$3=((this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82)==null)?new P2.PS.AMEREN.CM.CustomPanels.Asset():this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82));this.$3_E($p1.get_formServices(),$0,$3);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}break;case 'Corrective':$3=new P2.PS.AMEREN.CM.CustomPanels.Asset();this.$3_E($p1.get_formServices(),$0,$3);$3=((this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82)==null)?new P2.PS.AMEREN.CM.CustomPanels.Asset():this.$3_0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82));$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$3.assetId);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$3.locationId);$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,this.$3_6.toUpperCase());$p1.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8B,'');if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,'REL-REPAIR');}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A5);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9F,'XMSNLINE-REPAIR');}break;case 'Asset Creation':$3=new P2.PS.AMEREN.CM.CustomPanels.Asset();this.$3_E($p1.get_formServices(),$0,$3);if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A1);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A2);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}else if(this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74&&this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A3);}break;}}}}catch($4){this.controllerServices.errorLog('Error in CustomPanels.CreateServiceRequest.AfterPropertyChanged : '+$4.message);}}},getDateObject:function(dateTime){try{if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){if(dateTime.indexOf('PM')>0){if(parseInt($1[3])<12){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3])+12,parseInt($1[4]),parseInt($1[5]));}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return Date.empty;}}else{return Date.empty;}}catch($2){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$2.message);return Date.empty;}},$3_E:function($p0,$p1,$p2){try{$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$p2.assetId);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83,$p2.assetDescription);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84,$p2.assetUpdateComments);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85,$p2.circuitNumber);if(String.isNullOrEmpty($p2.inServiceDate)){$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C,Date.empty);}else{$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C,new Date($p2.inServiceDate));}$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86,$p2.manufacturer);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87,$p2.manufacturerModel);if(String.isNullOrEmpty($p2.inServiceDate)){$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C,Date.empty);}else{$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92,new Date($p2.manufactureDate));}$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88,$p2.serialNumber);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$p2.locationId);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A,$p2.locationDescription);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95,$p2.parentLocation);$p0.setUIPropertyValueByNameEx($p1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96,$p2.substationName);}catch($0){this.controllerServices.errorLog('Error in CustomPanels.CreateServiceRequest.SetUIPropertyValues: '+$0.message);}},$3_F:function($p0,$p1){this.$3_0=$p0;if($p1.get_formObject().get_objectType()===this.$3_0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$0)){try{this.$3_1.assetId=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).toString();this.$3_1.assetDescription=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString();this.$3_1.assetUpdateComments=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString();this.$3_1.circuitNumber=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString();this.$3_1.inServiceDate=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C)==null)?null:$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString();this.$3_1.manufacturer=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString();this.$3_1.manufacturerModel=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString();this.$3_1.manufactureDate=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92)==null)?null:$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString();this.$3_1.serialNumber=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString();this.$3_1.locationId=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString();this.$3_1.locationDescription=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A).toString();this.$3_1.parentLocation=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString();this.$3_1.substationName=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString();}catch($0){this.controllerServices.errorLog('Error in CustomPanels.CreateServiceRequest.FormEvents_BeforeOpenForm: '+$0.message);}}},openServiceRequest:function(e){var $0=this.$3_0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);var $1=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15,null);this.$3_0.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$82,this.$3_1);var $2=null;$2=this.controllerServices.getFormServices().getOpenFormByType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task);this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY',$2.get_formObject().get_key());$1.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4,this.controllerServices.guidGenerator());var $3=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm(this.get_formObject().get_parentObject().get_objectType(),this.get_formObject().get_parentObject().get_key());var $4=$3.getPanelsByPropertyName(2,'ServiceRequests')[0];var $5=$4;$5.openNewGenericObjectForm();},createCustomButton:function(title,id,text){var $0=null;var $1='<div id='+title+' class="button1 save" style="height: 32px;">'+text+'</div>';$0=$($1);return $0;}}
P2.PS.AMEREN.CM.CustomPanels.TimesheetPayCodeFilter=function(){this.$3_1=[];this.$3_2=[];this.$3_3=[];P2.PS.AMEREN.CM.CustomPanels.TimesheetPayCodeFilter.initializeBase(this);W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_6));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_5));}
P2.PS.AMEREN.CM.CustomPanels.TimesheetPayCodeFilter.prototype={$3_0:'',$3_4:null,$3_5:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0)){var $0=$('#PayCodeValues',this.get_mainElement()).val();if(($0==='0')){document.getElementById('errorMsg').style.display = 'block';$p1.cancel=true;}else{document.getElementById('errorMsg').style.display = 'none';}}},$3_6:function($p0,$p1){if($p1.get_formObject().get_objectType()===this.get_formObject().get_objectType()){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_7));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_5));}},$3_7:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0)){this.$3_4=$p0;var $0='';if(this.$3_3!=null){this.$3_3.clear();}this.$3_4.getDictionaryItems(this.$3_4.getDictionaryIDByName('PayCode'),100,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=new P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject();var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_3=$enum1.current;$1_0=new P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject();var $1_4=ss.parseXml($1_3.get_body());this.$3_3.add($1_4.selectSingleNode('Name').text);var $1_5=$1_4.selectSingleNode('Priority').text;$1_0.aPriority=$1_5;$1_0.bName=$1_4.selectSingleNode('Name').text;$1_0.cCode=$1_4.selectSingleNode('Code').text;var $1_6=$1_4.selectSingleNode('Key').text;$1_0.dKey=$1_6;$1_0.region=$1_4.selectSingleNode('Region').text;this.$3_2.add($1_0);}var $1_1=[];$1_1.add('1');$1_1.add('2');$1_1.add('3');$1_1.add('4');$1_1.add('5');$1_1.add('6');$1_1.add('7');var $1_2=new ss.StringBuilder();var $enum2=ss.IEnumerator.getEnumerator($1_1);while($enum2.moveNext()){var $1_7=$enum2.current;var $1_8=$1_7;var $enum3=ss.IEnumerator.getEnumerator(this.$3_2);while($enum3.moveNext()){var $1_9=$enum3.current;if($1_8===$1_9.aPriority.toString()){var $1_A='<option value="'+$1_9.dKey+'" >'+$1_9.bName+'</option>';$1_2.append($1_A);}}}$('#PayCodeValues').append($1_2.toString());if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D)!=null){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D).toString(),150,function($p2_0){
if($p2_0.get_item(0).get_name()===$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D).toString()){$('#PayCodeValues').val($p2_0.get_item(0).getAttribute('Name'));}});}}}));}}catch($1){$p0.errorLogEx('Error source:: FWTaskTypeFilter/FormEvents_AfterOpenForm()',$1);}},init:function(){P2.PS.AMEREN.CM.CustomPanels.TimesheetPayCodeFilter.callBaseMethod(this, 'init');var $0=new ss.StringBuilder();var $1='';$1+='<div class="W6CMPanel W6CMPropPanelCombo" id="displayPayCode"><table style="width: 100%;">';$1+='<tbody><tr><td><div class="W6CMPropPanel_LabelPanel W6CMPropPanel_VerticalLabel" style="padding-bottom: 0px;color: rgb(2, 113, 182);"><div>';$1+='<div id="Text" style="overflow:hidden;word-break: break-word;display: inline;">PayCodes</div>';$1+='<div id="Asterisk" class="asterisk">*</div></div></div></td>';$1+="</tr><tr><td ><div  class=\"W6CMPropPanel_ValuePanel\"><select id=\"PayCodeValues\"><option value='0'\">--None--</option></select></div></td></tr><tr><td><div id=\"errorMsg\" class=\"errorMessage\" style=\"display: none;\">Value cannot be empty</div></td></tr></tbody></table></div>";$($1).appendTo(this.get_mainElement());$('#PayCodeValues',this.get_mainElement()).change(ss.Delegate.create(this,this.$3_8));},$3_8:function($p0){try{var $0=$('#PayCodeValues',this.get_mainElement()).val();$("#PayCodeValues option[value='0']").remove();if($0!=='0'){document.getElementById('errorMsg').style.display = 'none';this.controllerServices.getDictionaryItemsFilterByName(this.controllerServices.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),$0,100,ss.Delegate.create(this,function($p1_0){
this.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p1_0.get_item(0));}));}else{var $1=new W6.ClickMobile.Web.ObjectModel.W6CMDictionaryItem();$1.set_key(-1);$1.set_name('--None--');this.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$1);}}catch($2){this.controllerServices.errorLog('Error source:: FWTaskTypeFilter/ServiceDropdown_Changed(): '+$2.message);}},$3_9:function(){try{var $0='';if(this.$3_3!=null){this.$3_3.clear();}this.$3_4.getDictionaryItems(this.$3_4.getDictionaryIDByName('PayCode'),100,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=ss.parseXml($1_0.get_body());this.$3_3.add($1_1.selectSingleNode('Name').text);}}}));}catch($1){this.controllerServices.errorLog('PayCodeFilterError: Paycode dictionary not loaded');}}}
P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject=function(){}
P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject.prototype={aPriority:0,bName:null,cCode:null,dKey:0,region:null}
P2.PS.AMEREN.CM.CustomPanels.GenericGridView=function(){this.headingList=[];this.propertyList=[];P2.PS.AMEREN.CM.CustomPanels.GenericGridView.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.GenericGridView.prototype={$3_0:null,objectName:'',objCollectionID:0,xmlDoc:null,table:null,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_2));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_1));this.xmlDoc=ss.parseXml(this.get_customSettings());this.table=new P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable(this.get_formServices());},$3_1:function($p0,$p1){if(this.get_formObject().get_objectType()===$p1.get_formObject().get_objectType()){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_2));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_1));}},$3_2:function($p0,$p1){try{if(this.get_formObject().get_objectType()===$p1.get_formObject().get_objectType()){if(!$p1.get_formObject().get_objectType()||$p1.get_formObject().get_objectType()===2){P2.PS.AMEREN.CM.AmerenP2Constants.callid=this.get_formServices().getUIPropertyValueByNameEx(2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();P2.PS.AMEREN.CM.AmerenP2Constants.number=this.get_formServices().getUIPropertyValueByNameEx(2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);}else{P2.PS.AMEREN.CM.AmerenP2Constants.callid=(ss.isNullOrUndefined(window.localStorage.getItem('CallID')))?'':window.localStorage.getItem('CallID').toString();P2.PS.AMEREN.CM.AmerenP2Constants.number=(ss.isNullOrUndefined(window.localStorage.getItem('Number')))?0:parseInt(window.localStorage.getItem('Number').toString());}this.$3_0=$p0;var $0=null;var $1=null;var $2=null;var $3='';if(this.xmlDoc!=null){$0=this.xmlDoc.selectNodes('Field');$1=this.xmlDoc.selectSingleNode('Object');this.objectName=$1.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$2=this.xmlDoc.selectSingleNode('SortProperty');$3=$2.text;window.localStorage.setItem(this.objectName+'_sortPropertyStr',$3);}}this.objCollectionID=$p0.getCollectionIDByName(this.objectName);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $A=$enum1.current;this.headingList.add($A.childNodes[0].text.toString());this.propertyList.add($A.childNodes[1].text.toString());}window.localStorage.setItem(this.objectName+'_headingList',this.headingList);window.localStorage.setItem(this.objectName+'_propertyList',this.propertyList);var $4=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$4.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $5=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$5.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $6=[];$6.add($4);$6.add($5);var $7=this.table.tableOutline(this.objectName);$7.appendTo(this.get_mainElement());var $8=this.table.createSortButton(this.objectName,$3);var $9=this.table.createFilter(this.headingList,this.objectName);$('#'+this.objectName+'-summaryTable').remove();$('#'+this.objectName+'-sortDivision').remove();if($('#'+this.objectName+'-SummaryFormDiv')!=null){$('#'+this.objectName+'-SortAndFilterDiv').append($8);$9.insertAfter('#'+this.objectName+'-sortDivision');$('#'+this.objectName+'-sortDivision').click(ss.Delegate.create(this,function($p1_0){
this.table.sort($p1_0);}));$('#'+this.objectName+'-filterTextbox').keyup(ss.Delegate.create(this,function($p1_0){
this.table.applyfilter($p1_0);}));$('#'+this.objectName+'-filterTextbox').change(ss.Delegate.create(this,function($p1_0){
this.table.applyfilter($p1_0);}));$('#'+this.objectName+'-filterDDL').change(ss.Delegate.create(this,function($p1_0){
this.table.filterChange($p1_0);}));$('#'+this.objectName+'-filterContainer').click(ss.Delegate.create(this,function($p1_0){
this.table.searchDivClick($p1_0);}));$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$6,ss.Delegate.create(this,function($p1_0){
var $1_0=this.table.createTable_WithOBJ(this.headingList,this.propertyList,this.objectName,$p1_0);$('#'+this.objectName+'-SummaryTableDiv').append($1_0);$('.'+this.objectName+'-SummaryDataCol').click(ss.Delegate.create(this,function($p2_0){
this.columnClick($p2_0);}));}));}}}catch($B){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.GenericGridView.FormEvents_AfterOpenForm_GenericGridView : '+$B.message);}},updateScreen:function(){try{var $0='';var $1={};if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E).toString();}$1=JSON.parse($0);this.objectName=$1[P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4F];if($('#'+this.objectName+'-SummaryFormDiv')!=null){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.interval);P2.PS.AMEREN.CM.AmerenP2Constants.interval=0;var $2=$1[P2.PS.AMEREN.CM.P2PSAMERENCM$1.id].toString();var $3=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum1.moveNext()){var $4=$enum1.current;if($3>0&&$3<Object.getKeyCount($1)-1){var $5=null;if($('#'+this.objectName+'-'+$4+'_'+$2).children('Span')[1]!=null){$5=$('#'+this.objectName+'-'+$4+'_'+$2).children('Span')[1];}$('#'+$5.id).text($1[$4]);}$3++;}window.localStorage.removeItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E);}else{if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create(this,this.updateScreen),1000);}}}catch($6){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.GenericGridView.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$6.message);}},columnClick:function(e){try{var $0=parseInt(e.target.id.split('_')[1]);var $1=e.target.id.toString().split('-')[0];var $2={};$2[P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4F]=$1;var $3=$('#'+$1+'-row'+$0);$('span',$3).each(function($p1_0,$p1_1){
if(!$p1_1.id.indexOf($1+'-Data')){var $1_0=$('#'+$p1_1.id).parent();var $1_1=$1_0.attr('name');var $1_2=$1_1.split('-')[1].split('_')[0];var $1_3='';if($('#'+$p1_1.id).text()!=null){$1_3=$('#'+$p1_1.id).text().toString();}$2[$1_2]=$1_3;}});$2[P2.PS.AMEREN.CM.P2PSAMERENCM$1.id]=$0.toString();var $4=JSON.stringify($2);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E,$4);var $5=$('#'+this.objectName+'-SummaryDataCol_'+$0).attr('Key');this.controllerServices.openFormByKey(this.objCollectionID,parseInt($5),false,null);}catch($6){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.GenericGridView.ColumnClick : '+$6.message);}}}
P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation=function(){this.objName='';this.$3_0={};P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation.prototype={$3_1:0,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_2));},$3_2:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.$3_1){var $0=$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();var $1=$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString();var $2=Date.get_now();$p0.setSharedData($0,$2.toString());var $3=$p0.getCollectionNameByID(this.$3_1);var $4=null;$4=this.controllerServices.getFormServices().getOpenFormByType(this.controllerServices.getCollectionIDByName('Assignment')).get_formObject();$4.setPropertyByName(2,'DisObjectUpdateDate',$2);this.get_formObject().setPropertyByName(2,'DisObjectIdentifier',$3);$p0.commitCMObjectUpdate($4);var $5=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$3_0));while($enum1.moveNext()){var $7=$enum1.current;if($5>0&&$5<Object.getKeyCount(this.$3_0)-1){if($p1.get_formServices().getUIPropertyValueByName($7)!=null){this.$3_0[$7]=$p1.get_formServices().getUIPropertyValueByName($7).toString();}else{this.$3_0[$7]='';}}$5++;}var $6=JSON.stringify(this.$3_0);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E,$6);}}catch($8){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation.FormEvents_AfterSaveForm_GenericObjectValidation : '+$8.message);}},$3_3:function($p0,$p1,$p2,$p3,$p4){try{var $0=($p3.getDate().toString().length>1)?$p3.getDate().toString():'0'+$p3.getDate().toString();var $1=(($p3.getMonth()+1).toString().length>1)?($p3.getMonth()+1).toString():'0'+($p3.getMonth()+1).toString();var $2=($p3.getFullYear().toString().length>1)?$p3.getFullYear().toString():'0'+$p3.getFullYear().toString();var $3=($p3.getHours().toString().length>1)?$p3.getHours().toString():'0'+$p3.getHours().toString();var $4=($p3.getMinutes().toString().length>1)?$p3.getMinutes().toString():'0'+$p3.getMinutes().toString();var $5=($p3.getSeconds().toString().length>1)?$p3.getSeconds().toString():'0'+$p3.getSeconds().toString();var $6=$2+'-'+$1+'-'+$0+'T'+$3+':'+$4+':'+$5;var $7='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>UpdateOrCreate</Action>'+'<Object>'+'<Task>'+'<CallID>'+$p1+'</CallID>'+'<Number>'+$p2+'</Number>'+'<DisObjectUpdateDate>'+$6+'</DisObjectUpdateDate>'+'<DisObjectIdentifier>'+$p4+'</DisObjectIdentifier>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';$p0.sendWrappedCustomSXP($7);}catch($8){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation.SetTaskProperty : '+$8.message);}},$3_4:function($p0,$p1){try{if(this.get_formObject().get_objectType()===$p1.get_formObject().get_objectType()){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_2));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_5));var $0=new P2.PS.AMEREN.CM.CustomPanels.GenericGridView();if(this.get_canCloseForm()){if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create($0,$0.updateScreen),1000);}}W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_4));}}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation.FormEvents_AfterCloseForm_GenericObjectValidation : '+$1.message);}},$3_5:function($p0,$p1){try{var $0='';if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E).toString();}this.$3_0=JSON.parse($0);if(Object.keyExists(this.$3_0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4F)){this.objName=this.$3_0[P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4F];this.$3_1=$p0.getCollectionIDByName(this.objName);}}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation.FormEvents_AfterOpenForm_GenericObjectValidation : '+$1.message);}}}
P2.PS.AMEREN.CM.CustomPanels.LoadCompletionForm=function(){this.$3_1=new Array(2);this.$3_4='';this.$3_5='';this.$3_6='';P2.PS.AMEREN.CM.CustomPanels.LoadCompletionForm.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.LoadCompletionForm.prototype={$3_0:false,$3_2:'FollowUpWork',$3_3:false,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterTabChanged(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_7));},$3_7:function($p0,$p1){if($p1.get_formObject().get_objectType()===this.get_formObject().get_objectType()){$p0.setSharedData('SID_IS_FOLLOWUP_COMPFORM_LOADED','false');W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterTabChanged(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_7));}},$3_8:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)){this.$3_4=(ss.isNullOrUndefined($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWType')))?'':$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWType').toString();var $0=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);$p0.getDictionaryItemsFilterByName($0,this.$3_4,1800,ss.Delegate.create(this,function($p1_0){
var $1_0=ss.parseXml($p1_0.get_item(0).get_body());this.$3_5=$1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;var $1_1=(ss.isNullOrUndefined($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWState')))?'':$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWState').toString();if(!!this.$3_5){var $1_2=this.$3_5.split(',');if($1_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){this.$3_6=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_2[0]+'.html';}else if($1_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){this.$3_6=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_2[1]+'.html';}else{this.$3_6=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_2[0]+'.html';}}this.loadCompletionForms(this.$3_6);this.$3_0=false;$p0.setSharedData('SID_IS_FOLLOWUP_COMPFORM_LOADED','true');}));}}catch($1){$p0.errorLog('Exception from CreateAndCompleteTask,FormEvents_AfterOpenForm,Message '+$1.message);}},$3_9:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)){var $0=this.get_formServices().getUIPropertyValueByName('IsWorkRequest');if(!$0||!this.$3_3){this.$3_1=CaptureCompletionJSON('');if(this.$3_1[0].toString()==='true'){var $1='';if(this.$3_1[1].toString()!=null){$1=this.$3_1[1];this.$3_1[1]=$1;}$p1.get_formServices().setUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'CompletionFormValid',this.$3_1[0]);$p1.get_formServices().setUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'CompletionOutput',this.$3_1[1]);this.$3_3=true;}}}}catch($2){$p0.errorLog('Exception from CreateAndCompleteTask,FormEvents_BeforeSaveForm,Message '+$2.message);}},$3_A:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)){var $0=this.get_formServices().getUIPropertyValueByName('IsWorkRequest');if(!$0){if($p1.get_propertyName()==='FUWType'){this.$3_1=new Array(2);this.$3_3=false;}}}}catch($1){$p0.errorLog('Exception from CreateAndCompleteTask,FormEvents_AfterPropertyChanged,Message '+$1.message);}},$3_B:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)){var $0='';var $1=this.get_formServices().getUIPropertyValueByName('IsWorkRequest');if(!$1){if(!this.$3_0&&$p1.selectedTabIndex!==5){this.$3_1=CaptureCompletionJSON('');this.$3_3=false;}if($p1.selectedTabIndex===5){this.$3_4=(ss.isNullOrUndefined($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWType')))?'':$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWType').toString();var $2=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);$p0.getDictionaryItemsFilterByName($2,this.$3_4,1800,ss.Delegate.create(this,function($p1_0){
var $1_0=ss.parseXml($p1_0.get_item(0).get_body());this.$3_5=$1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;var $1_1=(ss.isNullOrUndefined($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWState')))?'':$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'FUWState').toString();if(!!this.$3_5){var $1_2=this.$3_5.split(',');if($1_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){this.$3_6=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_2[0]+'.html';}else if($1_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){this.$3_6=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_2[1]+'.html';}else{this.$3_6=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_2[0]+'.html';}}if(String.isNullOrEmpty(this.$3_4)){this.loadCompletionForms('None');}else{if($p0.getSharedData('SID_IS_FOLLOWUP_COMPFORM_LOADED')!=null){var $1_3=$p0.getSharedData('SID_IS_FOLLOWUP_COMPFORM_LOADED').toString();if($1_3!=='true'){this.loadCompletionForms(this.$3_6);this.$3_0=false;$p0.setSharedData('SID_IS_FOLLOWUP_COMPFORM_LOADED','true');}}this.$3_1[1]=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_2),'CompletionOutput').toString();if(!String.isNullOrEmpty(this.$3_1[1])){$0=this.$3_1[1];if(this.$3_1[1].toString()!=null){$0=this.$3_1[1];this.$3_1[1]=$0;}if((this.$3_4.indexOf('XFMR')>-1||this.$3_4.indexOf('BRKR')>-1||this.$3_4.indexOf('SWGR')>-1||this.$3_4.indexOf('BREAKER')>-1||this.$3_4.indexOf('TRANSFORMER')>-1||this.$3_4.indexOf('SWITCHGEAR')>-1)&&this.$3_4.indexOf('MOBILE_SWITCHGEAR')===-1&&this.$3_4.indexOf('MOBILE XFMR')===-1){PopulateCompletionForm($0, 1);}else if(this.$3_4.indexOf('HV TESTING')>-1||this.$3_4==='SUB-ADD_ALL EQUIPMENT TYPES-MIN_MO COMMISSIONING'){loadComCompletionForms($0);PopulateCompletionForm($0, 0, 1);}else{PopulateCompletionForm($0);}}}}));}}PopulateCompletionForm($0);}}catch($3){$p0.errorLog('Exception from CreateAndCompleteTask,FormEvents_AfterTabChanged,Message '+$3.message);}},$3_C:function($p0){var $0=($p0.get_formObject().getPropertyByName(2,'LocationDescription')==null)?'':$p0.get_formObject().getPropertyByName(2,'LocationDescription').toString();var $1=($p0.get_formObject().getPropertyByName(2,'SubstationName')==null)?'':$p0.get_formObject().getPropertyByName(2,'SubstationName').toString();var $2=($p0.get_formObject().getPropertyByName(2,'CircuitNumber')==null)?'':$p0.get_formObject().getPropertyByName(2,'CircuitNumber').toString();if($('#substation').length>0){$('#substation').val($1);}if($('#location').length>0){$('#location').val($0);}if($('#circuitnumber').length>0){$('#circuitnumber').val($2);}},$3_D:function($p0){var $0=$p0.target.id;var $1=$('#'+$0).val();var $2=$('#'+$0).parent().parent().parent().find("tr[class^='ctsection - ']");var $3=$2.find('input.instResp_Row2').val();$2.each(function($p1_0,$p1_1){
var $1_0=$p1_1.getAttribute('class').toString().substr(-1);var $1_1=$3;var $1_2=$('#'+$p1_1.id).find('td.cola02 div').toString();var $1_3=parseInt($1_0)+1;if($1_3<=5){$($1_2).html($1_1+'1-'+$1_1+$1_3.toString());}});},registerChangeEventsOnCompletionForm:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=0;var $0=$('[id^=OverrideInitials]');var $1=$('[class^=initials]');var $2;$2=$('[onclick^=initialsCheckBoxClicked]');var $3=$('.doc-info');var $4=$('div:contains(No Completion Form Required)');var $5=$('div:contains(Error in loading Completion Form)');if(($0.length>0||$1.length>0||$2.length>0||$3.length>0)&&(!$4.length&&!$5.length)){$('input.instResp_Row2').change(ss.Delegate.create(this,this.$3_D));eval($('#var-setter').text());$('[onclick^=initialsCheckBoxClicked]').prop('disabled',true);for(var $6=0;$6<$1.length;$6++){validateInitial($1[$6].id);}for(var $7=0;$7<$2.length;$7++){initialsCheckBoxClicked($2[$7].id);}initialsCheckboxValidation($0);createDefaultMinMaxJson();$('.formData').children().find('input').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('select').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('textarea').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));changeDetector();}else if($4.length>0||$5.length>0){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm);}else{P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=window.setInterval(ss.Delegate.create(this,this.registerChangeEventsOnCompletionForm),5000);}},initiateInputChangeEventListener:function(e){changeDetector();validateAndAssignMinMax();var $0=$('[class^=initials]');var $1;$1=$('[onclick^=initialsCheckBoxClicked]');for(var $2=0;$2<$0.length;$2++){validateInitial($0[$2].id);}for(var $3=0;$3<$1.length;$3++){initialsCheckBoxClicked($1[$3].id);}},loadCompletionForms:function(formName){if(formName==='None'){$('#completionformContainer').text('No Completion Form Required');}var $0=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod);var $1=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App);var $2='';if($0){$2='cdvfile://localhost/persitent/SO/api/Content/'+formName+'/';}else{$2='/SO/api/Content/'+formName+'/';}var $3='';$.ajax({url:$2,type:'POST',data:$3,contentType:'text/html',success:function($p1_0,$p1_1,$p1_2){
$('#completionformContainer').append('<div>'+$p1_2.responseText+'</div>');},error:function($p1_0,$p1_1,$p1_2){
}});}}
P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations=function(){this.rowId='';P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.prototype={relayCollectionID:0,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_2));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_0));},$3_0:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.relayCollectionID){var $0=$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();var $1=$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString();var $2=Date.get_now();$p0.setSharedData($0,$2.toString());var $3=null;$3=this.controllerServices.getFormServices().getOpenFormByType(this.controllerServices.getCollectionIDByName('Assignment')).get_formObject();$3.setPropertyByName(2,'DisObjectUpdateDate',$2);this.get_formObject().setPropertyByName(2,'DisObjectIdentifier',P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);$p0.commitCMObjectUpdate($3);var $4='';var $5='';var $6='';if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29)!=null){$5=$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29).toString();}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37)!=null){$6=$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37).toString();}var $7=[];$7.add($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).toString());$7.add($5);$7.add(this.rowId);$7.add($6);$7.add(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);var $8=JSON.stringify($7);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,$8);}}catch($9){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.FormEvents_AfterSaveForm_RelayObject : '+$9.message);}},$3_1:function($p0,$p1,$p2,$p3,$p4){try{var $0=($p3.getDate().toString().length>1)?$p3.getDate().toString():'0'+$p3.getDate().toString();var $1=(($p3.getMonth()+1).toString().length>1)?($p3.getMonth()+1).toString():'0'+($p3.getMonth()+1).toString();var $2=($p3.getFullYear().toString().length>1)?$p3.getFullYear().toString():'0'+$p3.getFullYear().toString();var $3=($p3.getHours().toString().length>1)?$p3.getHours().toString():'0'+$p3.getHours().toString();var $4=($p3.getMinutes().toString().length>1)?$p3.getMinutes().toString():'0'+$p3.getMinutes().toString();var $5=($p3.getSeconds().toString().length>1)?$p3.getSeconds().toString():'0'+$p3.getSeconds().toString();var $6=$2+'-'+$1+'-'+$0+'T'+$3+':'+$4+':'+$5;var $7='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>UpdateOrCreate</Action>'+'<Object>'+'<Task>'+'<CallID>'+$p1+'</CallID>'+'<Number>'+$p2+'</Number>'+'<DisObjectUpdateDate>'+$p3+'</DisObjectUpdateDate>'+'<DisObjectIdentifier>'+$p4+'</DisObjectIdentifier>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';$p0.sendWrappedCustomSXP($7);}catch($8){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.FormEvents_AfterSaveForm_RelayObject : '+$8.message);}},$3_2:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.relayCollectionID){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_0));var $0=new P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation();if(this.get_canCloseForm()){if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create($0,$0.updateScreenData),1000);}}W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_2));}}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.FormEvents_AfterCloseForm_RelayObject : '+$1.message);}},$3_3:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.relayCollectionID){if($p1.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29){var $0='';if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29)!=null){$0=$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29).toString();}if($0.length>=2){$p1.get_formServices().setPropertyEnabledByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,true);}else{$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,false);$p1.get_formServices().setPropertyEnabledByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,false);}}else if($p1.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D){if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D)!=null){if(!$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D)&&$p1.get_oldValue()!=null){$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,'');}}}else if($p1.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37){var $1='';if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37)!=null){if(!$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37).toString()&&!!$p1.get_oldValue().toString()){$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,'');}}}}}catch($2){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.FormEvents_AfterPropertyChanged_RelayObject : '+$2.message);}},$3_4:function($p0,$p1){try{this.relayCollectionID=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);if($p1.get_formObject().get_objectType()===this.relayCollectionID){var $0='';var $1=[];if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32).toString();}$1=JSON.parse($0);if($1[0]===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).toString()!=='true'){$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,true);}}else{if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).toString()!=='false'){$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,false);}}if($1[1]!==$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29)){$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$1[1]);}this.rowId=$1[2];}}catch($2){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.FormEvents_AfterOpenForm_RelayObject : '+$2.message);}}}
P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation=function(){this.headingList=[];this.propertyList=[];P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation.prototype={$3_0:null,objectName:'',objCollectionID:0,xmlDoc:null,table:null,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_1));this.xmlDoc=ss.parseXml(this.get_customSettings());this.table=new P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable(this.get_formServices());},$3_1:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $0=$('#RelayInspection-summaryTable').attr('edited');if(P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired&&$0==='true'){$('#RelayInspection-summaryTable').attr('edited','false');var $1=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$1.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $2=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$2.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $3=[];$3.add($1);$3.add($2);var $4=false;$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$3,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)){var $1_1=$1_0.get_key().toString();var $1_2='';var $1_3='';var $1_4='';var $1_5='';var $1_6=false;var $1_7=false;var $1_8='';var $1_9='';var $1_A='';$1_4=$('.Row_'+$1_1).attr('id').toString();var $1_B=$1_4.split('-')[1].substr(3);if($('#'+this.objectName+'-checkboxField_'+$1_B).is(':checked')){$1_5=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F;$1_6=true;}else{$1_5=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3A;$1_6=false;}if($('#'+this.objectName+'-text_'+$1_B)!=null){$1_A=$('#'+this.objectName+'-text_'+$1_B).val().toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D)!=null){$1_8=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29)!=null){$1_9=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29).toString();}if($1_8!==$1_5){$1_7=true;}if($1_9!==$1_A){$1_7=true;}if($1_7){$4=true;$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,$1_6);$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$1_A);$p0.commitCMObjectUpdate($1_0);}}}try{if($4){if(!P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjectsUpdated){var $1_C=$p1.get_formObject().getPropertyByName(2,'CallID').toString();var $1_D=$p1.get_formObject().getPropertyByName(2,'Number').toString();var $1_E=Date.get_now().toString();var $1_F=Date.get_now();$p0.setSharedData($1_C,$1_F.toString());var $1_10=($1_F.getDate().toString().length>1)?$1_F.getDate().toString():'0'+$1_F.getDate().toString();var $1_11=(($1_F.getMonth()+1).toString().length>1)?($1_F.getMonth()+1).toString():'0'+($1_F.getMonth()+1).toString();var $1_12=($1_F.getFullYear().toString().length>1)?$1_F.getFullYear().toString():'0'+$1_F.getFullYear().toString();var $1_13=($1_F.getHours().toString().length>1)?$1_F.getHours().toString():'0'+$1_F.getHours().toString();var $1_14=($1_F.getMinutes().toString().length>1)?$1_F.getMinutes().toString():'0'+$1_F.getMinutes().toString();var $1_15=($1_F.getSeconds().toString().length>1)?$1_F.getSeconds().toString():'0'+$1_F.getSeconds().toString();var $1_16=$1_12+'-'+$1_11+'-'+$1_10+'T'+$1_13+':'+$1_14+':'+$1_15;$p0.setSharedData($1_C,$1_F.toString());this.get_formObject().setPropertyByName(2,'DisObjectUpdateDate',$1_F);this.get_formObject().setPropertyByName(2,'DisObjectIdentifier','SubTask');$p0.commitCMObjectUpdate(this.get_formObject());P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjectsUpdated=true;}}}catch($1_17){$p0.errorLog($1_17.message);}}));}}}catch($5){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation.FormEvents_BeforeSaveForm_RelaySummaryTable : '+$5.message);}},$3_2:function($p0,$p1,$p2,$p3,$p4){var $0='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>Update</Action>'+'<Object>'+'<Task>'+'<CallID>'+$p2+'</CallID>'+'<Number>'+$p3+'</Number>'+'<DisObjectUpdateDate>'+$p1+'</DisObjectUpdateDate>'+'<DisObjectIdentifier>'+$p4+'</DisObjectIdentifier>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';$p0.sendWrappedCustomSXP($0);},$3_3:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_1));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_3));}},$3_4:function($p0,$p1){try{var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){P2.PS.AMEREN.CM.AmerenP2Constants.taskType=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60).toString();this.objCollectionID=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);var $1=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$1.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $2=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$2.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $3=[];$3.add($1);$3.add($2);$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$3,ss.Delegate.create(this,function($p1_0){
P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired=true;window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,'');this.$3_0=$p0;var $1_0=null;var $1_1=null;var $1_2=null;var $1_3='';if(this.xmlDoc!=null){$1_0=this.xmlDoc.selectNodes('Field');$1_1=this.xmlDoc.selectSingleNode('Object');this.objectName=$1_1.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$1_2=this.xmlDoc.selectSingleNode('SortProperty');$1_3=$1_2.text;window.localStorage.setItem(this.objectName+'_sortPropertyStr',$1_3);}}this.objCollectionID=$p0.getCollectionIDByName(this.objectName);var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_7=$enum1.current;this.headingList.add($1_7.childNodes[0].text.toString());this.propertyList.add($1_7.childNodes[1].text.toString());}window.localStorage.setItem(this.objectName+'_headingList',this.headingList);window.localStorage.setItem(this.objectName+'_propertyList',this.propertyList);var $1_4=this.table.tableOutline(this.objectName);$1_4.appendTo(this.get_mainElement());var $1_5=this.table.createSortButton(this.objectName,$1_3);var $1_6=this.table.createFilter(this.headingList,this.objectName);$('#'+this.objectName+'-summaryTable').remove();$('#'+this.objectName+'-sortDivision').remove();if($('#'+this.objectName+'-SummaryFormDiv')!=null){$('#'+this.objectName+'-SortAndFilterDiv').append($1_5);$1_6.insertAfter('#'+this.objectName+'-sortDivision');$('#'+this.objectName+'-sortDivision').click(ss.Delegate.create(this,function($p2_0){
this.table.sortWithThreeAtrr($p2_0);}));$('#'+this.objectName+'-filterTextbox').keyup(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterTextbox').change(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterDDL').change(ss.Delegate.create(this,function($p2_0){
this.table.filterChange($p2_0);}));$('#'+this.objectName+'-filterContainer').click(ss.Delegate.create(this,function($p2_0){
this.table.searchDivClick($p2_0);}));var $1_8=this.table.createTableWithCheckBox_WithOBJ(this.headingList,this.propertyList,this.objectName,$p1_0);$('#'+this.objectName+'-SummaryTableDiv').append($1_8);$('.'+this.objectName+'-checkbox').change(ss.Delegate.create(this,function($p2_0){
this.table.checkBoxClick($p2_0);}));$('.'+this.objectName+'-text').keyup(ss.Delegate.create(this,function($p2_0){
this.table.textBoxChange($p2_0);}));$('.'+this.objectName+'-text').change(ss.Delegate.create(this,function($p2_0){
this.table.textBoxChange($p2_0);}));$('.'+this.objectName+'-SummaryDataCol').click(ss.Delegate.create(this,function($p2_0){
this.columnClick($p2_0);}));}if((!$p1_0.get_count())){P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired=false;var $1_9=0;var $1_A=$p1.get_formServices().getTabTitles();for(var $1_B=0;$1_B<$1_A.length;$1_B++){if($1_A[$1_B]===P2.PS.AMEREN.CM.AmerenP2Constants.relayTabHeading){$1_9=$1_B;$p1.get_formServices().setTabVisibility($1_9,false);break;}}}}));}}catch($4){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation.FormEvents_AfterOpenForm_RelaySummaryTable : '+$4.message);}},columnClick:function(e){try{var $0=parseInt(e.target.id.split('_')[1]);var $1='';var $2='';if($('#'+this.objectName+'-checkboxField_'+$0).is(':checked')){$1=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F;}else{$1=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3A;}if($('#'+this.objectName+'-text_'+$0)!=null){$2=$('#'+this.objectName+'-text_'+$0).val().toString();}var $3='';if($('#'+this.objectName+'-Data-Remarks_'+$0).text()!=null){$3=$('#'+this.objectName+'-Data-Remarks_'+$0).text().toString();}var $4=$('#'+this.objectName+'-SummaryDataCol_'+$0).attr('Key');var $5=[];$5.add($1);$5.add($2);$5.add($0.toString());$5.add($3);$5.add(this.objectName);var $6=JSON.stringify($5);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,$6);this.controllerServices.openFormByKey(this.objCollectionID,parseInt($4),false,null);}catch($7){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation.ColumnClick : '+$7.message);}},updateScreenData:function(){try{var $0='';var $1=[];var $2='';if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32).toString();}$1=JSON.parse($0);this.objectName=$1[4];if($('#'+this.objectName+'-SummaryFormDiv')!=null){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.interval);P2.PS.AMEREN.CM.AmerenP2Constants.interval=0;$('#'+this.objectName+'-text_'+$1[2]).val($1[1].toString());$2=$1[3];$('#'+this.objectName+'-Data-Remarks_'+$1[2]).text($2);if($1[0]===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('checked',true);if(!($2.length>=1&&$1[1].length>=2)){$('#'+this.objectName+'-row'+$1[2]).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.completeColor);$('#'+this.objectName+'-row'+$1[2]).attr('status','Complete');}}else{$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('checked',false);$('#'+this.objectName+'-row'+$1[2]).removeAttr('bgcolor');$('#'+this.objectName+'-row'+$1[2]).attr('status','');}if($2.length>=1&&$1[1].length>=2){$('#'+this.objectName+'-row'+$1[2]).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.remarkColor);$('#'+this.objectName+'-row'+$1[2]).attr('status','Complete');}if($1[1].length>=2){$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('disabled',false);}else if($1[1].length<2){$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('disabled',true);}window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,'');}else{if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create(this,this.updateScreenData),1000);}}}catch($3){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation.UpdateScreenData : '+$3.message);}}}
P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor=function(){this.headingList=[];this.propertyList=[];P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.prototype={$3_0:null,objectName:'',objCollectionID:0,xmlDoc:null,table:null,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_2));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_1));this.xmlDoc=ss.parseXml(this.get_customSettings());this.table=new P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable(this.get_formServices());},$3_1:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){if(P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired){var $0=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$0.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $1=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$1.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $2=[];$2.add($0);$2.add($1);$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$2,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)){var $1_1=$1_0.get_key().toString();var $1_2='';var $1_3='';var $1_4='';var $1_5='';var $1_6=false;var $1_7=false;var $1_8='';var $1_9='';var $1_A='';$1_4=$('.Row_'+$1_1).attr('id').toString();var $1_B=$1_4.split('-')[1].substr(3);if($('#'+this.objectName+'-checkboxField_'+$1_B).is(':checked')){$1_5=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F;$1_6=true;}else{$1_5=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3A;$1_6=false;}if($('#'+this.objectName+'-text_'+$1_B)!=null){$1_A=$('#'+this.objectName+'-text_'+$1_B).val().toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D)!=null){$1_8=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29)!=null){$1_9=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29).toString();}if($1_8!==$1_5){$1_7=true;}if($1_9!==$1_A){$1_7=true;}if($1_7){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,$1_6);$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$1_A);$p0.commitCMObjectUpdate($1_0);}}}}));}}}catch($3){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$3.message);}},$3_2:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_1));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_2));}},$3_3:function($p0,$p1){try{var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){P2.PS.AMEREN.CM.AmerenP2Constants.taskType=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60).toString();this.objCollectionID=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);var $1=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$1.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $2=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$2.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $3=[];$3.add($1);$3.add($2);$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$3,ss.Delegate.create(this,function($p1_0){
P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired=true;window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,'');this.$3_0=$p0;var $1_0=null;var $1_1=null;var $1_2=null;var $1_3='';if(this.xmlDoc!=null){$1_0=this.xmlDoc.selectNodes('Field');$1_1=this.xmlDoc.selectSingleNode('Object');this.objectName=$1_1.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$1_2=this.xmlDoc.selectSingleNode('SortProperty');$1_3=$1_2.text;}}this.objCollectionID=$p0.getCollectionIDByName(this.objectName);var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_7=$enum1.current;this.headingList.add($1_7.childNodes[0].text.toString());this.propertyList.add($1_7.childNodes[1].text.toString());}var $1_4=this.table.tableOutline(this.objectName);$1_4.appendTo(this.get_mainElement());var $1_5=this.table.createSortButton(this.objectName,$1_3);var $1_6=this.table.createFilter(this.headingList,this.objectName);$('#'+this.objectName+'-summaryTable').remove();$('#'+this.objectName+'-sortDivision').remove();if($('#'+this.objectName+'-SummaryFormDiv')!=null){$('#'+this.objectName+'-SortAndFilterDiv').append($1_5);$1_6.insertAfter('#'+this.objectName+'-sortDivision');$('#'+this.objectName+'-sortDivision').click(ss.Delegate.create(this,function($p2_0){
this.table.sortWithThreeAtrr($p2_0);}));$('#'+this.objectName+'-filterTextbox').keyup(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterTextbox').change(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterDDL').change(ss.Delegate.create(this,function($p2_0){
this.table.filterChange($p2_0);}));$('#'+this.objectName+'-filterContainer').click(ss.Delegate.create(this,function($p2_0){
this.table.searchDivClick($p2_0);}));var $1_8=this.table.createTableWithCheckBox_WithOBJ(this.headingList,this.propertyList,this.objectName,$p1_0);$('#'+this.objectName+'-SummaryTableDiv').append($1_8);$('.'+this.objectName+'-checkbox').change(ss.Delegate.create(this,function($p2_0){
this.table.checkBoxClick($p2_0);}));$('.'+this.objectName+'-text').keyup(ss.Delegate.create(this,function($p2_0){
this.table.textBoxChange($p2_0);}));$('.'+this.objectName+'-SummaryDataCol').click(ss.Delegate.create(this,function($p2_0){
this.columnClick($p2_0);}));}if(!$p1_0.get_count()){P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired=false;var $1_9=$p1.get_formServices().getTabTitles();for(var $1_A=0;$1_A<$1_9.length;$1_A++){if($1_9[$1_A]===P2.PS.AMEREN.CM.AmerenP2Constants.relayTabHeading){$p1.get_formServices().setTabVisibility($1_A,false);break;}}}}));}}catch($4){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_AfterOpenForm_RelaySummaryTable_Supervisor : '+$4.message);}},columnClick:function(e){try{var $0=parseInt(e.target.id.split('_')[1]);var $1='';var $2='';if($('#'+this.objectName+'-checkboxField_'+$0).is(':checked')){$1=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F;}else{$1=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3A;}if($('#'+this.objectName+'-text_'+$0)!=null){$2=$('#'+this.objectName+'-text_'+$0).val().toString();}var $3='';if($('#'+this.objectName+'-Data-Remarks_'+$0).text()!=null){$3=$('#'+this.objectName+'-Data-Remarks_'+$0).text().toString();}var $4=$('#'+this.objectName+'-SummaryDataCol_'+$0).attr('Key');var $5=[];$5.add($1);$5.add($2);$5.add($0.toString());$5.add($3);$5.add(this.objectName);var $6=JSON.stringify($5);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,$6);this.controllerServices.openFormByKey(this.objCollectionID,parseInt($4),false,null);}catch($7){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.ColumnClick : '+$7.message);}},updateScreenData:function(){try{var $0='';var $1=[];var $2='';if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32).toString();}$1=JSON.parse($0);this.objectName=$1[4];if($('#'+this.objectName+'-SummaryFormDiv')!=null){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.interval);P2.PS.AMEREN.CM.AmerenP2Constants.interval=0;$('#'+this.objectName+'-text_'+$1[2]).val($1[1].toString());$2=$1[3];$('#'+this.objectName+'-Data-Remarks_'+$1[2]).text($2);if($1[0]===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('checked',true);if(!($2.length>=1&&$1[1].length>=2)){$('#'+this.objectName+'-row'+$1[2]).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.completeColor);}}else{$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('checked',false);$('#'+this.objectName+'-row'+$1[2]).removeAttr('bgcolor');}if($2.length>=1&&$1[1].length>=2){$('#'+this.objectName+'-row'+$1[2]).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.remarkColor);}if($1[1].length>=2){$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('disabled',false);}else if($1[1].length<2){$('#'+this.objectName+'-checkboxField_'+$1[2]).prop('disabled',true);}window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,'');}else{if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create(this,this.updateScreenData),1000);}}}catch($3){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$3.message);}}}
P2.PS.AMEREN.CM.CustomPanels.ReloadTaskData=function(){this.$3_2='';P2.PS.AMEREN.CM.CustomPanels.ReloadTaskData.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.ReloadTaskData.prototype={objID:0,$3_0:'',$3_1:0,$3_3:null,init:function(){var $0=null;var $1=ss.parseXml(this.get_customSettings());var $2=$1.selectSingleNode('//CMCustomUI/CMButton/DivTitleButton').text;this.$3_2=$1.selectSingleNode('//CMCustomUI/CMButton/ButtonId').text;var $3=$1.selectSingleNode('//CMCustomUI/CMButton/Text').text;$0=$('<div id='+$2+' " style="margin-top: 5px;font-size:15px;display: block;height:auto;"><button type="button" name="btnID" id="'+this.$3_2+'" class="button1" style="height:auto;" >'+$3+'</button></div>');$0.appendTo(this.get_mainElement());$0.click(ss.Delegate.create(this,this.$3_4));this.$3_3=this.controllerServices;},$3_4:function($p0){try{if($p0.target.id===this.$3_2){var $0=this.$3_6(Date.get_today(),-2000000000);var $1=this.$3_6(Date.get_today(),2000000000);this.controllerServices.getTodaySchedule($0,$1,ss.Delegate.create(this,this.getAllAssignments));}}catch($2){this.$3_3.errorLog('The exception message is: '+$2.message);}},getAllAssignments:function(lstAssignments){try{if(lstAssignments.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $0=$enum1.current;$0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60).toString();var $1=(ss.isNullOrUndefined($0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)))?'':$0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();var $2=(ss.isNullOrUndefined($0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)))?'':$0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString();if($1===P2.PS.AMEREN.CM.AmerenP2Constants.callid&&$2===P2.PS.AMEREN.CM.AmerenP2Constants.number.toString()){var $enum2=ss.IEnumerator.getEnumerator(Object.keys(P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects));while($enum2.moveNext()){var $3=$enum2.current;if(!ss.isNullOrUndefined($3)){this.$3_5($0,$1,$2,$3);}}}}}this.controllerServices.externalMaskOff();}catch($4){}},$3_5:function($p0,$p1,$p2,$p3){this.controllerServices.infoLog('From TriggerSxpToGetDisconnectedObjects');var $0='<SXPServerGetObjects>';if($p3==='SubTask'){$0=$0+'<ObjectType>PV'+$p3+'</ObjectType>';}else{$0=$0+'<ObjectType>'+$p3+'</ObjectType>';}$0=$0+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$p2+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$p2+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';if($p3==='SubTask'){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects['PVSubTask']));while($enum1.moveNext()){var $1=$enum1.current;$0=$0+'<Item>'+$1+'</Item>';}}else{var $enum2=ss.IEnumerator.getEnumerator(Object.keys(P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects[$p3]));while($enum2.moveNext()){var $2=$enum2.current;$0=$0+'<Item>'+$2+'</Item>';}}$0=$0+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.controllerServices.sendWrappedCustomSXP($0);},$3_6:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);}}
P2.PS.AMEREN.CM.CustomPanels.SubTasksObjectValidations=function(){this.rowId='';this.status='';P2.PS.AMEREN.CM.CustomPanels.SubTasksObjectValidations.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.SubTasksObjectValidations.prototype={subTasksCollectionID:0,$3_0:false,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.formEvents_AfterSaveForm_SubTasks));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_3));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_1));},$3_1:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.subTasksCollectionID){var $0=Date.empty;var $1=Date.empty;var $2=Date.empty;var $3=false;var $4='';if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)!=null){$0=Date.parseDate($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27).toString());}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)!=null){$1=Date.parseDate($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26).toString());}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)!=null){$2=Date.parseDate($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A).toString());}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)!=null){$4=$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();}else{$4='';}if(!$3){if($4===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C){if($0>$1){$p1.cancel=true;$p0.showMessageBox('Actual Finish Date cannot Precede Actual Start Date','Error',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$3=true;return;}}}if(!$3){if(!!$4&&$4!=null&&!!$4){if($2<$0){$p1.cancel=true;$p0.showMessageBox('Estimated Finish Date cannot Precede Actual Start Date','Error',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$3=true;return;}}}}}catch($5){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksObjectValidations.FormEvents_BeforeSaveForm_SubTasks : '+$5.message);}},formEvents_AfterSaveForm_SubTasks:function(controllerServices,e){try{if(e.get_formObject().get_objectType()===this.subTasksCollectionID){var $0=e.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();var $1=e.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString();var $2=Date.get_now();controllerServices.setSharedData($0,$2.toString());var $3=null;$3=this.controllerServices.getFormServices().getOpenFormByType(this.controllerServices.getCollectionIDByName('Assignment')).get_formObject();$3.setPropertyByName(2,'DisObjectUpdateDate',$2);$3.setPropertyByName(2,'DisObjectIdentifier','SubTask');controllerServices.commitCMObjectUpdate($3);var $4=[];$4.add(e.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString());if(e.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)!=null){$4.add(e.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26).toString());}else{$4.add('');}if(e.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)!=null){$4.add(e.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27).toString());}else{$4.add('');}if(e.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)!=null){$4.add(e.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A).toString());}else{$4.add('');}$4.add(this.rowId);$4.add(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);var $5=JSON.stringify($4);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39,$5);}}catch($6){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_AfterSaveForm_SubTasks : '+$6.message);}},$3_2:function($p0,$p1,$p2,$p3,$p4){var $0=($p3.getDate().toString().length>1)?$p3.getDate().toString():'0'+$p3.getDate().toString();var $1=(($p3.getMonth()+1).toString().length>1)?($p3.getMonth()+1).toString():'0'+($p3.getMonth()+1).toString();var $2=($p3.getFullYear().toString().length>1)?$p3.getFullYear().toString():'0'+$p3.getFullYear().toString();var $3=($p3.getHours().toString().length>1)?$p3.getHours().toString():'0'+$p3.getHours().toString();var $4=($p3.getMinutes().toString().length>1)?$p3.getMinutes().toString():'0'+$p3.getMinutes().toString();var $5=($p3.getSeconds().toString().length>1)?$p3.getSeconds().toString():'0'+$p3.getSeconds().toString();var $6=$2+'-'+$1+'-'+$0+'T'+$3+':'+$4+':'+$5;var $7='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>UpdateOrCreate</Action>'+'<Object>'+'<Task>'+'<CallID>'+$p1+'</CallID>'+'<Number>'+$p2+'</Number>'+'<DisObjectUpdateDate>'+$6+'</DisObjectUpdateDate>'+'<DisObjectIdentifier>'+$p4+'</DisObjectIdentifier>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';$p0.sendWrappedCustomSXP($7);},$3_3:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.subTasksCollectionID){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.formEvents_AfterSaveForm_SubTasks));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_1));var $0=new P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation();if(this.get_canCloseForm()){if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create($0,$0.updateScreenData),1000);}}W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_3));}}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_AfterCloseForm_SubTasks : '+$1.message);}},$3_4:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.subTasksCollectionID){if(this.$3_0){if($p1.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C){if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,Date.get_now());if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)==null){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,Date.get_now());$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,Date.get_now());}$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C);}else if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3A){$("[objname='W6CMPropPanelDate[ActualFinishDate:date]'] .W6CMPropPanel_Date").val('');$("[objname='W6CMPropPanelDate[ActualFinishDate:date]'] .W6CMPropPanel_Time").val('');$("[objname='W6CMPropPanelDate[ActualStartDate:date]'] .W6CMPropPanel_Date").val('');$("[objname='W6CMPropPanelDate[ActualStartDate:date]'] .W6CMPropPanel_Time").val('');$("[objname='W6CMPropPanelDate[EstimatedFinishDate:date]'] .W6CMPropPanel_Date").val('');$("[objname='W6CMPropPanelDate[EstimatedFinishDate:date]'] .W6CMPropPanel_Time").val('');$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,'');}}}}}catch($0){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_AfterPropertyChanged_SubTasks : '+$0.message);}},getDateObject:function(dateTime){try{if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){if(dateTime.indexOf('PM')>0){if(parseInt($1[3])<12){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3])+12,parseInt($1[4]),parseInt($1[5]));}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return Date.empty;}}else{return Date.empty;}}catch($2){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$2.message);return Date.empty;}},$3_5:function($p0,$p1){try{this.subTasksCollectionID=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);if($p1.get_formObject().get_objectType()===this.subTasksCollectionID){var $0='';var $1=[];if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39).toString();}$1=JSON.parse($0);if($1[0]===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C){if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()!=='true'){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,true);}}else{if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()!=='false'){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,false);}}if($1[0]!==$p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$1[0]);}if(!!$1[1]){var $2=$1[1];if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)!=null){if(Date.parseDate($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26).toString())!==this.getDateObject($2)){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($2));}}else{$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($2));}}else{if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)!=null&&!!$p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)){$("[objname='W6CMPropPanelDate[ActualFinishDate:date]'] .W6CMPropPanel_Date").val('');$("[objname='W6CMPropPanelDate[ActualFinishDate:date]'] .W6CMPropPanel_Time").val('');}}if(!!$1[2]){var $3=$1[2];if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)!=null){if(Date.parseDate($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27).toString())!==this.getDateObject($3)){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($3));}}else{$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($3));}}else{if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)!=null&&!!$p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)){$("[objname='W6CMPropPanelDate[ActualStartDate:date]'] .W6CMPropPanel_Date").val('');$("[objname='W6CMPropPanelDate[ActualStartDate:date]'] .W6CMPropPanel_Time").val('');}}if(!!$1[3]){var $4=$1[3];if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)!=null){if(Date.parseDate($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A).toString())!==this.getDateObject($4)){$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($4));}}else{$p1.get_formServices().setUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($4));}}else{if($p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)!=null&&!!$p1.get_formServices().getUIPropertyValueByNameEx(this.subTasksCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)){$("[objname='W6CMPropPanelDate[EstimatedFinishDate:date]'] .W6CMPropPanel_Date").val('');$("[objname='W6CMPropPanelDate[EstimatedFinishDate:date]'] .W6CMPropPanel_Time").val('');}}this.rowId=$1[4];this.status=$1[0];this.$3_0=true;}}catch($5){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.FormEvents_AfterOpenForm_SubTasks : '+$5.message);}}}
P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation=function(){this.headingList=[];this.propertyList=[];P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.prototype={$3_0:null,objectName:'',objCollectionID:0,xmlDoc:null,table:null,$3_1:0,$3_2:0,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_6));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterTabChanged(ss.Delegate.create(this,this.$3_5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_3));this.xmlDoc=ss.parseXml(this.get_customSettings());this.table=new P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable(this.get_formServices());},$3_3:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjectsUpdated=false;var $0=new P2.PS.AMEREN.CM.Events.AfterSaveFormTask($p0,$p1);}},$3_4:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $0=new P2.PS.AMEREN.CM.Events.AfterPropertyChangedTask($p0,$p1);}},$3_5:function($p0,$p1){try{window.localStorage.removeItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E);if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){if(P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired){if($p1.get_formServices().getSelectedTabIndex()===this.$3_2){this.$3_1=0;this.verifyPlanStartDate();this.$3_1=window.setInterval(ss.Delegate.create(this,this.verifyPlanStartDate),60000);}else{window.clearInterval(this.$3_1);}}var $0=new P2.PS.AMEREN.CM.Events.AfterTabChangedTask($p0,$p1);}}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.FormEvents_AfterTabChanged_SubTask : '+$1.message);}},verifyPlanStartDate:function(){try{var $0=$('#'+this.objectName+'-SummaryTableDiv');$('div',$0).each(ss.Delegate.create(this,function($p1_0,$p1_1){
if(!$p1_1.id.indexOf(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21+'-StartDate_')){var $1_0=$('#'+$p1_1.id).text();$1_0=$1_0.substr($1_0.indexOf(':')+2).trim();var $1_1=this.getDateObject($1_0.trim());var $1_2=parseInt($p1_1.id.split('_')[1].toString());var $1_3=$('#'+this.objectName+'-Data-Status_'+$1_2).text();if(!$1_3){if(Date.get_now()>$1_1){$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$20+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1F+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1E+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1D+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5D+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5C+$1_2).css('color','red');}else{$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$20+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1F+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1E+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1D+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5D+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5C+$1_2).css('color','black');}}}}));}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.verifyPlanStartDate : '+$1.message);}},getDateObject:function(dateTime){try{if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){if(dateTime.indexOf('PM')>0){if(parseInt($1[3])<12){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3])+12,parseInt($1[4]),parseInt($1[5]));}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return Date.empty;}}else{return Date.empty;}}catch($2){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$2.message);return Date.empty;}},$3_6:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $0=new P2.PS.AMEREN.CM.Events.BeforeSaveFormTask($p0,$p1);var $1=$('#PVSubTask-summaryTable').attr('edited');if(P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired&&$1==='true'){$('#PVSubTask-summaryTable').attr('edited','false');var $2=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$2.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $3=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$3.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $4=[];$4.add($2);$4.add($3);var $5=false;$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$4,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)){var $1_1=$1_0.get_key().toString();var $1_2='';var $1_3='';var $1_4='';var $1_5='';var $1_6='';var $1_7='';var $1_8=false;var $1_9='';var $1_A='';var $1_B='';var $1_C='';var $1_D;$1_4=$('.Row_'+$1_1).attr('id').toString();var $1_E=$1_4.split('-')[1].substr(3);if($('#'+this.objectName+'-Data-Status_'+$1_E)!=null){$1_2=$('#'+this.objectName+'-Data-Status_'+$1_E).text().toString();}if($('#'+this.objectName+'-Data-ActualFinishDateTime_'+$1_E)!=null){$1_5=$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$1_E).text().toString();}if($('#'+this.objectName+'-Data-ActualStartDateTime_'+$1_E)!=null){$1_7=$('#'+this.objectName+'-Data-ActualStartDateTime_'+$1_E).text().toString();}if($('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$1_E)!=null){$1_6=$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$1_E).text().toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)!=null){$1_9=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)!=null){$1_D=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26);$1_A=$1_D.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)!=null){$1_D=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27);$1_C=$1_D.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)!=null){$1_D=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A);$1_B=$1_D.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}if($1_2!==$1_9){$1_8=true;}if($1_5!==$1_A){$1_8=true;}if($1_7!==$1_C){$1_8=true;}if($1_6!==$1_B){$1_8=true;}if($1_8){$5=true;$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$1_2);if(!String.isNullOrEmpty($1_5)){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($1_5));}else{$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,Date.empty);}if(!String.isNullOrEmpty($1_7)){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($1_7));}else{$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,Date.empty);}if(!String.isNullOrEmpty($1_6)){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($1_6));}else{$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,Date.empty);}if($1_2===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C&&$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3A){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,true);}if($1_2!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C&&$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,false);}$p0.commitCMObjectUpdate($1_0);}}}try{if($5){if(!P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjectsUpdated){var $1_F=$p1.get_formObject().getPropertyByName(2,'CallID').toString();var $1_10=$p1.get_formObject().getPropertyByName(2,'Number').toString();var $1_11=Date.get_now().toString();var $1_12=Date.get_now();$p0.setSharedData($1_F,$1_12.toString());var $1_13=($1_12.getDate().toString().length>1)?$1_12.getDate().toString():'0'+$1_12.getDate().toString();var $1_14=(($1_12.getMonth()+1).toString().length>1)?($1_12.getMonth()+1).toString():'0'+($1_12.getMonth()+1).toString();var $1_15=($1_12.getFullYear().toString().length>1)?$1_12.getFullYear().toString():'0'+$1_12.getFullYear().toString();var $1_16=($1_12.getHours().toString().length>1)?$1_12.getHours().toString():'0'+$1_12.getHours().toString();var $1_17=($1_12.getMinutes().toString().length>1)?$1_12.getMinutes().toString():'0'+$1_12.getMinutes().toString();var $1_18=($1_12.getSeconds().toString().length>1)?$1_12.getSeconds().toString():'0'+$1_12.getSeconds().toString();var $1_19=$1_15+'-'+$1_14+'-'+$1_13+'T'+$1_16+':'+$1_17+':'+$1_18;this.get_formObject().setPropertyByName(2,'DisObjectUpdateDate',$1_12);this.get_formObject().setPropertyByName(2,'DisObjectIdentifier','SubTask');$p0.commitCMObjectUpdate(this.get_formObject());P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjectsUpdated=true;}}}catch($1_1A){$p0.errorLog($1_1A.message);}}));}}}catch($6){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.FormEvents_BeforeSaveForm_SubTask : '+$6.message);}},$3_7:function($p0,$p1,$p2,$p3,$p4){var $0='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>Update</Action>'+'<Object>'+'<Task>'+'<CallID>'+$p2+'</CallID>'+'<Number>'+$p3+'</Number>'+'<DisObjectUpdateDate>'+$p1+'</DisObjectUpdateDate>'+'<DisObjectIdentifier>'+$p4+'</DisObjectIdentifier>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';$p0.sendWrappedCustomSXP($0);},$3_8:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_6));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterTabChanged(ss.Delegate.create(this,this.$3_5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_3));window.clearInterval(this.$3_1);P2.PS.AMEREN.CM.AmerenP2Constants.formServices=null;P2.PS.AMEREN.CM.AmerenP2Constants.callid='';P2.PS.AMEREN.CM.AmerenP2Constants.number=0;P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=0;window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad=0;window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdRelay=0;window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdRelay);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm=0;window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm=0;window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm);}},createTable:function(controllerServices,callid,number){try{P2.PS.AMEREN.CM.AmerenP2Constants.callid=callid;P2.PS.AMEREN.CM.AmerenP2Constants.number=parseInt(number);var $0=null;var $1=null;var $2=null;var $3='';if(this.xmlDoc!=null){$0=this.xmlDoc.selectNodes('Field');$1=this.xmlDoc.selectSingleNode('Object');this.objectName=$1.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$2=this.xmlDoc.selectSingleNode('SortProperty');$3=$2.text;}}this.objCollectionID=this.$3_0.getCollectionIDByName(this.objectName);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $9=$enum1.current;this.headingList.add($9.childNodes[0].text.toString());this.propertyList.add($9.childNodes[1].text.toString());}var $4=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$4.initStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $5=[];$5.add($4);var $6=this.table.tableOutline(this.objectName);$6.appendTo(this.get_mainElement());var $7=this.table.createSortButton(this.objectName,$3);var $8=this.table.createFilter(this.headingList,this.objectName);$('#'+this.objectName+'-summaryTable').remove();$('#'+this.objectName+'-sortDivision').remove();if($('#'+this.objectName+'-SummaryFormDiv')!=null){$('#'+this.objectName+'-SortAndFilterDiv').append($7);$8.insertAfter('#'+this.objectName+'-sortDivision');$('#'+this.objectName+'-sortDivision').click(ss.Delegate.create(this,function($p1_0){
this.table.sortWithStartFinishCompeteButtonClick($p1_0);}));$('#'+this.objectName+'-filterTextbox').keyup(ss.Delegate.create(this,function($p1_0){
this.table.applyfilter($p1_0);}));$('#'+this.objectName+'-filterTextbox').change(ss.Delegate.create(this,function($p1_0){
this.table.applyfilter($p1_0);}));$('#'+this.objectName+'-filterDDL').change(ss.Delegate.create(this,function($p1_0){
this.table.filterChange($p1_0);}));$('#'+this.objectName+'-filterContainer').click(ss.Delegate.create(this,function($p1_0){
this.table.searchDivClick($p1_0);}));this.$3_0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$5,ss.Delegate.create(this,function($p1_0){
var $1_0=this.table.createTableWithStartFinishCompleteButtonsWithOBJ(this.headingList,this.propertyList,this.objectName,$p1_0);$('#'+this.objectName+'-SummaryTableDiv').append($1_0);$('.'+this.objectName+'_startButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'_finishButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'_completeButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'-SummaryDataCol').click(ss.Delegate.create(this,function($p2_0){
this.columnClick($p2_0);}));}));}}catch($A){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.createTable : '+$A.message);}},$3_9:function($p0,$p1){try{var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $1=new P2.PS.AMEREN.CM.Events.AfterOpenFormTask($p0,$p1);P2.PS.AMEREN.CM.AmerenP2Constants.formServices=$p1.get_formServices();this.objCollectionID=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);P2.PS.AMEREN.CM.AmerenP2Constants.taskType=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60).toString();P2.PS.AMEREN.CM.AmerenP2Constants.callid=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();P2.PS.AMEREN.CM.AmerenP2Constants.number=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);var $2=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();window.localStorage.setItem('CallID',P2.PS.AMEREN.CM.AmerenP2Constants.callid);window.localStorage.setItem('Number',P2.PS.AMEREN.CM.AmerenP2Constants.number);window.localStorage.setItem('Status',$2);var $3=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$3.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $4=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$4.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $5=[];$5.add($3);$5.add($4);var $6=null;var $7=null;var $8=null;var $9='';if(this.xmlDoc!=null){$6=this.xmlDoc.selectNodes('Field');$7=this.xmlDoc.selectSingleNode('Object');this.objectName=$7.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$8=this.xmlDoc.selectSingleNode('SortProperty');$9=$8.text;window.localStorage.setItem(this.objectName+'_sortPropertyStr',$9);}}var $enum1=ss.IEnumerator.getEnumerator($6);while($enum1.moveNext()){var $A=$enum1.current;this.headingList.add($A.childNodes[0].text.toString());this.propertyList.add($A.childNodes[1].text.toString());}window.localStorage.setItem(this.objectName+'_headingList',this.headingList);window.localStorage.setItem(this.objectName+'_propertyList',this.propertyList);$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$5,ss.Delegate.create(this,function($p1_0){
P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired=true;window.localStorage.removeItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E);var $1_0=$p1.get_formServices().getTabTitles();for(var $1_4=0;$1_4<$p1.get_formServices().getTabsCount();$1_4++){if($1_0[$1_4]===P2.PS.AMEREN.CM.AmerenP2Constants.subTabHeading){this.$3_2=$1_4;}}this.$3_0=$p0;if(this.xmlDoc!=null){$6=this.xmlDoc.selectNodes('Field');$7=this.xmlDoc.selectSingleNode('Object');this.objectName=$7.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$8=this.xmlDoc.selectSingleNode('SortProperty');$9=$8.text;window.localStorage.setItem(this.objectName+'_sortPropertyStr',$9);}}this.headingList=[];this.propertyList=[];var $enum1=ss.IEnumerator.getEnumerator($6);while($enum1.moveNext()){var $1_5=$enum1.current;this.headingList.add($1_5.childNodes[0].text.toString());this.propertyList.add($1_5.childNodes[1].text.toString());}window.localStorage.setItem(this.objectName+'_headingList',this.headingList);window.localStorage.setItem(this.objectName+'_propertyList',this.propertyList);var $1_1=this.table.tableOutline(this.objectName);$1_1.appendTo(this.get_mainElement());var $1_2=this.table.createSortButton(this.objectName,$9);var $1_3=this.table.createFilter(this.headingList,this.objectName);$('#'+this.objectName+'-summaryTable').remove();$('#'+this.objectName+'-sortDivision').remove();if($('#'+this.objectName+'-SummaryFormDiv')!=null){$('#'+this.objectName+'-SortAndFilterDiv').append($1_2);$1_3.insertAfter('#'+this.objectName+'-sortDivision');$('#'+this.objectName+'-sortDivision').click(ss.Delegate.create(this,function($p2_0){
this.table.sortWithStartFinishCompeteButtonClick($p2_0);}));$('#'+this.objectName+'-filterTextbox').keyup(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterTextbox').change(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterDDL').change(ss.Delegate.create(this,function($p2_0){
this.table.filterChange($p2_0);}));$('#'+this.objectName+'-filterContainer').click(ss.Delegate.create(this,function($p2_0){
this.table.searchDivClick($p2_0);}));var $1_6=this.table.createTableWithStartFinishCompleteButtonsWithOBJ(this.headingList,this.propertyList,this.objectName,$p1_0);$('#'+this.objectName+'-SummaryTableDiv').append($1_6);$('.'+this.objectName+'_startButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'_finishButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'_completeButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'-SummaryDataCol').click(ss.Delegate.create(this,function($p2_0){
this.columnClick($p2_0);}));}}));}}catch($B){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.FormEvents_AfterOpenForm_SubTask : '+$B.message);}},columnClick:function(e){try{var $0=parseInt(e.target.id.split('_')[1]);var $1='';var $2='';var $3='';var $4='';if($('#'+this.objectName+'-Data-Status_'+$0).text()!=null){$1=$('#'+this.objectName+'-Data-Status_'+$0).text().toString();}if($('#'+this.objectName+'-Data-ActualFinishDateTime_'+$0).text()!=null){$2=$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$0).text().toString();}if($('#'+this.objectName+'-Data-ActualStartDateTime_'+$0).text()!=null){$4=$('#'+this.objectName+'-Data-ActualStartDateTime_'+$0).text().toString();}if($('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$0).text()!=null){$3=$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$0).text().toString();}var $5=$('#'+this.objectName+'-SummaryDataCol_'+$0).attr('Key');var $6=[];$6.add($1);$6.add($2);$6.add($4);$6.add($3);$6.add($0.toString());$6.add(this.objectName);var $7=JSON.stringify($6);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39,$7);this.controllerServices.openFormByKey(this.objCollectionID,parseInt($5),false,null);}catch($8){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.ColumnClick : '+$8.message);}},updateScreenData:function(){try{var $0='';var $1=[];if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39).toString();}$1=JSON.parse($0);this.objectName=$1[5];if($('#'+this.objectName+'-SummaryFormDiv')!=null){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.interval);P2.PS.AMEREN.CM.AmerenP2Constants.interval=0;var $2='';var $3=$1[4];var $4=Date.empty;var $5=Date.empty;var $6=Date.empty;if(!!$1[1]){$4=Date.parseDate($1[1]);}if(!!$1[2]){$5=Date.parseDate($1[2]);}if(!!$1[3]){$6=Date.parseDate($1[3]);}var $7=$1[0];if($4!==Date.empty){if($1[1].indexOf('AM')<0&&$1[1].indexOf('PM')<0){$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$3).text($4.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));}}else{$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$3).text('');}if($5!==Date.empty){if($1[2].indexOf('AM')<0&&$1[2].indexOf('PM')<0){$('#'+this.objectName+'-Data-ActualStartDateTime_'+$3).text($5.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));}}else{$('#'+this.objectName+'-Data-ActualStartDateTime_'+$3).text('');}if($6!==Date.empty){if($1[3].indexOf('AM')<0&&$1[3].indexOf('PM')<0){$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$3).text($6.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));}}else{$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$3).text('');}if($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C){var $8=this.objectName+'-'+'StartButtonField_'+$3;var $9=this.objectName+'-'+'FinishButtonField_'+$3;var $A=this.objectName+'-'+'CompleteButtonField_'+$3;var $B=this.objectName+'-row'+$3;$('#'+$8).css('display','none');$('#'+$9).css('display','none');$('#'+$A).css('display','block');$('#'+$B).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.completeColor);$('#'+this.objectName+'-Data-Status_'+$3).text(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C);var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum1.moveNext()){var $C=$enum1.current;$('#'+this.objectName+'-'+$C+'_'+$3).css('display','none');}var $enum2=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum2.moveNext()){var $D=$enum2.current;$('#'+this.objectName+'-'+$D+'_'+$3).css('display','none');}var $enum3=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum3.moveNext()){var $E=$enum3.current;$('#'+this.objectName+'-'+$E+'_'+$3).css('display','table-row');}$('#'+$B).attr('status','Complete');}else if(!$7){var $F=this.objectName+'-'+'StartButtonField_'+$3;var $10=this.objectName+'-'+'FinishButtonField_'+$3;var $11=this.objectName+'-'+'CompleteButtonField_'+$3;var $12=this.objectName+'-row'+$3;$('#'+$F).css('display','block');$('#'+$10).css('display','none');$('#'+$11).css('display','none');$('#'+$12).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.startColor);$('#'+this.objectName+'-Data-Status_'+$3).text('');var $enum4=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum4.moveNext()){var $13=$enum4.current;$('#'+this.objectName+'-'+$13+'_'+$3).css('display','none');}var $enum5=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum5.moveNext()){var $14=$enum5.current;$('#'+this.objectName+'-'+$14+'_'+$3).css('display','none');}var $enum6=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum6.moveNext()){var $15=$enum6.current;$('#'+this.objectName+'-'+$15+'_'+$3).css('display','table-row');}$('#'+$12).attr('status','');}else if($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3E){var $16=this.objectName+'-'+'StartButtonField_'+$3;var $17=this.objectName+'-'+'FinishButtonField_'+$3;var $18=this.objectName+'-'+'CompleteButtonField_'+$3;var $19=this.objectName+'-row'+$3;$('#'+$16).css('display','none');$('#'+$17).css('display','block');$('#'+$18).css('display','none');$('#'+$19).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.finishColor);$('#'+this.objectName+'-Data-Status_'+$3).text(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3E);var $enum7=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum7.moveNext()){var $1A=$enum7.current;$('#'+this.objectName+'-'+$1A+'_'+$3).css('display','none');}var $enum8=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum8.moveNext()){var $1B=$enum8.current;$('#'+this.objectName+'-'+$1B+'_'+$3).css('display','none');}var $enum9=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum9.moveNext()){var $1C=$enum9.current;$('#'+this.objectName+'-'+$1C+'_'+$3).css('display','table-row');}$('#'+$19).attr('status','');}}else{if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create(this,this.updateScreenData),1000);}}}catch($1D){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.UpdateScreenData : '+$1D.message);}}}
P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor=function(){this.headingList=[];this.propertyList=[];P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.prototype={$3_0:null,objectName:'',objCollectionID:0,xmlDoc:null,table:null,$3_1:0,$3_2:0,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_7));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterTabChanged(ss.Delegate.create(this,this.$3_5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_3));this.xmlDoc=ss.parseXml(this.get_customSettings());this.table=new P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable(this.get_formServices());},$3_3:function($p0,$p1){var $0=new P2.PS.AMEREN.CM.Events.AfterSaveFormTask($p0,$p1);},$3_4:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){var $0=new P2.PS.AMEREN.CM.Events.AfterPropertyChangedTask($p0,$p1);}},$3_5:function($p0,$p1){try{window.localStorage.removeItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E);if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){if(P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired){if($p1.get_formServices().getSelectedTabIndex()===this.$3_2){this.$3_1=0;this.$3_6();this.$3_1=window.setInterval(ss.Delegate.create(this,this.$3_6),60000);}else{window.clearInterval(this.$3_1);}}var $0=new P2.PS.AMEREN.CM.Events.AfterTabChangedTask($p0,$p1);}}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.FormEvents_AfterTabChanged_SubTask_Supervisor : '+$1.message);}},$3_6:function(){try{var $0=$('#'+this.objectName+'-SummaryTableDiv');$('div',$0).each(ss.Delegate.create(this,function($p1_0,$p1_1){
if(!$p1_1.id.indexOf(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21+'-StartDate_')){var $1_0=$('#'+$p1_1.id).text();$1_0=$1_0.substr($1_0.indexOf(':')+2).trim();var $1_1=this.getDateObject($1_0.trim());var $1_2=parseInt($p1_1.id.split('_')[1].toString());var $1_3=$('#'+this.objectName+'-Data-Status_'+$1_2).text();if(!$1_3){if(Date.get_now()>$1_1){$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$20+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1F+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1E+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1D+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5D+$1_2).css('color','red');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5C+$1_2).css('color','red');}else{$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$20+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1F+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1E+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1D+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5D+$1_2).css('color','black');$('#'+this.objectName+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5C+$1_2).css('color','black');}}}}));}catch($1){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$1.message);}},$3_7:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){var $0=new P2.PS.AMEREN.CM.Events.BeforeSaveFormTask($p0,$p1);if(P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired){var $1=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$1.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $2=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$2.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $3=[];$3.add($1);$3.add($2);$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$3,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)){var $1_1=$1_0.get_key().toString();var $1_2='';var $1_3='';var $1_4='';var $1_5='';var $1_6='';var $1_7='';var $1_8=false;var $1_9='';var $1_A='';var $1_B='';var $1_C='';var $1_D;$1_4=$('.Row_'+$1_1).attr('id').toString();var $1_E=$1_4.split('-')[1].substr(3);if($('#'+this.objectName+'-Data-Status_'+$1_E)!=null){$1_2=$('#'+this.objectName+'-Data-Status_'+$1_E).text().toString();}if($('#'+this.objectName+'-Data-ActualFinishDateTime_'+$1_E)!=null){$1_5=$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$1_E).text().toString();}if($('#'+this.objectName+'-Data-ActualStartDateTime_'+$1_E)!=null){$1_7=$('#'+this.objectName+'-Data-ActualStartDateTime_'+$1_E).text().toString();}if($('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$1_E)!=null){$1_6=$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$1_E).text().toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)!=null){$1_9=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)!=null){$1_D=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26);$1_A=$1_D.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)!=null){$1_D=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27);$1_C=$1_D.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}if($1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)!=null){$1_D=$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A);$1_B=$1_D.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18);}if($1_2!==$1_9){$1_8=true;}if($1_5!==$1_A){$1_8=true;}if($1_7!==$1_C){$1_8=true;}if($1_6!==$1_B){$1_8=true;}if($1_8){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$1_2);if(!String.isNullOrEmpty($1_5)){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($1_5));}else{$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,Date.empty);}if(!String.isNullOrEmpty($1_7)){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($1_7));}else{$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,Date.empty);}if(!String.isNullOrEmpty($1_6)){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($1_6));}else{$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,Date.empty);}if($1_2===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C&&$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3A){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,true);}if($1_2!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C&&$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3F){$1_0.setPropertyByName(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,false);}$p0.commitCMObjectUpdate($1_0);}}}}));}}}catch($4){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$4.message);}},$3_8:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_7));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterTabChanged(ss.Delegate.create(this,this.$3_5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_3));P2.PS.AMEREN.CM.AmerenP2Constants.formServices=null;window.clearInterval(this.$3_1);}},getDateObject:function(dateTime){try{if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){if(dateTime.indexOf('PM')>0){if(parseInt($1[3])<12){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3])+12,parseInt($1[4]),parseInt($1[5]));}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}}else{return Date.empty;}}else{return Date.empty;}}catch($2){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$2.message);return Date.empty;}},$3_9:function($p0,$p1){try{var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){var $1=new P2.PS.AMEREN.CM.Events.AfterOpenFormTask($p0,$p1);P2.PS.AMEREN.CM.AmerenP2Constants.taskType=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60).toString();P2.PS.AMEREN.CM.AmerenP2Constants.callid=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();P2.PS.AMEREN.CM.AmerenP2Constants.number=$p1.get_formServices().getUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);window.localStorage.setItem('Status',$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status'));this.objCollectionID=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);P2.PS.AMEREN.CM.AmerenP2Constants.formServices=$p1.get_formServices();$p0.setSharedData('CurrentTaskStatus',$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status'));window.localStorage.setItem('CallID',P2.PS.AMEREN.CM.AmerenP2Constants.callid);window.localStorage.setItem('Number',P2.PS.AMEREN.CM.AmerenP2Constants.number);var $2=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$2.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $3=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.objCollectionID,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$3.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $4=[];$4.add($2);$4.add($3);var $5=null;var $6=null;var $7=null;var $8='';if(this.xmlDoc!=null){$5=this.xmlDoc.selectNodes('Field');$6=this.xmlDoc.selectSingleNode('Object');this.objectName=$6.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$7=this.xmlDoc.selectSingleNode('SortProperty');$8=$7.text;}}this.objCollectionID=$p0.getCollectionIDByName(this.objectName);var $enum1=ss.IEnumerator.getEnumerator($5);while($enum1.moveNext()){var $9=$enum1.current;this.headingList.add($9.childNodes[0].text.toString());this.propertyList.add($9.childNodes[1].text.toString());}window.localStorage.setItem(this.objectName+'_headingList',this.headingList);window.localStorage.setItem(this.objectName+'_propertyList',this.propertyList);$p0.getSearchedBusinessViewItemsByObjectType(this.objCollectionID,$4,ss.Delegate.create(this,function($p1_0){
P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired=true;window.localStorage.removeItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E);var $1_0=$p1.get_formServices().getTabTitles();for(var $1_4=0;$1_4<$p1.get_formServices().getTabsCount();$1_4++){if($1_0[$1_4]===P2.PS.AMEREN.CM.AmerenP2Constants.subTabHeading){this.$3_2=$1_4;}}this.$3_0=$p0;if(this.xmlDoc!=null){$5=this.xmlDoc.selectNodes('Field');$6=this.xmlDoc.selectSingleNode('Object');this.objectName=$6.text;if(this.xmlDoc.selectSingleNode('SortProperty')!=null){$7=this.xmlDoc.selectSingleNode('SortProperty');$8=$7.text;}}this.objCollectionID=$p0.getCollectionIDByName(this.objectName);this.headingList=[];this.propertyList=[];var $enum1=ss.IEnumerator.getEnumerator($5);while($enum1.moveNext()){var $1_5=$enum1.current;this.headingList.add($1_5.childNodes[0].text.toString());this.propertyList.add($1_5.childNodes[1].text.toString());}window.localStorage.setItem(this.objectName+'_headingList',this.headingList);window.localStorage.setItem(this.objectName+'_propertyList',this.propertyList);var $1_1=this.table.tableOutline(this.objectName);$1_1.appendTo(this.get_mainElement());var $1_2=this.table.createSortButton(this.objectName,$8);var $1_3=this.table.createFilter(this.headingList,this.objectName);$('#'+this.objectName+'-summaryTable').remove();$('#'+this.objectName+'-sortDivision').remove();if($('#'+this.objectName+'-SummaryFormDiv')!=null){$('#'+this.objectName+'-SortAndFilterDiv').append($1_2);$1_3.insertAfter('#'+this.objectName+'-sortDivision');$('#'+this.objectName+'-sortDivision').click(ss.Delegate.create(this,function($p2_0){
this.table.sortWithStartFinishCompeteButtonClick($p2_0);}));$('#'+this.objectName+'-filterTextbox').keyup(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterTextbox').change(ss.Delegate.create(this,function($p2_0){
this.table.applyfilter($p2_0);}));$('#'+this.objectName+'-filterDDL').change(ss.Delegate.create(this,function($p2_0){
this.table.filterChange($p2_0);}));$('#'+this.objectName+'-filterContainer').click(ss.Delegate.create(this,function($p2_0){
this.table.searchDivClick($p2_0);}));var $1_6=this.table.createTableWithStartFinishCompleteButtonsWithOBJ(this.headingList,this.propertyList,this.objectName,$p1_0);$('#'+this.objectName+'-SummaryTableDiv').append($1_6);$('.'+this.objectName+'_startButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'_finishButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'_completeButton').click(ss.Delegate.create(this,function($p2_0){
this.table.startFinishCompeteButtonClick($p2_0);}));$('.'+this.objectName+'-SummaryDataCol').click(ss.Delegate.create(this,function($p2_0){
this.columnClick($p2_0);}));}}));}}catch($A){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.FormEvents_BeforeSaveForm_RelaySummaryTable_Supervisor : '+$A.message);}},columnClick:function(e){try{var $0=parseInt(e.target.id.split('_')[1]);var $1='';var $2='';var $3='';var $4='';if($('#'+this.objectName+'-Data-Status_'+$0).text()!=null){$1=$('#'+this.objectName+'-Data-Status_'+$0).text().toString();}if($('#'+this.objectName+'-Data-ActualFinishDateTime_'+$0).text()!=null){$2=$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$0).text().toString();}if($('#'+this.objectName+'-Data-ActualStartDateTime_'+$0).text()!=null){$4=$('#'+this.objectName+'-Data-ActualStartDateTime_'+$0).text().toString();}if($('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$0).text()!=null){$3=$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$0).text().toString();}var $5=$('#'+this.objectName+'-SummaryDataCol_'+$0).attr('Key');var $6=[];$6.add($1);$6.add($2);$6.add($4);$6.add($3);$6.add($0.toString());$6.add(this.objectName);var $7=JSON.stringify($6);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39,$7);this.controllerServices.openFormByKey(this.objCollectionID,parseInt($5),false,null);}catch($8){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.ColumnClick : '+$8.message);}},updateScreenData:function(){try{var $0='';var $1=[];if(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39)!=null||!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39)){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39).toString();}$1=JSON.parse($0);this.objectName=$1[5];if($('#'+this.objectName+'-SummaryFormDiv')!=null){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.interval);P2.PS.AMEREN.CM.AmerenP2Constants.interval=0;var $2='';var $3=$1[4];var $4=Date.empty;var $5=Date.empty;var $6=Date.empty;if(!!$1[1]){$4=Date.parseDate($1[1]);}if(!!$1[2]){$5=Date.parseDate($1[2]);}if(!!$1[3]){$6=Date.parseDate($1[3]);}var $7=$1[0];if($4!==Date.empty){if($1[1].indexOf('AM')<0&&$1[1].indexOf('PM')<0){$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$3).text($4.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));}}else{$('#'+this.objectName+'-Data-ActualFinishDateTime_'+$3).text('');}if($5!==Date.empty){if($1[2].indexOf('AM')<0&&$1[2].indexOf('PM')<0){$('#'+this.objectName+'-Data-ActualStartDateTime_'+$3).text($5.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));}}else{$('#'+this.objectName+'-Data-ActualStartDateTime_'+$3).text('');}if($6!==Date.empty){if($1[3].indexOf('AM')<0&&$1[3].indexOf('PM')<0){$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$3).text($6.format(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$18));}}else{$('#'+this.objectName+'-Data-EstimatedFinishDateTime_'+$3).text('');}if($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C){var $8=this.objectName+'-'+'StartButtonField_'+$3;var $9=this.objectName+'-'+'FinishButtonField_'+$3;var $A=this.objectName+'-'+'CompleteButtonField_'+$3;var $B=this.objectName+'-row'+$3;$('#'+$8).css('display','none');$('#'+$9).css('display','none');$('#'+$A).css('display','block');$('#'+$B).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.completeColor);$('#'+this.objectName+'-Data-Status_'+$3).text(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3C);var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum1.moveNext()){var $C=$enum1.current;$('#'+this.objectName+'-'+$C+'_'+$3).css('display','none');}var $enum2=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum2.moveNext()){var $D=$enum2.current;$('#'+this.objectName+'-'+$D+'_'+$3).css('display','none');}var $enum3=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum3.moveNext()){var $E=$enum3.current;$('#'+this.objectName+'-'+$E+'_'+$3).css('display','table-row');}}else if(!$7){var $F=this.objectName+'-'+'StartButtonField_'+$3;var $10=this.objectName+'-'+'FinishButtonField_'+$3;var $11=this.objectName+'-'+'CompleteButtonField_'+$3;var $12=this.objectName+'-row'+$3;$('#'+$F).css('display','block');$('#'+$10).css('display','none');$('#'+$11).css('display','none');$('#'+$12).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.startColor);$('#'+this.objectName+'-Data-Status_'+$3).text('');var $enum4=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum4.moveNext()){var $13=$enum4.current;$('#'+this.objectName+'-'+$13+'_'+$3).css('display','none');}var $enum5=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum5.moveNext()){var $14=$enum5.current;$('#'+this.objectName+'-'+$14+'_'+$3).css('display','none');}var $enum6=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum6.moveNext()){var $15=$enum6.current;$('#'+this.objectName+'-'+$15+'_'+$3).css('display','table-row');}}else if($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3E){var $16=this.objectName+'-'+'StartButtonField_'+$3;var $17=this.objectName+'-'+'FinishButtonField_'+$3;var $18=this.objectName+'-'+'CompleteButtonField_'+$3;var $19=this.objectName+'-row'+$3;$('#'+$16).css('display','none');$('#'+$17).css('display','block');$('#'+$18).css('display','none');$('#'+$19).attr('bgcolor',P2.PS.AMEREN.CM.AmerenP2Constants.finishColor);$('#'+this.objectName+'-Data-Status_'+$3).text(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3E);var $enum7=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete);while($enum7.moveNext()){var $1A=$enum7.current;$('#'+this.objectName+'-'+$1A+'_'+$3).css('display','none');}var $enum8=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart);while($enum8.moveNext()){var $1B=$enum8.current;$('#'+this.objectName+'-'+$1B+'_'+$3).css('display','none');}var $enum9=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish);while($enum9.moveNext()){var $1C=$enum9.current;$('#'+this.objectName+'-'+$1C+'_'+$3).css('display','table-row');}}}else{if(!P2.PS.AMEREN.CM.AmerenP2Constants.interval){P2.PS.AMEREN.CM.AmerenP2Constants.interval=window.setInterval(ss.Delegate.create(this,this.updateScreenData),1000);}}}catch($1D){this.controllerServices.errorLog('Error in P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.UpdateScreenData : '+$1D.message);}}}
P2.PS.AMEREN.CM.CustomPanels.AcceptAll=function(){}
P2.PS.AMEREN.CM.CustomPanels.AcceptAll.prototype={$0:'SDID_TASK_STATUS_ACCEPT',$1:'SDID_TASK_STATUS_DISPATCHED',init:function(objControllerServices){var $0="<div>\r\n\t\t\t\t\t\t\t\t\t\t<style>\r\n\t\t\t\t\t\t\t\t\t\t.ColoredButtonBlue /* BLUE */ {padding:7px;; border:1px solid #93acec; background-color: #0B7F1C; background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#3366FF), to(#3366bF)); border-bottom:1px solid #4a6acb; color:#fff; cursor:pointer; } \r\n\t\t\t\t\t\t\t\t\t\t.buttonDisabled{ color:#8A8C93; pointer-events:none; padding: 7px;} \r\n\t\t\t\t\t\t\t\t\t\t.enabledButton{pointer-events :all;}\r\n\t\t\t\t\t\t\t\t\t\t</style>\r\n\t\t\t\t\t\t\t\t\t\t<button id='btnAcceptAll' type='button' style='width:100%;  height:100%'>Accept All Day</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>";var $1=$($0);objControllerServices.setSharedData('CurrentDate',W6.ClickMobile.Web.Core.W6CMUtilities.getToday());$('#btnAcceptAll',$1).addClass('ColoredButtonBlue').addClass('enabledButton').removeClass('buttonDisabled');$1.find('#btnAcceptAll').click(ss.Delegate.create(this,function($p1_0){
var $1_0=Date.parseDate(objControllerServices.getSharedData('CurrentDate').toString());objControllerServices.getScheduleByDate($1_0,ss.Delegate.create(this,function($p2_0){
var $2_0=false;if($p2_0!=null&&$p2_0.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_1=$enum1.current;if(!$2_1.get_isNA()){try{var $2_2=objControllerServices.getSharedData(this.$1);if($2_1.get_status().get_key()===$2_2.get_key()){$2_0=true;var $2_3=objControllerServices.getSharedData(this.$0);$2_1.set_status($2_3);$2_1.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$BD,Date.get_now());objControllerServices.commitCMObjectUpdate($2_1);}}catch($2_4){objControllerServices.infoLog($2_4.message);}}}if(!$2_0){objControllerServices.showMessageBox('There are no Dispatched Tasks Today','ClickMobile Message',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}}}));}));return $1.get(0);},setCustomSettings:function(setting){}}
P2.PS.AMEREN.CM.CustomPanels.AddInformationClass=function(){P2.PS.AMEREN.CM.CustomPanels.AddInformationClass.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.AddInformationClass.prototype={$3_0:'',init:function(){P2.PS.AMEREN.CM.CustomPanels.AddInformationClass.callBaseMethod(this, 'init');var $0='+';var $1;if(!String.isNullOrEmpty(this.get_customSettings())){$1=ss.parseXml(this.get_customSettings());this.$3_0=$1.getElementsByTagName('AdditionalInformation')[0].text;}var $2='<div id="AddinfoButton" class = "W6CMPanel W6CMPropPanelCombo"><table style = "width: 100%;"><tr><td style = "width: 100%;"><div class="col"><div id="divDuplicate" class="button1 save" style= "height: 32px;" >'+$0+'</div></div></td></tr></table></div>';$($2).appendTo(this.get_mainElement());$('#AddinfoButton',this.get_mainElement()).click(ss.Delegate.create(this,this.$3_1));},$3_1:function($p0){try{var $0=this.$3_0.split('$');var $1=new ss.StringBuilder();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;$1.append($2);$1.append('<br />');}this.controllerServices.showMessageBox($1.toString(),'ClickMobile Message',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}catch($3){this.controllerServices.errorLogEx($3.message,$3);}}}
P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButton=function(){this.$3_A=new Array(2);this.$3_B='';this.$3_C='';this.$3_D='';this.$3_10='';P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButton.initializeBase(this);W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_13));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_11));}
P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButton.prototype={$3_0:'Create Follow-Up',$3_1:'FollowUpWork',$3_2:'FollowUpWorks',$3_3:'FUWAssets',$3_4:'#AddFUpButton',$3_5:2,$3_6:null,$3_7:0,$3_8:true,$3_9:false,$3_E:'SID_IS_FOLLOWUP_COMPFORM_LOADED',$3_F:null,$3_11:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)){if($p1.get_formServices().getUIPropertyValueByName('BusinessLine')==null){var $0=(ss.isNullOrUndefined($p0.getSharedData('TaskBusinessLine')))?'':$p0.getSharedData('TaskBusinessLine').toString();$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('BusinessLine'),$0,10,function($p1_0){
$p1.get_formServices().setUIPropertyValueByName('BusinessLine',$p1_0.get_item(0));});}this.$3_A[0]=$p1.get_formServices().getUIPropertyValueByNameEx($p1.get_formObject().get_objectType(),'CompletionOutput').toString();}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){var $1=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).toString();var $2=($p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89)==null)?'':$p1.get_formObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString();$p0.setSharedData('ASSET_ASSETID',$1);$p0.setSharedData('ASSET_LOCATIONID',$2);var $3=(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)))?'':window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if($3===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){document.getElementById('AddFUpButton').style.display = 'block';document.getElementById('createSrBtnTitle').style.display = 'block';}else{document.getElementById('AddFUpButton').style.display = 'none';document.getElementById('createSrBtnTitle').style.display = 'none';}}}catch($4){this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_AfterOpenForm()',$4);}},$3_12:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)&&$p1.get_sourceObject()==null){if(!this.$3_7){var $0=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem(-1,$p1.get_formObject().getPropertyByName('MobileKey').toString(),'Task',$p1.get_formObject());if(this.controllerServices.getSharedData('PARENT_ASSIGNMENT_KEY')!=null&&!!this.controllerServices.getSharedData('PARENT_ASSIGNMENT_KEY').toString()){var $1=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,parseInt(this.controllerServices.getSharedData('PARENT_ASSIGNMENT_KEY').toString()));var $2=$1.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$3_2);$2.add($0);$1.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$3_2,$2);$1.saveForm();$1.refreshUIPropertyByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$3_2);this.$3_7++;}}}}catch($3){this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_AfterSaveForm()',$3);}},$3_13:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)&&$p1.get_sourceObject()==null){var $0=new W6.ClickMobile.Web.ObjectModel.W6CMDictionaryItem();var $1=$p0.getDictionaryIDByName('Url');$p0.getDictionaryItemsFilterByName($1,'FSEUrl',10,ss.Delegate.create(this,function($p1_0){
if($p1_0!=null&&!!$p1_0.get_count()){$0=$p1_0.get_item(0);if($0!=null){this.$3_10=$0.getAttribute('Description');}}}));if($p1.get_formServices().getUIPropertyValueByName('IsWorkRequest')!=null&&$p1.get_formServices().getUIPropertyValueByName('IsWorkRequest').toString().toLowerCase()==='false'&&$p1.get_formServices().getUIPropertyValueByName('IsEmergentTask')!=null&&$p1.get_formServices().getUIPropertyValueByName('IsEmergentTask').toString().toLowerCase()==='false'){var $2=$p0.guidGenerator();$p1.get_formObject().setPropertyByName('MobileKey',$2);$p0.setSharedData('FWMKey',$2);$p1.get_formServices().setUIPropertyValueByName('FUWRegion',$p0.getSharedData('SID_REGION'));$p1.get_formServices().setUIPropertyValueByName('FUWDistrict',$p0.getSharedData('SID_DISTRICT'));$p1.get_formServices().setUIPropertyValueByName('FUWState',$p0.getSharedData('SID_STATE'));$p1.get_formServices().setUIPropertyValueByName('FUWLatitude',$p0.getSharedData('SID_LATITUDE'));$p1.get_formServices().setUIPropertyValueByName('FUWLongitude',$p0.getSharedData('SID_LONGITUDE'));$p1.get_formServices().setUIPropertyValueByName('IsFollowUpTask',true);$p1.get_formServices().setUIPropertyValueByName('SourceSite',$p0.getSharedData('TASK_SOURCESITE'));$p1.get_formServices().setUIPropertyValueByName('AssetID',$p0.getSharedData('ASSET_ASSETID'));$p1.get_formServices().setUIPropertyValueByName('LocationID',$p0.getSharedData('ASSET_LOCATIONID'));var $3=$p0.getSharedData('SID_COORDX');if($3!=null){$p1.get_formObject().setPropertyByName('FUWCoordX',$3);}$3=$p0.getSharedData('SID_COORDY');if($3!=null){$p1.get_formObject().setPropertyByName('FUWCoordY',$3);}$p1.get_formServices().setUIPropertyValueByName('FUWCoordXStr',$p0.getSharedData('SID_COORDXSTR'));$p1.get_formServices().setUIPropertyValueByName('FUWCoordYStr',$p0.getSharedData('SID_COORDYSTR'));$p1.get_formServices().setUIPropertyValueByName('RelatedTaskCallID',$p0.getSharedData('SID_CALLID'));$p1.get_formServices().setUIPropertyValueByName('RelatedTaskNumber',$p0.getSharedData('SID_NUMBER'));$p1.get_formObject().setPropertyByName('RelatedWONum',$p0.getSharedData('SID_SOURCEID'));$p1.get_formServices().setUIPropertyValueByName('FUWOpenDate',Date.get_now());this.$3_F=Date.get_now();$p1.get_formServices().setUIPropertyValueByName('FUWStart',Date.get_now());this.controllerServices.getLoggedInEngineer(function($p1_0){
if($p1_0.get_key()!==-1){var $1_0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(8,'Engineer',null);$1_0.set_mobileKey($p1_0.get_mobileKey());$1_0.set_key($p1_0.get_key());var $1_1=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($p1_0.get_key(),$p1_0.get_mobileKey(),null,$1_0);$p1.get_formServices().setUIPropertyValueByName('FUWEngineer',$1_1);}});}}}catch($4){console.error("Error source:: CreateFollowUpTaskButton/FormEvents_BeforeOpenNewForm(); Error:: $4.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_BeforeOpenNewForm()',$4);}},$3_14:function($p0,$p1){},$3_15:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)){this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY','');this.controllerServices.setSharedData('PARENT_TASKTYPE','');this.$3_E='false';$p0.setSharedData('SID_IS_FOLLOWUP_COMPFORM_LOADED',this.$3_E);this.$3_7=0;}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_11));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenForm(ss.Delegate.create(this,this.$3_13));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_15));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenNewForm(ss.Delegate.create(this,this.$3_14));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_12));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterTabChanged(ss.Delegate.create(this,this.$3_1B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterPropertyChanged(ss.Delegate.create(this,this.$3_1A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_19));}}catch($0){console.error("Error source:: CreateFollowUpTaskButton/FormEvents_AfterCloseForm(); Error:: $0.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/FormEvents_AfterCloseForm()',$0);}},$3_16:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);},$3_17:function($p0){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes());},init:function(){try{P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButton.callBaseMethod(this, 'init');var $0='<div id="AddFUpButton" class = "W6CMPanel W6CMPropPanelCombo"><table style = "width: 100%;">'+'<tr><td style = "width: 100%;"><div class="col"><div id="divDuplicate" class="button1 save" style='+'"height: 32px;" >'+this.$3_0+'</div></div></td></tr></table></div>';$($0).appendTo(this.get_mainElement());$(this.$3_4,this.get_mainElement()).click(ss.Delegate.create(this,this.$3_18));}catch($1){console.error("Error source:: CreateFollowUpTaskButton/Init(); Error:: $1.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/Init()',$1);}},$3_18:function($p0){try{W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenNewForm(ss.Delegate.create(this,this.$3_14));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_15));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_13));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_12));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_11));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterTabChanged(ss.Delegate.create(this,this.$3_1B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_1A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_19));this.$3_6=this.controllerServices.getFormServices().getOpenFormByType(this.controllerServices.getCollectionIDByName('Asset')).get_formObject();var $0=null;$0=this.controllerServices.getFormServices().getOpenFormByType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment);this.controllerServices.setSharedData('SID_REGION',$0.getUIPropertyValueByNameEx(2,'Region'));this.controllerServices.setSharedData('SID_DISTRICT',$0.getUIPropertyValueByNameEx(2,'District'));this.controllerServices.setSharedData('SID_STATE',$0.getUIPropertyValueByNameEx(2,'State'));this.controllerServices.setSharedData('SID_LATITUDE',$0.getUIPropertyValueByNameEx(2,'Latitude'));this.controllerServices.setSharedData('SID_LONGITUDE',$0.getUIPropertyValueByNameEx(2,'Longitude'));this.controllerServices.setSharedData('SID_COORDX',$0.getUIPropertyValueByNameEx(2,'CoordX'));this.controllerServices.setSharedData('SID_COORDY',$0.getUIPropertyValueByNameEx(2,'CoordY'));this.controllerServices.setSharedData('SID_COORDXSTR',$0.getUIPropertyValueByNameEx(2,'CoordXStr'));this.controllerServices.setSharedData('SID_COORDYSTR',$0.getUIPropertyValueByNameEx(2,'CoordYStr'));this.controllerServices.setSharedData('SID_CALLID',$0.getUIPropertyValueByNameEx(2,'CallID'));this.controllerServices.setSharedData('SID_NUMBER',$0.getUIPropertyValueByNameEx(2,'Number'));this.controllerServices.setSharedData('SID_SOURCEID',$0.getUIPropertyValueByNameEx(2,'SourceID'));this.controllerServices.setSharedData('PARENT_ASSIGNMENT_KEY',$0.get_formObject().get_key());this.controllerServices.setSharedData('PARENT_TASKTYPE',$0.getUIPropertyValueByNameEx(2,'TaskType').toString());this.controllerServices.setSharedData('TASK_SOURCESITE',$0.getUIPropertyValueByNameEx(2,'SourceSite'));var $1=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(47919880,'Task',null);this.controllerServices.openFormByObject($1,false,null,ss.Delegate.create(this,function($p1_0){
this.controllerServices.infoLog(W6.ClickMobile.Web.ObjectModel.OpenFormStatus.toString($p1_0));}));}catch($2){console.error("Error source:: CreateFollowUpTaskButton/ButtonClick(); Error:: $2.message");this.controllerServices.errorLogEx('Error source:: CreateFollowUpTaskButton/ButtonClick()',$2);}},$3_19:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)&&!($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'IsWorkRequest'))){if(this.$3_17(Date.get_now()).toString()===this.$3_17(this.$3_F).toString()){$p1.get_formServices().setUIPropertyValueByNameEx($p0.getCollectionIDByName('FollowUpWork'),'FUWFinish',this.$3_16(Date.get_now(),60));}else{$p1.get_formServices().setUIPropertyValueByNameEx($p0.getCollectionIDByName('FollowUpWork'),'FUWFinish',Date.get_now());}this.$3_A=CaptureCompletionJSON('');$p1.get_formServices().setUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'CompletionFormValid',this.$3_A[0]);if(this.$3_A[0].toString()==='true'){$p1.get_formServices().setUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'CompletionOutput',this.$3_A[1]);}}},$3_1A:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)&&!($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'IsWorkRequest'))){if($p1.get_propertyName()==='FUWType'){this.$3_8=true;}else{this.$3_8=true;this.$3_9=true;}}},$3_1B:function($p0,$p1){var $0=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod);if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_1)){if($p1.selectedTabIndex!==5){this.$3_A=CaptureCompletionJSON('');}if($p1.selectedTabIndex===5){var $1=0;this.$3_B=(ss.isNullOrUndefined($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'FUWType')))?'':$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'FUWType').toString();var $2=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);var $3=$p1.get_formServices().getUIPropertyValueByName('FUWType');$1=$3.get_key();$p0.getDictionaryItem($2,$1,ss.Delegate.create(this,function($p1_0){
var $1_0=ss.parseXml($p1_0.get_body());this.$3_C=$1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;var $1_1=0;var $1_2=(ss.isNullOrUndefined($p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'FUWState')))?'':$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'FUWState').toString();if(!!this.$3_C){var $1_3=this.$3_C.split(',');if($1_2===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){this.$3_D=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_3[0]+'.html';}else if($1_2===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){this.$3_D=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_3[1]+'.html';}else{this.$3_D=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_3[0]+'.html';}}if(String.isNullOrEmpty(this.$3_B)){this.loadCompletionForms('None');}else{this.loadCompletionForms(this.$3_D);this.$3_8=false;this.$3_D='';this.$3_9=true;this.$3_E='true';$p0.setSharedData('SID_IS_FOLLOWUP_COMPFORM_LOADED',this.$3_E);this.$3_A[1]=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(this.$3_1),'CompletionOutput').toString();if(!String.isNullOrEmpty(this.$3_A[1])){var $1_4=this.$3_A[1];if((this.$3_B.indexOf('XFMR')>-1||this.$3_B.indexOf('BRKR')>-1||this.$3_B.indexOf('SWGR')>-1||this.$3_B.indexOf('BREAKER')>-1||this.$3_B.indexOf('TRANSFORMER')>-1||this.$3_B.indexOf('SWITCHGEAR')>-1)&&this.$3_B.indexOf('MOBILE_SWITCHGEAR')===-1&&this.$3_B.indexOf('MOBILE XFMR')===-1){PopulateCompletionForm($1_4, 1);}else if(this.$3_B.indexOf('HV TESTING')>-1||this.$3_B==='SUB-ADD_ALL EQUIPMENT TYPES-MIN_MO COMMISSIONING'){loadComCompletionForms($1_4);PopulateCompletionForm($1_4, 0, 1);}else{PopulateCompletionForm($1_4);}}}}));}}},$3_1C:function($p0){var $0=($p0.get_formObject().getPropertyByName(2,'LocationDescription')==null)?'':$p0.get_formObject().getPropertyByName(2,'LocationDescription').toString();var $1=($p0.get_formObject().getPropertyByName(2,'SubstationName')==null)?'':$p0.get_formObject().getPropertyByName(2,'SubstationName').toString();var $2=($p0.get_formObject().getPropertyByName(2,'CircuitNumber')==null)?'':$p0.get_formObject().getPropertyByName(2,'CircuitNumber').toString();if($('#substation').length>0){$('#substation').val($1);}if($('#location').length>0){$('#location').val($0);}if($('#circuitnumber').length>0){$('#circuitnumber').val($2);}},$3_1D:function($p0){var $0=$p0.target.id;var $1=$('#'+$0).val();var $2=$('#'+$0).parent().parent().parent().find("tr[class^='ctsection - ']");var $3=$2.find('input.instResp_Row2').val();$2.each(function($p1_0,$p1_1){
var $1_0=$p1_1.getAttribute('class').toString().substr(-1);var $1_1=$3;var $1_2=$('#'+$p1_1.id).find('td.cola02 div').toString();var $1_3=parseInt($1_0)+1;if($1_3<=5){$($1_2).html($1_1+'1-'+$1_1+$1_3.toString());}});},registerChangeEventsOnCompletionForm:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=0;var $0=$('[id^=OverrideInitials]');var $1=$('[class^=initials]');var $2;$2=$('[onclick^=initialsCheckBoxClicked]');var $3=$('.doc-info');var $4=$('div:contains(No Completion Form Required)');var $5=$('div:contains(Error in loading Completion Form)');if(($0.length>0||$1.length>0||$2.length>0||$3.length>0)&&(!$4.length&&!$5.length)){$('input.instResp_Row2').change(ss.Delegate.create(this,this.$3_1D));eval($('#var-setter').text());$('[onclick^=initialsCheckBoxClicked]').prop('disabled',true);for(var $6=0;$6<$1.length;$6++){validateInitial($1[$6].id);}for(var $7=0;$7<$2.length;$7++){initialsCheckBoxClicked($2[$7].id);}initialsCheckboxValidation($0);createDefaultMinMaxJson();$('.formData').children().find('input').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('select').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('textarea').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));changeDetector();}else if($4.length>0||$5.length>0){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm);}else{P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=window.setInterval(ss.Delegate.create(this,this.registerChangeEventsOnCompletionForm),5000);}},initiateInputChangeEventListener:function(e){changeDetector();validateAndAssignMinMax();var $0=$('[class^=initials]');var $1;$1=$('[onclick^=initialsCheckBoxClicked]');for(var $2=0;$2<$0.length;$2++){validateInitial($0[$2].id);}for(var $3=0;$3<$1.length;$3++){initialsCheckBoxClicked($1[$3].id);}},$3_1E:function($p0,$p1,$p2,$p3){$p3.getDictionaryItem($p2,$p0,ss.Delegate.create(this,function($p1_0){
var $1_0=ss.parseXml($p1_0.get_body());var $1_1=$1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;var $1_2='';try{if(!!$1_1){var $1_3=$1_1.split(',');if($p1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){if(!$1_3[0]){this.$3_21();}else{this.$3_20();}}else if($p1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){if(!$1_3[1]){this.$3_21();}else{this.$3_20();}}}else{this.$3_21();}}catch($1_4){$p3.errorLog('Error in P2.PS.AMEREN.CM.Events.AfterTabChangedTask : '+$1_4.message);}}));},$3_1F:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm=0;if($('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)').length>0){$('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)')[0].innerText='Error in loading Completion Form';}else{P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm=window.setInterval(ss.Delegate.create(this,this.$3_1F),3000);}},$3_20:function(){if($('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)').length>0){$('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)')[0].innerText='Error in loading Completion Form';}},$3_21:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm=0;if($('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)').length>0){$('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)')[0].innerText='No Completion Form Required';}else{P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm=window.setInterval(ss.Delegate.create(this,this.$3_21),3000);}},loadCompletionForms:function(formName){if(formName==='None'){$('#completionformContainer').text('No Completion Form Required');}var $0=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod);var $1=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App);var $2='';if($0){$2=String.format('cdvfile://localhost/persistent/SO/api/Content/'+formName+'/');}else{if(!!this.$3_10){$2=this.$3_10+formName+'/';}else{$2='SO/api/Content'+formName+'/';}}var $3='';$.ajax({url:$2,type:'POST',data:$3,contentType:'text/html',success:function($p1_0,$p1_1,$p1_2){
$('#completionformContainer').append('<div>'+$p1_2.responseText+'</div>');},error:function($p1_0,$p1_1,$p1_2){
}});}}
P2.PS.AMEREN.CM.CustomPanels.FWTaskTypeFilter=function(){this.$3_1=[];this.$3_2=[];P2.PS.AMEREN.CM.CustomPanels.FWTaskTypeFilter.initializeBase(this);}
P2.PS.AMEREN.CM.CustomPanels.FWTaskTypeFilter.prototype={$3_0:'FollowUpWork',$3_3:'SDID_FOLLOWUP_TASK_TYPE_LIST',$3_4:56,$3_5:1600,$3_6:function($p0,$p1){},$3_7:function($p0,$p1){},$3_8:function($p0,$p1){if($p1.get_formObject().get_objectType()===this.get_formObject().get_objectType()){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_7));}},$3_9:function($p0,$p1){try{if(this.controllerServices.getSharedData(this.$3_3)!=null||!!this.controllerServices.getSharedData(this.$3_3)){var $0=$p0.getSharedData(this.$3_3);if($0!=null){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;$("div[objname='W6CMPropPanelCombo[FUWType:foreign_Key]'] select").find("option[value='"+$1.get_key()+"']").remove();}}}else{var $2=[];$p0.getDictionaryItems(this.$3_4,this.$3_5,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2=ss.parseXml($1_1.get_body());var $1_3='';if($1_2.selectSingleNode('FollowUpTaskTypeCategory')==null||!$1_2.selectSingleNode('FollowUpTaskTypeCategory').text.toString().toLowerCase()||$1_2.selectSingleNode('FollowUpTaskTypeCategory').text.toString().toLowerCase()!==$p0.getSharedData('BusinessLineForFollowup').toString().toLowerCase()){$2.add($1_1);}}$p0.setSharedData(this.$3_3,$2);var $1_0=$p0.getSharedData(this.$3_3);if($1_0!=null){var $enum2=ss.IEnumerator.getEnumerator($1_0);while($enum2.moveNext()){var $1_4=$enum2.current;$("div[objname='W6CMPropPanelCombo[FUWType:foreign_Key]'] select").find("option[value='"+$1_4.get_key()+"']").remove();}}}));}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$3_0)){}}catch($3){$p0.errorLogEx('Error source:: FWTaskTypeFilter/FormEvents_AfterOpenForm()',$3);}},init:function(){P2.PS.AMEREN.CM.CustomPanels.FWTaskTypeFilter.callBaseMethod(this, 'init');W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_8));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_7));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_6));},$3_A:function($p0){try{var $0=$('#tasktypeValues',this.get_mainElement()).val();$("#tasktypeValues option[value='0']").remove();if($0!=='0'){document.getElementById('errorMsg').style.display = 'none';}else{}}catch($1){this.controllerServices.errorLog('Error source:: FWTaskTypeFilter/ServiceDropdown_Changed(): '+$1.message);}},$3_B:function($p0){try{var $0='';if(this.$3_2!=null){this.$3_2.clear();}var $1=ss.parseXml($p0);if(this.controllerServices.getSharedData('BusinessLineForFollowup')!=null){$0=this.controllerServices.getSharedData('BusinessLineForFollowup').toString();if($0.toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8){var $2=$1.selectSingleNode('//TaskTypeForFieldInitiatedWork/SUBSTATION').childNodes;var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;this.$3_2.add($3.text);}}else if($0.toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9){var $4=$1.selectSingleNode('//TaskTypeForFieldInitiatedWork/RELAY').childNodes;var $enum2=ss.IEnumerator.getEnumerator($4);while($enum2.moveNext()){var $5=$enum2.current;this.$3_2.add($5.text);}}else if($0.toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA){var $6=$1.selectSingleNode('//TaskTypeForFieldInitiatedWork/TRANSMISSION').childNodes;var $enum3=ss.IEnumerator.getEnumerator($6);while($enum3.moveNext()){var $7=$enum3.current;this.$3_2.add($7.text);}}}else{var $8=$1.selectSingleNode('//TaskTypeForFieldInitiatedWork/SUBSTATION').childNodes;var $enum4=ss.IEnumerator.getEnumerator($8);while($enum4.moveNext()){var $B=$enum4.current;this.$3_2.add($B.text);}var $9=$1.selectSingleNode('//TaskTypeForFieldInitiatedWork/RELAY').childNodes;var $enum5=ss.IEnumerator.getEnumerator($9);while($enum5.moveNext()){var $C=$enum5.current;this.$3_2.add($C.text);}var $A=$1.selectSingleNode('//TaskTypeForFieldInitiatedWork/TRANSMISSION').childNodes;var $enum6=ss.IEnumerator.getEnumerator($A);while($enum6.moveNext()){var $D=$enum6.current;this.$3_2.add($D.text);}}}catch($E){this.controllerServices.errorLog('FWTaskTypeFilter: Custom Settigns not present or incorrect');}}}
P2.PS.AMEREN.CM.CustomPanels.TimesheetUpdateJobCode=function(){this.$4='';this.$6='';}
P2.PS.AMEREN.CM.CustomPanels.TimesheetUpdateJobCode.prototype={formServices:null,$0:0,$1:0,$2:0,$3:0,$5:0,$7:null,init:function(objControllerServices){this.$7=objControllerServices;var $0=null;W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterOpenView(ss.Delegate.create(this,this.$A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$E));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_businessViewEvents().add_afterCheckBusinessView(ss.Delegate.create(this,this.$9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_businessViewEvents().add_deleteButtonClick(ss.Delegate.create(this,this.$8));this.$0=objControllerServices.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);this.$1=objControllerServices.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$11);this.$5=objControllerServices.getCollectionIDByName('Engineer');this.$4=objControllerServices.get_currentViewName();this.$2=objControllerServices.get_currentViewObjectType();if(this.$0===this.$2){var $1='<div><div id="createtimesheetactivities" style="margin-top: 5px;font-size:15px;display: block;height:auto;">';$1+='<button type="button" id="createactivitybtn" class="button1 button_min cm_ui_window_buttons_button highlightEnable" style="height:auto;">Create Login Activities</button></div>';$1+='<div><button id="btn2" style="display:none;background-color: #ff9800;border: none;color: white;padding: 10px 10px; text-align: center; text-decoration: none;display: inline-block; font-size: 16px;  margin: 4px 2px; cursor: pointer;width:50%;">Update JobCode</button>';$1+='<div id="dropDownID"></div></div></div>';$0=$($1);$('#btn2',$0).click(ss.Delegate.create(this,this.$B));$('#createactivitybtn',$0).click(ss.Delegate.create(this,this.$D));}else if(this.$1===this.$2){var $2='<div><button id="btn1" style="background-color: #4CAF50;border: none;display:none;color: white;padding: 10px 10px; text-align: center; text-decoration: none; font-size: 16px;  margin: 4px 2px; cursor: pointer;width:50%;" >Timesheet Approve</button></div>';$0=$($2);$('#btn1',$0).click(ss.Delegate.create(this,this.$C));$0.click(ss.Delegate.create(this,this.$C));}return $0.get(0);},$8:function($p0,$p1){if($p1.objectType===this.$0){try{$('#btn2').css('display','none');$('#sele1').css('display','none');}catch($0){}}},$9:function($p0,$p1){if($p1.objectType===this.$0){var $0=this.$7.getBusinessViewServices().getCheckedBusinessViewItemsByObjectType(this.$0);if($0.get_count()>0){$('#btn2').css('display','inline');$('#sele1').css('display','inline');}else{$('#btn2').css('display','none');$('#sele1').css('display','none');}}else if($p1.objectType===this.$1){var $1=this.$7.getBusinessViewServices().getCheckedBusinessViewItemsByObjectType(this.$1);if($1.get_count()>0){$('#btn1').css('display','inline');}else{$('#btn1').css('display','none');}}},$A:function($p0,$p1){if($p1.viewSettings.name===this.$4){try{$('#btn2').css('display','none');$('#sele1').css('display','none');var $0='';var $1='';var $2='';var $3='';var $4=this.$7.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$7);this.$7.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if(this.$7.get_loggedInEngineerKey()!==-1){this.$6=$p1_0.getPropertyByName('Job_Code').toString();if(!!this.$6){this.$7.setSharedData('LoggedenggJobcode',this.$6);}}this.$7.getDictionaryItems($4,500,ss.Delegate.create(this,function($p2_0){
$2='<select id="sele1" style="display:none;width:30%;"><option>-None-</option>';if($p2_0.get_item(0)!=null){var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;var $2_1=ss.parseXml($2_0.get_body());$0=$2_1.selectSingleNode('Name').text;if(this.$6.substring(0,2)===$0.substring(0,2)){$1=$1+'<option>'+$0+'</option>';}}}$1=$2+$1+'</select>';$('#dropDownID').append($1);}));}));}catch($5){this.$7.errorLog('The exception message is: '+$5.message);}}},$B:function($p0){var $0=$('#sele1').val();var $1=this.$7.getBusinessViewServices().getCheckedBusinessViewItemsByObjectType(this.$0);var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;$2.setPropertyByName('JobCode',$0);this.$7.commitCMObjectUpdate($2);}$('#btn2').css('display','none');$('#sele1').css('display','none');this.$7.getBusinessViewServices().cancelSearchByObjectType(this.$0);},setCustomSettings:function(strCustomSettings){},$C:function($p0){try{var $0=new W6.ClickMobile.Web.ObjectModel.W6CMDictionaryItem();this.$3=this.$7.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$B);this.$7.getDictionaryItemsFilterByName(this.$3,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$3,10,ss.Delegate.create(this,function($p1_0){
if($p1_0!=null&&!!$p1_0.get_count()){$0=$p1_0.get_item(0);}if($0!=null){var $1_0=this.$7.getBusinessViewServices().getCheckedBusinessViewItemsByObjectType(this.$1);var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2=$1_1.getPropertyByName(this.$1,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$9).toString();if($1_2===P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$15){$1_1.setPropertyByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$9,$0);this.$7.commitCMObjectUpdate($1_1);}}$('#btn1').css('display','none');this.$7.getBusinessViewServices().cancelSearchByObjectType(this.$1);}}));}catch($1){this.$7.errorLog('The exception message is: '+$1.message);}},$D:function($p0){P2.PS.AMEREN.CM.AmerenP2Constants.crewActivityCreated=false;P2.PS.AMEREN.CM.AmerenP2Constants.activityCreated=false;P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup=true;var $0=new P2.PS.AMEREN.CM.Events.AfterMessageReceived_Timesheet(P2.PS.AMEREN.CM.AmerenP2Constants.timesheetCustomSettings);$0.createTimesheetActivity(this.$7);},$E:function($p0,$p1){try{this.$1=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$11);if($p1.get_formObject().get_objectType()===this.$1){$p1.get_formServices().closeForm();}}catch($0){this.$7.errorLog('This exception is from FormEventAfterSaveTimesheet_SO method in AfterMessageReceived_Timesheet class'+$0.message);}}}
Type.registerNamespace('P2.PS.AMEREN.CM.Events');P2.PS.AMEREN.CM.Events.AfterOpenFormTask=function(controllerServices,e){var $0=Date.empty;var $1=Date.empty;P2.PS.AMEREN.CM.AmerenP2Constants.duration=0;if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){$0=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$99)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$99);$1=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C);if(e.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets')!=null){var $8=e.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($8.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($8);while($enum1.moveNext()){var $9=$enum1.current;controllerServices.getBusinessViewServices().getBusinessViewItemByObjectType(30000008,$9.get_key(),function($p1_0){
var $1_0=(ss.isNullOrUndefined($p1_0.getPropertyByName('Description').toString()))?'':$p1_0.getPropertyByName('Description').toString();e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'AssetDescription',$1_0);var $1_1=(ss.isNullOrUndefined($p1_0.getPropertyByName('AssetID').toString()))?'':$p1_0.getPropertyByName('AssetID').toString();e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'AssetID',$1_1);var $1_2=(ss.isNullOrUndefined($p1_0.getPropertyByName('LocationID').toString()))?'':$p1_0.getPropertyByName('LocationID').toString();e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'AddressLocation',$1_2);if(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'LocationDescription')==null){var $1_3=(ss.isNullOrUndefined($p1_0.getPropertyByName('LocationDescription').toString()))?'':$p1_0.getPropertyByName('LocationDescription').toString();e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'LocationDescription',$1_3);}});}}}}else if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){$0=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6);$1=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7);}var $2=$1-$0;if($2>0){$2=$2/1000;}P2.PS.AMEREN.CM.AmerenP2Constants.duration=$2;var $3=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A);var $4=new P2.PS.AMEREN.CM.Events.CreateCustomTables();var $5=$4.addDays($1,14400);var $6=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)))?'':e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();var $7=e.get_formObject().getPropertyID(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason');if($3>$5){if($6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){$("div[objname='W6CMPropPanelCombo[DelayReason:foreign_Key]']").find('#Asterisk').css('display','inline');e.get_formServices().setPropertyEnabledByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason',true);}else{$("div[objname='W6CMPropPanelCombo[DelayReason:foreign_Key]']").find('#Asterisk').css('display','none');e.get_formServices().setPropertyEnabledByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason',false);}}else{e.get_formServices().setPropertyEnabledByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason',false);$("div[objname='W6CMPropPanelCombo[DelayReason:foreign_Key]']").find('#Asterisk').css('display','none');}}
P2.PS.AMEREN.CM.Events.AfterSaveFormTask=function(controllerServices,e){var $0=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)))?'':e.get_formServices().getUIPropertyValueByNameEx(2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if(($0===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8D)||($0===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$90)){e.get_formServices().closeForm();}}
P2.PS.AMEREN.CM.Events.AfterTabChangedTask=function(controllerServices,e){this.$2=controllerServices;P2.PS.AMEREN.CM.AmerenP2Constants._globalcontrollerservice=controllerServices;if(!this.$1){var $1=e.get_formServices().getTabTitles();for(var $2=0;$2<$1.length;$2++){if($1[$2]===P2.PS.AMEREN.CM.AmerenP2Constants.subTabHeading){this.$1=$2;}}}if(e.selectedTabIndex===this.$1){var $3=$('#PVSubTask-summaryTable > tbody tr:last td');if($3.length===1){if(controllerServices.isOnline()){controllerServices.externalMaskOn();}var $4=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();var $5=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString();this.$3($4,$5,'SubTask');}}if(e.selectedTabIndex===7){if(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad||W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone||W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod){document.getElementsByClassName('W6CMNativeAppLauncher')[1].style.display = 'none' ;document.getElementsByClassName('W6CMNativeAppLauncher')[2].style.display = 'block' ;}else{document.getElementsByClassName('W6CMNativeAppLauncher')[1].style.display = 'block' ;document.getElementsByClassName('W6CMNativeAppLauncher')[2].style.display = 'none' ;}}if(e.selectedTabIndex===12){var $6=e.get_formServices().getUIPropertyValueByNameEx(2,'State').toString();var $7=controllerServices.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);var $8=0;this.$0=e.get_formServices().getUIPropertyValueByNameEx(2,'TaskType').toString();var $9=e.get_formServices().getUIPropertyValueByNameEx(2,'TaskType');$8=$9.get_key();this.$5($8,$6,$7,controllerServices);if(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput')!=null){this.$9();var $A=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput').toString();if(!String.isNullOrEmpty($A)){var $B=$A;if((this.$0.indexOf('XFMR')>-1||this.$0.indexOf('BRKR')>-1||this.$0.indexOf('SWGR')>-1||this.$0.indexOf('BREAKER')>-1||this.$0.indexOf('TRANSFORMER')>-1||this.$0.indexOf('SWITCHGEAR')>-1)&&this.$0.indexOf('MOBILE_SWITCHGEAR')===-1&&this.$0.indexOf('MOBILE XFMR')===-1){PopulateCompletionForm($B, 1);}else if(this.$0.indexOf('HV TESTING')>-1||this.$0==='SUB-ADD_ALL EQUIPMENT TYPES-MIN_MO COMMISSIONING'){loadComCompletionForms($B);PopulateCompletionForm($B, 0, 1);}else{PopulateCompletionForm($B);}}else{if(this.$0.indexOf('XFMR')>-1||this.$0.indexOf('BRKR')>-1||this.$0.indexOf('SWGR')>-1||this.$0.indexOf('BREAKER')>-1||this.$0.indexOf('TRANSFORMER')>-1||this.$0.indexOf('SWITCHGEAR')>-1){try{create_ctsection();display_ctsections();}catch($C){controllerServices.errorLog('Error in P2.PS.AMEREN.CM.Events.AfterTabChangedTask : '+$C.message);}}}}this.registerChangeEventsOnCompletionForm();this.$4(e);}var $0=(ss.isNullOrUndefined(window.localStorage.getItem('CompletionFormEdited')))?'':window.localStorage.getItem('CompletionFormEdited').toString();if(e.selectedTabIndex!==12&&$0!=null&&!!$0&&$0==='true'){e.get_formServices().saveForm();}}
P2.PS.AMEREN.CM.Events.AfterTabChangedTask.prototype={$0:'',$1:0,$2:null,$3:function($p0,$p1,$p2){this.$2.infoLog('From TriggerSxpToGetDisconnectedObjects');var $0='<SXPServerGetObjects>';if($p2==='SubTask'){$0=$0+'<ObjectType>PV'+$p2+'</ObjectType>';}else{$0=$0+'<ObjectType>'+$p2+'</ObjectType>';}$0=$0+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p0+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$p1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p0+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';if($p2==='SubTask'){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects['PVSubTask']));while($enum1.moveNext()){var $1=$enum1.current;$0=$0+'<Item>'+$1+'</Item>';}}else{var $enum2=ss.IEnumerator.getEnumerator(Object.keys(P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects[$p2]));while($enum2.moveNext()){var $2=$enum2.current;$0=$0+'<Item>'+$2+'</Item>';}}$0=$0+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$2.sendWrappedCustomSXP($0);},$4:function($p0){var $0=($p0.get_formObject().getPropertyByName(2,'LocationDescription')==null)?'':$p0.get_formObject().getPropertyByName(2,'LocationDescription').toString();var $1=($p0.get_formObject().getPropertyByName(2,'SubstationName')==null)?'':$p0.get_formObject().getPropertyByName(2,'SubstationName').toString();var $2=($p0.get_formObject().getPropertyByName(2,'CircuitNumber')==null)?'':$p0.get_formObject().getPropertyByName(2,'CircuitNumber').toString();if($('#substation').length>0){$('#substation').val($1);}if($('#location').length>0){$('#location').val($0);}if($('#circuitnumber').length>0){$('#circuitnumber').val($2);}},$5:function($p0,$p1,$p2,$p3){$p3.getDictionaryItem($p2,$p0,ss.Delegate.create(this,function($p1_0){
var $1_0=ss.parseXml($p1_0.get_body());var $1_1=$1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;var $1_2='';try{if(!!$1_1){var $1_3=$1_1.split(',');if($p1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){if(!$1_3[0]){this.$8();}else{this.$7();}}else if($p1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){if(!$1_3[1]){this.$8();}else{this.$7();}}}else{this.$8();}}catch($1_4){$p3.errorLog('Error in P2.PS.AMEREN.CM.Events.AfterTabChangedTask : '+$1_4.message);}}));},$6:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm=0;if($('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)').length>0){$('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)')[0].innerText='Error in loading Completion Form';}else{P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm=window.setInterval(ss.Delegate.create(this,this.$6),3000);}},$7:function(){if($('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)').length>0){$('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)')[0].innerText='Error in loading Completion Form';}},$8:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm=0;if($('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)').length>0){$('div.W6CMPanel.W6CMPanelHtmlContainer').find('div:contains(Failed to load):contains(SO/api/Content/)')[0].innerText='No Completion Form Required';}else{P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm=window.setInterval(ss.Delegate.create(this,this.$8),3000);}},$9:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdRelay);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdRelay=0;if(this.$0===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C9||this.$0.indexOf('BUS DIFF RELAY PANEL')>-1||this.$0.indexOf('BUS DIFF RLY PNL')>-1||this.$0.indexOf('HIGH CURRENT TEST')>-1){var $0=$('#'+P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CA);if(ss.isNullOrUndefined($0)||!$0.length){P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdRelay=window.setInterval(ss.Delegate.create(this,this.$9),5000);}else{var $1=$('#busDifferentialTable-tbody tr');if(!$1.length){window.onAddRow();}}}else if(this.$0.indexOf('RELAY PANEL REPLACEMENT')>-1||this.$0.indexOf('POT PHASING')>-1){var $2=$('#pdts-tbody');if(ss.isNullOrUndefined($2)||!$2.length){P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdRelay=window.setInterval(ss.Delegate.create(this,this.$9),5000);}else{window.onPdtsBodyAddRow();}}$('.formData').children().find('input').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('select').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('textarea').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));changeDetector();},$A:function($p0){var $0=$p0.target.id;var $1=$('#'+$0).val();var $2=$('#'+$0).parent().parent().parent().find("tr[class^='ctsection - ']");var $3=$2.find('input.instResp_Row2').val();$2.each(function($p1_0,$p1_1){
var $1_0=$p1_1.getAttribute('class').toString().substr(-1);var $1_1=$3;var $1_2=$('#'+$p1_1.id).find('td.cola02 div').toString();var $1_3=parseInt($1_0)+1;if($1_3<=5){$($1_2).html($1_1+'1-'+$1_1+$1_3.toString());}});},registerChangeEventsOnCompletionForm:function(){try{var $0=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod);window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm);P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=0;var $1=$('[id^=OverrideInitials]');var $2=$('[class^=initials]');var $3;$3=$('[onclick^=initialsCheckBoxClicked]');var $4=$('.doc-info');var $5=$('div:contains(No Completion Form Required)');var $6=$('div:contains(Error in loading Completion Form)');if(($1.length>0||$2.length>0||$3.length>0||$4.length>0)&&(!$5.length&&!$6.length)){$('input.instResp_Row2').change(ss.Delegate.create(this,this.$A));eval($('#var-setter').text());$('[onclick^=initialsCheckBoxClicked]').prop('disabled',true);for(var $7=0;$7<$2.length;$7++){validateInitial($2[$7].id);}for(var $8=0;$8<$3.length;$8++){initialsCheckBoxClicked($3[$8].id);}initialsCheckboxValidation($1);createDefaultMinMaxJson();$('.formData').children().find('input').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('select').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));$('.formData').children().find('textarea').change(ss.Delegate.create(this,this.initiateInputChangeEventListener));changeDetector();}else if($5.length>0||$6.length>0){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm);}else{P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=window.setInterval(ss.Delegate.create(this,this.registerChangeEventsOnCompletionForm),5000);}}catch($9){this.$2.errorLog('Error in P2.PS.AMEREN.CM.Events.RegisterCOmpletionFormEvents : '+$9.message);}},initiateInputChangeEventListener:function(e){try{changeDetector();validateAndAssignMinMax();var $0=$('[class^=initials]');var $1=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod);var $2;$2=$('[onclick^=initialsCheckBoxClicked]');for(var $3=0;$3<$0.length;$3++){validateInitial($0[$3].id);}for(var $4=0;$4<$2.length;$4++){initialsCheckBoxClicked($2[$4].id);}}catch($5){this.$2.errorLog('Error in P2.PS.AMEREN.CM.Events.InitiateInputChangeEventListener : '+$5.message);}}}
P2.PS.AMEREN.CM.Events.AssetCompletion=function(customSettings){this.$9={};W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$13));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$12));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$11));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeCommitObject(ss.Delegate.create(this,this.$10));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterCommitObject(ss.Delegate.create(this,this.$14));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterTabChanged(ss.Delegate.create(this,this.$C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterMsgProcessed(ss.Delegate.create(this,this.$B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySync(ss.Delegate.create(this,this.$A));}
P2.PS.AMEREN.CM.Events.AssetCompletion.prototype={$0:false,$1:'OperationalStatus',$2:'Complete',$3:'Not Visited',$4:'Pipeline Patrol',$5:'ClickMobile Message',$6:'Assets not updated. Required Tool is missing or expired',assetIsUpdating:false,appSwitched:false,$7:null,$8:null,$A:function($p0,$p1){if(this.$8==null){if($p1.get_dictionaryID()===$p0.getDictionaryIDByName('OperationalStatus')){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('OperationalStatus'),this.$3,1,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;this.$8=$1_0;}}));}}},$B:function($p0,$p1){try{if($p0.getSharedData('MobileEngineer')==null||!$p0.getSharedData('MobileEngineer')){if($p1.message!=null&&$p1.message.toString().startsWith('<SXPMobileGetGenericObjectsResult>')){var $0=ss.parseXml($p1.message.toString());if($0.selectSingleNode('CollectionID').text==='8'){$p0.getLoggedInEngineer(function($p1_0){
if($p0.get_loggedInEngineerKey()!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,$p0.get_loggedInEngineerKey(),function($p2_0){
if($p2_0!=null){$p0.setSharedData('MobileEngineer',$p2_0);}});}});}}}if($p1.message!=null&&$p1.message.toString().startsWith('<SXPMobileGetScheduleResult>')){this.$E($p0);}}catch($1){$p0.errorLogEx('Error source:: AssetCompletion/ClientEvents_AfterMsgProcessed()',$1);}},$C:function($p0,$p1){if(($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&($p1.get_formObject()).get_taskKey()!==-1)){if($p1.get_formServices().getSelectedTabIndex()===$p1.get_formServices().getTabTitles().indexOf('Job Details')){$p0.setSharedData('ToolsExpired',null);this.assetIsUpdating=false;}}},$D:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&!($p1.get_formObject()).get_isNA()){if($p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status')!==$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status')&&$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString()==='Arrived'){$p0.setSharedData('CurrentArrivedTask',null);this.assetIsUpdating=false;this.$E($p0);}if($p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString()==='Arrived'){this.$E($p0);}}}catch($0){$p0.errorLogEx('Error source:: AssetCompletion/FormEvents_AfterSaveForm()',$0);}},$E:function($p0){$p0.setSharedData('ScheduleHasPipelinePatrol','false');var $0=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHistory().seconds;var $1=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHorizon().seconds;var $2=this.$15(Date.get_now(),-($0+216000));var $3=this.$15(Date.get_now(),($1+216000));$p0.getTodaySchedule($2,$3,function($p1_0){
if(($p1_0!=null&$p1_0.get_count()>0)===1){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if($1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString()==='Arrived'){$p0.setSharedData('ArrivedTaskOnMobile',$1_0);}if($1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'TaskType').toString()==='Pipeline Patrol'){$p0.setSharedData('ScheduleHasPipelinePatrol','true');}}}});},$F:function($p0,$p1){if($p0.getSharedData('MobileEngineer')==null||!$p0.getSharedData('MobileEngineer')){$p0.getLoggedInEngineer(function($p1_0){
if($p1_0!=null){$p0.getBusinessViewServices().getBusinessViewItemByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,$p1_0.get_key(),function($p2_0){
$p0.setSharedData('MobileEngineer',$p2_0);});}});}this.$E($p0);$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('OperationalStatus'),this.$3,1,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;this.$8=$1_0;}}));},$10:function($p0,$p1){var $0=null;var $1='';if($p1.objectToCommit.get_objectType()===$p0.getCollectionIDByName('Asset')){if($p0.getSharedData('ArrivedTaskOnMobile')!=null){$0=$p0.getSharedData('ArrivedTaskOnMobile');$1=$0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'TaskType').toString();}}try{if($p1.objectToCommit.get_objectType()===$p0.getCollectionIDByName('Asset')&&$p1.objectToCommit.getPropertyByName(this.$1)!=null&&$p1.objectToCommit.getPropertyByName(this.$1).toString()===this.$2){if(($p1.objectToCommit.getPropertyByName('IsPipeLinePatrol')==null||$p1.objectToCommit.getPropertyByName('IsPipeLinePatrol').toString()==='false')||$1===this.$4){if($p0.getSharedData('AssetSavedOnForm')==null||!$p0.getSharedData('AssetSavedOnForm')){if($p0.getSharedData('ToolsExpired')!=null&&!!$p0.getSharedData('ToolsExpired')){$p1.cancel=true;this.assetIsUpdating=false;}else if($p0.getSharedData('ToolsExpired')==null){$p1.cancel=true;if($p0.getSharedData('ArrivedTaskOnMobile')!=null||!!$p0.getSharedData('ArrivedTaskOnMobile')){this.$7=$p0.getSharedData('ArrivedTaskOnMobile');var $2=this.$7.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'RequiredTools');var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;if($3.get_genericObject().getPropertyByName('ContractorToolExpDate')!=null){if(Date.parseDate($3.get_genericObject().getPropertyByName('ContractorToolExpDate').toString())<Date.get_now()||String.isNullOrEmpty($3.get_genericObject().getPropertyByName('ContractorToolSN').toString())){$p0.setSharedData('ToolsExpired',true);if(!this.assetIsUpdating){this.assetIsUpdating=true;$p0.showMessageBox(this.$6,this.$5,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}break;}}else{$p0.setSharedData('ToolsExpired',true);$p0.showMessageBox(this.$6,this.$5,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);break;}}if($p0.getSharedData('ToolsExpired')==null||!$p0.getSharedData('ToolsExpired')){$p0.setSharedData('ToolsExpired',false);$p0.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($p1.objectToCommit);}}}}}}if($p1.objectToCommit.get_objectType()===$p0.getCollectionIDByName('Asset')){if(!$p1.cancel){if(($p1.objectToCommit.getPropertyByName('IsPipeLinePatrol')==null||$p1.objectToCommit.getPropertyByName('IsPipeLinePatrol').toString()==='false')||$1===this.$4){var $4=$p0.getSharedData('MobileEngineer');if($4!=null){var $5=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,'Engineer',$p1.objectToCommit);$5.set_key($4.get_key());var $6=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($5.get_key(),'','EngineerRef',$5);$p1.objectToCommit.setPropertyByName('EngineerRef',$6);if($p1.objectToCommit.get_key()===-1&&$p1.objectToCommit.get_mobileKey()!=null){if($p1.objectToCommit.getPropertyByName(this.$1)==null||!$p1.objectToCommit.getPropertyByName(this.$1).toString()){if(this.$8!=null){$p1.objectToCommit.setPropertyByName(this.$1,this.$8);var $7=$p0.getFormServices().getOpenFormByMobileKey($p1.objectToCommit.get_mobileKey());$7.setUIPropertyValueByName(this.$1,this.$8);}}}}$p1.objectToCommit.setPropertyByName('StatusChangeDate',Date.get_now());if($p1.objectToCommit.getPropertyByName(this.$1)!=null){if($p0.getSharedData('AssetSavedOnForm')==null||!$p0.getSharedData('AssetSavedOnForm')){if(!$p1.cancel){if($p1.objectToCommit.getPropertyByName(this.$1).toString()===this.$2){if($p0.getSharedData('CurrentArrivedTask')==null||!$p0.getSharedData('CurrentArrivedTask')){var $8=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHistory().seconds;var $9=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHorizon().seconds;var $A=this.$15(Date.get_now(),-($8+216000));var $B=this.$15(Date.get_now(),($9+216000));$p0.getTodaySchedule($A,$B,function($p1_0){
if(($p1_0!=null&$p1_0.get_count()>0)===1){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if($1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString()==='Arrived'){$p0.setSharedData('CurrentArrivedTask',$1_0);var $1_1=$1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'RequiredTools');if($1_1!=null){if($1_1.get_count()>0){var $1_2=$p1.objectToCommit.getPropertyByName('AssetTools');var $1_3;if(!!$1_2.get_count()){$1_3=$1_2;var $enum2=ss.IEnumerator.getEnumerator($1_3);while($enum2.moveNext()){var $1_4=$enum2.current;if($1_4.get_status()!==W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted){$1_4.set_status(W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted);}}}else{$1_3=new W6.ClickMobile.Web.ObjectModel.W6CMMultiValueOfBusinessObject($p1.objectToCommit,'AssetTools',$p0.getCollectionIDByName('AssetTool'));}var $enum3=ss.IEnumerator.getEnumerator($1_1);while($enum3.moveNext()){var $1_5=$enum3.current;var $1_6=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($p0.getCollectionIDByName('AssetTool'),'AssetTool',null);$1_6.set_mobileKey($p0.guidGenerator());$1_6.setPropertyByName('ToolID',$1_5.get_genericObject().getPropertyByName('ContractorToolSN'));$1_6.setPropertyByName('ToolTypeID',$1_5.get_genericObject().getPropertyByName('RequiredToolType'));$1_6.setPropertyByName('NextCalDate',$1_5.get_genericObject().getPropertyByName('ContractorToolExpDate'));var $1_7=$1_5.get_genericObject().getPropertyByName('Tool');$1_6.setPropertyByName('AssetNum',$1_7.get_name());var $1_8=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessObjectItem($1_6,W6CMClientGlobals.W6CMBusinessObjectItemStatus.eNew);$1_3.add($1_8);}$p1.objectToCommit.setPropertyByName('AssetTools',$1_3);}}break;}}}});}else{this.$7=$p0.getSharedData('CurrentArrivedTask');var $C=this.$7.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'RequiredTools');if($C!=null){if($C.get_count()>0){var $D=$p1.objectToCommit.getPropertyByName('AssetTools');var $E;if(!!$D.get_count()){$E=$D;var $enum2=ss.IEnumerator.getEnumerator($E);while($enum2.moveNext()){var $F=$enum2.current;if($F.get_status()!==W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted){$F.set_status(W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted);}}}else{$E=new W6.ClickMobile.Web.ObjectModel.W6CMMultiValueOfBusinessObject($p1.objectToCommit,'AssetTools',$p0.getCollectionIDByName('AssetTool'));}var $enum3=ss.IEnumerator.getEnumerator($C);while($enum3.moveNext()){var $10=$enum3.current;var $11=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($p0.getCollectionIDByName('AssetTool'),'AssetTool',null);$11.set_mobileKey($p0.guidGenerator());$11.setPropertyByName('ToolID',$10.get_genericObject().getPropertyByName('ContractorToolSN'));$11.setPropertyByName('ToolTypeID',$10.get_genericObject().getPropertyByName('RequiredToolType'));$11.setPropertyByName('NextCalDate',$10.get_genericObject().getPropertyByName('ContractorToolExpDate'));var $12=$10.get_genericObject().getPropertyByName('Tool');$11.setPropertyByName('AssetNum',$12.get_name());var $13=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessObjectItem($11,W6CMClientGlobals.W6CMBusinessObjectItemStatus.eNew);$E.add($13);}$p1.objectToCommit.setPropertyByName('AssetTools',$E);}}}}}}if($p1.objectToCommit.getPropertyByName(this.$1).toString()===this.$2&&!!$p0.getSharedData('AssetSavedOnForm')){var $14=$p0.getSharedData('ParentKey').toString();var $15=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,parseInt($14));var $16=$15.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'RequiredTools');if($16!=null){if($16.get_count()>0){var $17=$p1.objectToCommit.getPropertyByName('AssetTools');var $18;if(!!$17.get_count()){$18=$17;var $enum4=ss.IEnumerator.getEnumerator($18);while($enum4.moveNext()){var $19=$enum4.current;if($19.get_status()!==W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted){$19.set_status(W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted);}}}else{$18=new W6.ClickMobile.Web.ObjectModel.W6CMMultiValueOfBusinessObject($p1.objectToCommit,'AssetTools',$p0.getCollectionIDByName('AssetTool'));}var $enum5=ss.IEnumerator.getEnumerator($16);while($enum5.moveNext()){var $1A=$enum5.current;var $1B=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($p0.getCollectionIDByName('AssetTool'),'AssetTool',null);$1B.set_mobileKey($p0.guidGenerator());$1B.setPropertyByName('ToolID',$1A.get_genericObject().getPropertyByName('ContractorToolSN'));$1B.setPropertyByName('ToolTypeID',$1A.get_genericObject().getPropertyByName('RequiredToolType'));$1B.setPropertyByName('NextCalDate',$1A.get_genericObject().getPropertyByName('ContractorToolExpDate'));var $1C=$1A.get_genericObject().getPropertyByName('Tool');$1B.setPropertyByName('AssetNum',$1C.get_name());var $1D=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessObjectItem($1B,W6CMClientGlobals.W6CMBusinessObjectItemStatus.eNew);$18.add($1D);}$p1.objectToCommit.setPropertyByName('AssetTools',$18);}}}}}}}}catch($1E){$p0.errorLog('AssetCompletion.ClientEvents_BeforeCommitObject'+$1E);}if($p1.objectToCommit.get_objectType()===$p0.getCollectionIDByName('Asset')&&!$p1.cancel){if(($p1.objectToCommit.getPropertyByName('IsPipeLinePatrol')==null||$p1.objectToCommit.getPropertyByName('IsPipeLinePatrol').toString()==='false')||$1===this.$4){var $1F=document.hasFocus();if($1F.toString()==='true'){if($p0.getSharedData('AssetStatusChangedFromForm')==null||!$p0.getSharedData('AssetStatusChangedFromForm')){var $20=$p1.objectToCommit.getModifiedPropertiesListAsReadOnly($p1.objectToCommit.get_objectType());if($20.contains($p1.objectToCommit.getPropertyID('OperationalStatus'))){if(!$20.contains($p1.objectToCommit.getPropertyID('MobileKey'))){if(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App){cordova.InAppBrowser.open('epochfield://jumptoapp','_system','hidden');;}else{if(!this.appSwitched){window.location.href='epochfield://jumptoapp';;this.appSwitched=true;}}}}}}$p0.setSharedData('AssetStatusChangedFromForm',null);}}},$11:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&!($p1.get_formObject()).get_isNA()){$p0.setSharedData('ParentKey','');}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('RequiredTool')){this.assetIsUpdating=false;}},$12:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&!($p1.get_formObject()).get_isNA()){$p0.setSharedData('ParentKey',$p1.get_formObject().get_key());}this.appSwitched=false;}catch($0){$p0.errorLog('AssetCompletion.FormEvents_AfterOpenForm'+$0);}},$13:function($p0,$p1){try{var $0='';var $1='';if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){if($p1.get_formObject().getPropertyByName(this.$1)!=null){$0=$p1.get_formObject().getPropertyByName(this.$1).toString();}if($p1.get_formServices().getUIPropertyValueByName(this.$1)!=null){$1=$p1.get_formServices().getUIPropertyValueByName(this.$1).toString();}if($1!==$0){this.$0=true;}else{this.$0=false;}}}catch($2){$p0.errorLogEx('Error source:: AssetCompletion/FormEvents_BeforeSaveForm()',$2);}},$14:function($p0,$p1){if($p1.objectToCommit.get_objectType()===$p0.getCollectionIDByName('Asset')){if($p1.objectToCommit.getPropertyByName('IsPipeLinePatrol')==null||$p1.objectToCommit.getPropertyByName('IsPipeLinePatrol').toString()==='false'){var $0=$p0.getSharedData('ArrivedTaskOnMobile');if($0!=null){if($0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'TaskType').toString()==='Leak Survey'){if($p0.getSharedData('ScheduleHasPipelinePatrol')!=null&&$p0.getSharedData('ScheduleHasPipelinePatrol')==='true'){var $1=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(30000008,'AssetID');$1.initStringCriterion($p1.objectToCommit.getPropertyByName('AssetID').toString());var $2=[];$2.add($1);$p0.getSearchedBusinessViewItemsByObjectType(30000008,$2,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if($1_0.getPropertyByName('AssetID')===$p1.objectToCommit.getPropertyByName('AssetID')&&$1_0.get_key()!==$p1.objectToCommit.get_key()&&$1_0.getPropertyByName('IsPipeLinePatrol').toString()==='true'){if($p1.objectToCommit.getPropertyByName(this.$1)!=null){if($p1.objectToCommit.getPropertyByName(this.$1).toString()!==$1_0.getPropertyByName(this.$1).toString()){$1_0.setPropertyByName(this.$1,$p1.objectToCommit.getPropertyByName('OperationalStatus'));}}var $1_1=$p0.getSharedData('MobileEngineer');if($1_1!=null){var $1_5=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,'Engineer',$p1.objectToCommit);$1_5.set_key($1_1.get_key());var $1_6=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($1_5.get_key(),'','EngineerRef',$1_5);$1_0.setPropertyByName('EngineerRef',$1_6);}$1_0.setPropertyByName('StatusChangeDate',$p1.objectToCommit.getPropertyByName('StatusChangeDate'));var $1_2=$p1.objectToCommit.getPropertyByName('AssetTools');var $1_3=new W6.ClickMobile.Web.ObjectModel.W6CMMultiValueOfBusinessObject($p1.objectToCommit,'AssetTools',$p0.getCollectionIDByName('AssetTool'));var $1_4=$1_0.getPropertyByName('AssetTools');if(!!$1_4.get_count()){$1_3=$1_4;var $enum2=ss.IEnumerator.getEnumerator($1_3);while($enum2.moveNext()){var $1_7=$enum2.current;if($1_7.get_status()!==W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted){$1_7.set_status(W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted);}}}if($1_2!=null){var $enum3=ss.IEnumerator.getEnumerator($1_2);while($enum3.moveNext()){var $1_8=$enum3.current;if($1_8.get_status()!==W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted){var $1_9=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($p0.getCollectionIDByName('AssetTool'),'AssetTool',null);$1_9.set_mobileKey($p0.guidGenerator());$1_9.setPropertyByName('ToolID',$1_8.get_genericObject().getPropertyByName('ToolID'));$1_9.setPropertyByName('ToolTypeID',$1_8.get_genericObject().getPropertyByName('ToolTypeID'));$1_9.setPropertyByName('NextCalDate',$1_8.get_genericObject().getPropertyByName('NextCalDate'));$1_9.setPropertyByName('AssetNum',$1_8.get_genericObject().getPropertyByName('AssetNum'));var $1_A=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessObjectItem($1_9,W6CMClientGlobals.W6CMBusinessObjectItemStatus.eNew);$1_3.add($1_A);}}$1_0.setPropertyByName('AssetTools',$1_3);}$p0.commitCMObjectUpdate($1_0);break;}}}));}}}}}},$15:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);}}
P2.PS.AMEREN.CM.Events.AssetRelayCompletion=function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$4));}
P2.PS.AMEREN.CM.Events.AssetRelayCompletion.prototype={$0:0,$1:0,$2:0,$3:0,$4:function($p0,$p1){this.$0=$p0.getCollectionIDByName('AssetFeatureSpec');this.$1=$p0.getCollectionIDByName('Material');this.$3=$p0.getCollectionIDByName('RelayInspection');this.$2=$p0.getCollectionIDByName('PVSubTask');var $0=$p1.get_formObject().get_objectType();if($0===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){$p0.setSharedData('TaskBusinessLine',$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'BusinessLine'));$p0.setSharedData('CurrentTaskStatus',$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status'));}else if($0===this.$0){if($p0.getSharedData('TaskBusinessLine').toString()==='Transmission'){$p1.get_formServices().setTabEnablement(0,true);}}if($0===this.$0||$0===this.$3||$0===this.$2||$0===this.$1){if($p0.getSharedData('CurrentTaskStatus').toString()!=='Arrived'){$p1.get_formServices().setTabEnablement(0,false);}}},$5:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.$0){if($p1.get_propertyName()!=='IsSpecUpdated'){$p1.get_formServices().setUIPropertyValueByNameEx(this.$0,'IsSpecUpdated',true);}}}catch($0){$p0.errorLog('Exception from AfterPorpertyChange,'+$0.message);}}}
P2.PS.AMEREN.CM.Events.BeforeOpenViewBarcode=function(controllerServices){this.$1='';W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeOpenView(ss.Delegate.create(this,this.$5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$4));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySync(ss.Delegate.create(this,this.$2));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySyncSessionCompleted(ss.Delegate.create(this,this.$3));}
P2.PS.AMEREN.CM.Events.BeforeOpenViewBarcode.prototype={$0:null,$2:function($p0,$p1){this.$0=$p0;if($p0.getSharedData('BusinessLineForFollowup')==null){$p0.getLoggedInEngineer(function($p1_0){
var $1_0=null;if(ss.parseXml($p1_0.getBody())!=null){$1_0=ss.parseXml($p1_0.getBody()).selectNodes('P');var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if($1_1.attributes.getNamedItem('i').nodeValue!=null){if($p1_0.getPropertyName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,parseInt($1_1.attributes.getNamedItem('i').nodeValue))==='District'){var $1_2=$1_1.text.split(' ');if(($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8)||($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9)||($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA)){$p0.setSharedData('BusinessLineForFollowup',$1_2[$1_2.length-1]);}}}}}});}},$3:function($p0,$p1){if($p0.getSharedData('BusinessLineForFollowup')==null){$p0.getLoggedInEngineer(function($p1_0){
var $1_0=null;if(ss.parseXml($p1_0.getBody())!=null){$1_0=ss.parseXml($p1_0.getBody()).selectNodes('P');var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if($1_1.attributes.getNamedItem('i').nodeValue!=null){if($p1_0.getPropertyName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,parseInt($1_1.attributes.getNamedItem('i').nodeValue))==='District'){var $1_2=$1_1.text.split(' ');if(($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8)||($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9)||($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA)){$p0.setSharedData('BusinessLineForFollowup',$1_2[$1_2.length-1]);}}}}}});}},$4:function($p0,$p1){this.$0=$p0;if($p0.getSharedData('BusinessLineForFollowup')==null){$p0.getLoggedInEngineer(function($p1_0){
var $1_0=null;if(ss.parseXml($p1_0.getBody())!=null){$1_0=ss.parseXml($p1_0.getBody()).selectNodes('P');var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if($1_1.attributes.getNamedItem('i').nodeValue!=null){if($p1_0.getPropertyName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,parseInt($1_1.attributes.getNamedItem('i').nodeValue))==='District'){var $1_2=$1_1.text.split(' ');if(($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8)||($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9)||($1_2[$1_2.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA)){$p0.setSharedData('BusinessLineForFollowup',$1_2[$1_2.length-1]);}}}}}});}},$5:function($p0,$p1){try{var $0=ss.parseXml($p1.viewSettings.customSettings);if($0.selectSingleNode('//Settings/ViewName')!=null){if($0.selectSingleNode('//Settings/ViewName').text.toLowerCase()==='scanbarcode'){if(W6.ClickMobile.Web.Core.W6CMPlatform.runningFromPhoneGap()){this.$0.scanBarcodeAndQRCode(ss.Delegate.create(this,this.onSuccessfullQRReading),ss.Delegate.create(this,this.onQRReadingFail));$p1.cancel=true;}else{this.$0.showMessageBox('Barcode Scan functionality is not available in browser',P2.PS.AMEREN.CM.P2PSAMERENCM$1.$66,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}catch($1){this.$0.errorLogEx('Error source:: Barcode class',$1);}},onSuccessfullQRReading:function(Message){this.search(Message.text);},onQRReadingFail:function(Message){this.$0.showMessageBox(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$66,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);},search:function(assetID){this.$0.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,assetID);if(!!assetID){var $0=new P2.PS.AMEREN.CM.Events.DisplayPopUpForFieldInitiatedTask(this.$0);$0.showMessageBoxForFieldInitiatedTask();}}}
P2.PS.AMEREN.CM.Events.BeforeSaveFormTask=function(controllerServices,e){this.$0=new P2.PS.AMEREN.CM.Events.CreateCustomTables();var $0=Date.empty;var $1=Date.empty;if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){$0=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6);$1=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7);}else{$0=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$99)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$99);$1=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C);}var $2=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A);var $3=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status')))?'':e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString();if($3!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5F){if($1<$2){var $4=this.$0.addDays($1,14400);var $5=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason')))?'':e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason').toString();if(($2>$4)&&!$5){e.cancel=true;var $6=document.getElementsByClassName('cm_ui_window_text_content_surface').length;if(!$6){controllerServices.showMessageBox('Enter value for Delay Reason','Warning',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);e.get_formServices().setPropertyEnabledByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason',true);e.get_formServices().selectTab(1);}}}}}
P2.PS.AMEREN.CM.Events.CapturingTimeProperties=function(sEventSettings){this.$3=sEventSettings;W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeCommitObject(ss.Delegate.create(this,this.$5));}
P2.PS.AMEREN.CM.Events.CapturingTimeProperties.prototype={$1:null,$2:null,$3:null,$4:null,$5:function($p0,$p1){try{this.$4=$p0;if($p1.objectToCommit.get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&!$p1.cancel){var $0=$p1.objectToCommit.getModifiedPropertiesListAsReadOnly(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if($1===$p1.objectToCommit.getPropertyID(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status')){this.$6();if($p1.objectToCommit.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status')==null){return;}var $2=$p1.objectToCommit.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status');if($2==null){return;}for(var $3=0;$3<this.$1.length;$3++){var $4=this.$1[$3].toString();var $5=this.$2[$3].toString();var $6=Date.get_now();if($2.toString()===$4){try{$p1.objectToCommit.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$5,$6);}catch($7){$p0.errorLog($7);}}if($2.toString()==='En Route'){try{var $8=$p1.objectToCommit.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'AcknowledgeTime');if($8==null){$p1.objectToCommit.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'AcknowledgeTime',$6);}}catch($9){$p0.errorLog($9);}}else if($2.toString()==='Arrived'){try{var $A=$p1.objectToCommit.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'AcknowledgeTime');if($A==null){$p1.objectToCommit.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'AcknowledgeTime',$6);}var $B=$p1.objectToCommit.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'EnRouteTime');if($B==null){$p1.objectToCommit.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'EnRouteTime',$6);}}catch($C){$p0.errorLog($C);}}}break;}}}}catch($D){if($p0!=null){$p0.errorLog($D);}}},$6:function(){try{if(!this.$3){if(this.$4!=null){this.$4.errorLog('CapturingTimeProperties - Event settings are missing, aborting event');return;}}this.$1=[];this.$2=[];var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(this.$3);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings/Stamps/Stamp'));while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.selectSingleNode('Status').text;var $3=$1.selectSingleNode('Property').text;this.$1.add($2);this.$2.add($3);}}catch($4){if(this.$4!=null){this.$4.errorLog($4);}}}}
P2.PS.AMEREN.CM.Events.CompletionFormPopUp=function(customSettings){this.$0={};this.$1='';this.$2='';this.$3='';this.$4='';this.$5='';this.$6='';W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterTabChanged(ss.Delegate.create(this,this.$9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$8));this.$A(customSettings);}
P2.PS.AMEREN.CM.Events.CompletionFormPopUp.prototype={$8:function($p0,$p1){try{if(!String.isNullOrEmpty(this.$6)){if(this.$6==='CorrTestPoint'){this.$6='CorrosionTP';}if(this.$6==='LeakMonitor'){this.$6='LeakCheckAndSurv';}var $0=null;if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$6)&&$p1.get_formObject().get_parentObject()!=null){if($p1.get_formObject().get_parentObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){$0=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$p1.get_formObject().get_parentObject().get_key());$0.selectTab($0.getTabTitles().indexOf(this.$2));}else if($p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){$0=$p0.getFormServices().getOpenFormByTypeAndKey($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_parentObject().get_key());$0.selectTab($0.getTabTitles().indexOf(this.$4));}}}}catch($1){$p0.errorLogEx('Error source:: CompletionFormPopUp/FormEvents_AfterTabChanged()',$1);}},$9:function($p0,$p1){try{if(($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&($p1.get_formObject()).get_taskKey()!==-1)||$p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){if($p1.get_formServices().getSelectedTabIndex()===$p1.get_formServices().getTabTitles().indexOf(this.$1)||$p1.get_formServices().getSelectedTabIndex()===$p1.get_formServices().getTabTitles().indexOf(this.$3)){var $0='';if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){$0=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'TaskType').toString();}else if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){$0=$p1.get_formServices().getUIPropertyValueByName(this.$5).toString();}this.$6=this.$0[$0];if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $1=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$6);if($1.get_genericObject().get_key()!==-1){$p1.get_formServices().openInnerBusinessObjectItemFormByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$6,$1);}}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){var $2=$p1.get_formServices().getUIPropertyValueByName(this.$6);if($2!=null){$p1.get_formServices().openInnerBusinessObjectItemFormByName($p0.getCollectionIDByName('FollowUpWork'),this.$6,$2);}else{var $3=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_key());var $4=$3.getPanelsByPropertyName($p0.getCollectionIDByName('FollowUpWork'),this.$6)[0];var $5=$4;$5.openNewGenericObjectForm();}}}}}catch($6){$p0.errorLogEx('Error source:: CompletionFormPopUp/FormEvents_AfterTabChanged()',$6);}},$A:function($p0){var $0=ss.parseXml($p0);this.$1=$0.selectSingleNode('TaskCompletionTabName').text;this.$2=$0.selectSingleNode('TaskFirstTabName').text;this.$3=$0.selectSingleNode('FWCompletionTabName').text;this.$4=$0.selectSingleNode('FWFirstTabName').text;this.$5=$0.selectSingleNode('FWTaskTypePropName').text;var $1=$0.selectSingleNode('//TaskTypeMappings').childNodes;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;this.$0[$2.attributes.getNamedItem('TaskTypeName').nodeValue]=$2.attributes.getNamedItem('MVName').nodeValue;}}}
P2.PS.AMEREN.CM.Events.CompletionOutput=function(){this.$3_0='';this.$3_2=new Array(2);this.$3_5='';P2.PS.AMEREN.CM.Events.CompletionOutput.initializeBase(this);}
P2.PS.AMEREN.CM.Events.CompletionOutput.prototype={$3_1:0,$3_3:0,$3_4:0,$3_6:0,relayCompleted:false,$3_7:false,$3_8:false,$3_9:true,$3_A:null,init:function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_E));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$3_C));var $0='';P2.PS.AMEREN.CM.Events.CompletionOutput.globalFormServices=this.get_formServices();},$3_B:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment||$p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){this.relayCompleted=false;this.$3_7=false;this.$3_8=false;if($p1.get_formServices().getUIPropertyValueByNameEx(2,'Status').toString()==='Complete'){}}}catch($0){$p0.errorLog('Exception From P2.PS.AMEREN.CM.Events.CompletionOutput, class FormEvents_AfterSaveForm(). Message : '+$0.message);}},$3_C:function($p0,$p1){if($p1.get_formObject().get_objectType()===this.get_formObject().get_objectType()){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeOpenForm(ss.Delegate.create(this,this.$3_E));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$3_D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$3_F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$3_B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterCloseForm(ss.Delegate.create(this,this.$3_C));}},$3_D:function($p0,$p1){try{this.$3_A=$p0;if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment||$p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){var $0=($p1.get_formObject().getPropertyByName(2,'LocationDescription')==null)?'':$p1.get_formObject().getPropertyByName(2,'LocationDescription').toString();var $1=($p1.get_formObject().getPropertyByName(2,'SubstationName')==null)?'':$p1.get_formObject().getPropertyByName(2,'SubstationName').toString();var $2=($p1.get_formObject().getPropertyByName(2,'CircuitNumber')==null)?'':$p1.get_formObject().getPropertyByName(2,'CircuitNumber').toString();var $3={};$3['location']=$0;$3['substation']=$1;$3['circuitnumber']=$2;window.localStorage.setItem('taskProperties_'+this.$3_5+'_'+this.$3_6,JSON.stringify($3));this.$3_1=window.setInterval(ss.Delegate.create(this,function(){
window.clearInterval(this.$3_1);if($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput')!=null){this.$3_0=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput').toString();if(!String.isNullOrEmpty(this.$3_0)){var $1_0=this.$3_0;if(this.$3_2[1].toString()!=null){$1_0=this.$3_2[1];}PopulateCompletionForm($1_0);}}}),2000);}}catch($4){$p0.errorLog('Exception From P2.PS.AMEREN.CM.Events.CompletionOutput, class FormEvents_AfterOpenForm(). Message : '+$4.message);}},$3_E:function($p0,$p1){try{$p0.setSharedData('SID_CALLID',$p1.get_formObject().getPropertyByName(2,'CallID'));$p0.setSharedData('SID_NUMBER',$p1.get_formObject().getPropertyByName(2,'Number'));$p0.setSharedData('SID_TEXTBODY',$p1.get_formObject().getPropertyByName(2,'TextBody'));this.$3_A=$p0;if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment||$p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){window.localStorage.setItem('CompletionFormEdited',false);}}catch($0){$p0.errorLog('Exception From P2.PS.AMEREN.CM.Events.CompletionOutput, class FormEvents_BeforeOpenForm(). Message : '+$0.message);}},$3_F:function($p0,$p1){try{var $0=null;this.$3_A=$p0;if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment||$p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){if(!this.$3_8&&!this.relayCompleted&&!this.$3_7){$p1.cancel=true;this.$3_5=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();this.$3_6=parseInt($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString());if($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString()==='Arrived'){var $5=(ss.isNullOrUndefined(window.localStorage.getItem('CompletionFormEdited')))?'':window.localStorage.getItem('CompletionFormEdited').toString();if($5==='true'){this.$3_A.setSharedData('SID_COMPLETIONFORM_SAVED',true);var $6=$p1.get_formServices().getUIPropertyValueByNameEx(2,'TaskType').toString();if($6.indexOf('HV TESTING')>-1||$6==='SUB-ADD_ALL EQUIPMENT TYPES-MIN_MO COMMISSIONING'){this.$3_2=CaptureCompletionJSON(this.$3_5+'_'+this.$3_6,1);}else{this.$3_2=CaptureCompletionJSON(this.$3_5+'_'+this.$3_6);}$0=JSON.parse(this.$3_2[1]);if(this.$3_2[0].toString()==='true'||this.$3_2[0].toString()==='false'){if($0!=null&&$0.completion.length>0){var $7='';if(this.$3_2[1].toString()!=null){$7=this.$3_2[1];this.$3_2[1]=$7;}$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid',this.$3_2[0]);$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput',this.$3_2[1]);}this.$3_8=true;this.$3_9=true;this.saveCompletionData();}else{$p1.cancel=true;this.$3_8=false;this.relayCompleted=false;this.$3_7=false;}window.localStorage.setItem('CompletionFormEdited',false);}else{this.$3_8=true;this.relayCompleted=true;this.$3_7=true;this.saveCompletionData();this.ResetAllCompletionVariables();}}else if($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString()==='Complete'){PopulateCompletionForm($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput'));this.$3_2=CaptureCompletionJSON(this.$3_5+'_'+this.$3_6);var $8=$p1.get_formServices().getUIPropertyValueByNameEx(2,'TaskType').toString();var $9='';if($8.indexOf('HV TESTING')>-1||$8==='SUB-ADD_ALL EQUIPMENT TYPES-MIN_MO COMMISSIONING'){loadComCompletionForms($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput'));PopulateCompletionForm($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput'), 0, 1);}$0=JSON.parse(this.$3_2[1]);$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid',this.$3_2[0]);var $A=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid');var $B=this.$3_2[1].indexOf(':[]}');var $C=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormURL').toString();var $D=$('div:contains(Error in loading Completion Form)');if($8.indexOf('HV TESTING')>-1||$8==='SUB-ADD_ALL EQUIPMENT TYPES-MIN_MO COMMISSIONING'){$9=window.localStorage.getItem('CompletionData').toString();$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid',true);$A=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid');$B=$9.indexOf(':[]}');}if($A&&$B===-1){if($0!=null&&$0.completion.length>0){var $E='';if(this.$3_2[1].toString()!=null){$E=this.$3_2[1];this.$3_2[1]=$E;}$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput',this.$3_2[1]);}this.$3_8=true;this.$3_9=true;this.saveCompletionData();}else if($A&&$B>0&&$C==='CompletionForms/.html'||!$C||!!$9){this.$3_8=true;this.$3_9=true;}else{if($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormURL')!=null&&!!$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormURL')){$p1.cancel=true;var $F=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$64);$p0.getDictionaryItemsFilterByName($F,'Arrived',25,function($p1_0){
$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$p1_0.get_item(0));var $1_0=Date.empty;var $1_1=Date.empty;var $1_2=0;var $1_3=new P2.PS.AMEREN.CM.Events.CreateCustomTables();$1_0=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'Start');$1_2=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Duration');$1_1=$1_3.addDays($1_0,$1_2);$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'Finish',$1_1);});this.$3_8=false;this.relayCompleted=false;this.$3_7=false;$p0.showMessageBox('Completion form is not valid for saving. Please fill the Mandatory fields!!!','Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}else{this.$3_8=true;this.$3_9=true;this.saveCompletionData();$p1.get_formServices().closeForm();}}}else{this.$3_8=true;this.relayCompleted=true;this.$3_7=true;}var $1=[];this.$3_3=$p0.getCollectionIDByName('RelayInspection');this.$3_4=$p0.getCollectionIDByName('AssetFeatureSpec');this.$3_5=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();this.$3_6=parseInt($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString());var $2=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.$3_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$2.initExactStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $3=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.$3_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C);$3.initBetweenValuesCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.number,P2.PS.AMEREN.CM.AmerenP2Constants.number);var $4=[];$4.add($2);$4.add($3);$p0.getSearchedBusinessViewItemsByObjectType(this.$3_3,$4,ss.Delegate.create(this,function($p1_0){
try{var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=new P2.PS.AMEREN.CM.Events.CompletionJSON();if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)){if($1_0.getPropertyByName('Remarks')!=null){if(!String.isNullOrEmpty($1_0.getPropertyByName('Remarks').toString())){$1_1.instrresp=$1_0.getPropertyByName('CompletedBy').toString();$1_1.instrid=$1_0.getPropertyByName('AssetID').toString();$1_1.value=$1_0.getPropertyByName('Remarks').toString();$1_1.category='Relay';$0.completion.add($1_1);}}}}}catch($1_2){alert($1_2.message);}if($0!=null&&$0.completion.length>0){var $1_3='';if($0.toString()!=null){$1_3=JSON.stringify($0);}$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid',this.$3_2[0]);$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput',$1_3);}if(this.$3_9){this.relayCompleted=true;}this.saveCompletionData();}));$p0.getSearchedBusinessViewItemsByObjectType(this.$3_4,$4,ss.Delegate.create(this,function($p1_0){
try{var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=new P2.PS.AMEREN.CM.Events.CompletionJSON();if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1_0.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)){if($1_0.getPropertyByName('IsSpecUpdated')!=null){if($1_0.getPropertyByName('IsSpecUpdated')){$1_1.mid=$1_0.getPropertyByName('AssetFeatureSpecID').toString();$1_1.value=$1_0.getPropertyByName('SpecValue').toString();$1_1.category='AssetSpec';$0.completion.add($1_1);}}}}}catch($1_2){alert($1_2.message);}if($0!=null&&$0.completion.length>0){var $1_3='';if($0.toString()!=null){$1_3=JSON.stringify($0);}$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid',this.$3_2[0]);$p1.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput',$1_3);}if(this.$3_9){this.$3_7=true;}this.saveCompletionData();this.$3_7=false;this.relayCompleted=false;}));}}}catch($10){$p0.errorLog('Exception From P2.PS.AMEREN.CM.Events.CompletionOutput, class FormEvents_BeforeSaveForm(). Message : '+$10.message);}},completionValidationConfirmation:function(Result,ButtonType){try{if(W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.toString(ButtonType).toLowerCase()==='ok'){var $0='';if(this.$3_2[1].toString()!=null){$0=this.$3_2[1];this.$3_2[1]=$0;}this.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid',this.$3_2[0]);this.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionOutput',this.$3_2[1]);window.localStorage.setItem('CompletionFormEdited',false);this.saveCompletionData();}}catch($1){this.$3_A.errorLog('Exception From P2.PS.AMEREN.CM.Events.CompletionOutput, class CompletionValidationConfirmation(). Message : '+$1.message);}return true;},saveCompletionData:function(){try{if(this.relayCompleted&&this.$3_7&&this.$3_8){this.get_formServices().saveForm();}}catch($0){this.$3_A.errorLog('Exception From P2.PS.AMEREN.CM.Events.CompletionOutput, class SaveCompletionData(). Message : '+$0.message);}},MakeCompletionFormEdited:function(){try{var $0=P2.PS.AMEREN.CM.Events.CompletionOutput.globalFormServices.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();P2.PS.AMEREN.CM.Events.CompletionOutput.globalFormServices.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID','');P2.PS.AMEREN.CM.Events.CompletionOutput.globalFormServices.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID',$0);}catch($1){P2.PS.AMEREN.CM.AmerenP2Constants._globalcontrollerservice.errorLog('Exception From P2.PS.AMEREN.CM.Events.CompletionOutput, class MakeCompletionFormEdited(). Message : '+$1.message);}},ResetAllCompletionVariables:function(){this.$3_7=false;this.relayCompleted=false;this.$3_8=false;}}
P2.PS.AMEREN.CM.Events.CompletionJSON=function(){}
P2.PS.AMEREN.CM.Events.CompletionJSON.prototype={lineno:null,instrresp:null,instrid:null,value:null,units:null,category:null,mid:null}
P2.PS.AMEREN.CM.Events.CompletionJSONList=function(){}
P2.PS.AMEREN.CM.Events.CompletionJSONList.prototype={completion:null}
P2.PS.AMEREN.CM.Events.DisplayPopUpForFieldInitiatedTask=function(controllerServices){this.$2=controllerServices;W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3));}
P2.PS.AMEREN.CM.Events.DisplayPopUpForFieldInitiatedTask.prototype={$0:null,$1:null,$2:null,$3:function($p0,$p1){this.$1=$p1.get_formServices();this.$0=$p1.get_formObject();this.$2=$p0;},showMessageBoxForFieldInitiatedTask:function(){try{var $0='<div class="cm_ui_window_title_inner_surface" id ="testdiv"></div>';this.$2.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
var $1_0=null;if(ss.parseXml($p1_0.getBody())!=null){$1_0=ss.parseXml($p1_0.getBody()).selectNodes('P');var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if($1_1.attributes.getNamedItem('i').nodeValue!=null){if($p1_0.getPropertyName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,parseInt($1_1.attributes.getNamedItem('i').nodeValue))==='Region'){var $1_2=$1_1.text;this.$2.setSharedData('UserRegion',$1_2);}if($p1_0.getPropertyName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,parseInt($1_1.attributes.getNamedItem('i').nodeValue))==='District'){var $1_3=$1_1.text;this.$2.setSharedData('UserDistrict',$1_3);var $1_4=$1_1.text.split(' ');if(($1_4[$1_4.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8)||($1_4[$1_4.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9)||($1_4[$1_4.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA)){this.$2.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB,$1_4[$1_4.length-1]);}this.$2.getDictionaryItems(this.$2.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16),10,ss.Delegate.create(this,function($p2_0){
var $2_0=$($0);var $2_1='';var $2_2='';var $2_3='';var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_5=$enum1.current;if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB)!=null){if($2_5.get_name().toLowerCase()===this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()){$2_2='<option selected ="selected" value='+$2_5.get_name()+'>'+$2_5.get_name()+'</option>';}else{$2_1+='<option value='+$2_5.get_name()+'>'+$2_5.get_name()+'</option>';}}}var $2_4='<div class="W6CMPanel W6CMPropPanelCombo" index="0"><table style="width: 100%">'+'<tbody><tr>'+'<td id="lableContainer" aria-hidden="true">'+'<div class="W6CMPropPanel_LabelPanel W6CMPropPanel_VerticalLabel" style="padding-bottom: 0px; color: rgb(2, 113, 182);">'+'<div objname="W6CMLabelControl"><div id="workGrp" style="overflow:hidden;word-break: break-word;font-weight: bold;font-size:15px; display: inline;">Work Group</div>'+'</div>'+'</div></td>'+'</tr>'+'<tr>'+'<td id="valueContainer"><div id="workGrp" style="display:none">Issue Type</div><div objname="ValuePanel" class="W6CMPropPanel_ValuePanel">'+'<select objname="ComboBoxControl.Value" id="workGrpDropdown">'+$2_1+$2_2+'</select></div></td>'+'</tr>'+'</tbody></table></div>';this.$2.getDictionaryItems(this.$2.getDictionaryIDByName('IssueType'),30,ss.Delegate.create(this,function($p3_0){
$2_3='<option selected ="selected" value='+'none'+'>--None--</option>';var $enum1=ss.IEnumerator.getEnumerator($p3_0);while($enum1.moveNext()){var $3_8=$enum1.current;$2_3+='<option value='+$3_8.getAttribute('FollowOnWorkType').toString().toLowerCase()+'>'+$3_8.get_name()+'</option>';}var $3_0='<div class="W6CMPanel W6CMPropPanelCombo" index="0"><table style="width: 100%">'+'<tbody><tr>'+'<td id="lableContainer" aria-hidden="true">'+'<div class="W6CMPropPanel_LabelPanel W6CMPropPanel_VerticalLabel" style="padding-bottom: 0px; color: rgb(2, 113, 182);">'+'<div objname="W6CMLabelControl"><div id="issueTypes" style="overflow:hidden;word-break: break-word;font-weight: bold;font-size:15px; display: inline;">Issue Type</div>'+'</div>'+'</div></td>'+'</tr>'+'<tr>'+'<td id="valueContainer"><div id="issueTypes" style="display:none">Issue Type</div><div objname="ValuePanel" class="W6CMPropPanel_ValuePanel">'+'<select objname="ComboBoxControl.Value" id="issueTypeDropDown">'+$2_3+'</select></div></td>'+'</tr>'+'</tbody></table></div>';var $3_1=$('<div id='+'ServiceRequest'+' " style="margin-top: 5px;font-size:15px;display: block;"><button type="button" name="btnID" id="'+'ServiceRequest'+'" class="darkBlueButton" style="width:100%;margin-bottom:10px;height:35px;">'+'Create Service Request'+'</button></div>');$3_1.appendTo($2_0);var $3_2=$('<div id='+'CreateTask'+' " style="margin-top: 5px;font-size:15px;display: block;"><button type="button" name="btnID" id="'+'CreateTask'+'" class="darkBlueButton" style="width:100%;margin-bottom:10px;height:35px;">'+'Create Task'+'</button></div>');$3_2.appendTo($2_0);var $3_3=$('<div id='+'Createandcompletetask'+' " style="margin-top: 5px;font-size:15px;display: block;"><button type="button" name="btnID" id="'+'Createandcompletetask'+'" class="darkBlueButton" style="width:100%;margin-bottom:10px;height:35px;">'+'Create and Complete Task'+'</button></div>');$3_3.appendTo($2_0);if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB)!=null){if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9||this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8){$2_0=$($0).append($2_4);$2_0.append($3_1);$2_0.append($3_2);$2_0.append($3_3);}else if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA){$2_0=$($0).append($2_4);$2_0.append($3_0);$2_0.append($3_1);$2_0.append($3_2);$2_0.append($3_3);}}var $3_4=new P2.PS.AMEREN.CM.Events.CreateServiceRequest(this.$2,this.$1,this.$0);var $3_5=new P2.PS.AMEREN.CM.Events.CreateAndCompleteTask(this.$2);var $3_6=new P2.PS.AMEREN.CM.Events.CreateTask(this.$2);var $3_7=new W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowProperties();$3_7.buttons_type=W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.cancel;$3_7.title='Create Task';this.$2.windowCreate(100,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowLevels.normal_mid,$2_0.get(0),$3_7,null,null);if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB)!=null){if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA){$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AC).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).hide();}}$('#'+'ServiceRequest',$3_1).click(ss.Delegate.create($3_4,$3_4.createSR));$('#'+'CreateTask',$3_2).click(ss.Delegate.create($3_6,$3_6.createTaskRequest));$('#'+'Createandcompletetask',$3_3).click(ss.Delegate.create($3_5,$3_5.createEmergentTask));$('#workGrpDropdown',$2_0).change(ss.Delegate.create(this,function($p4_0){
var $4_0=$('#'+$p4_0.target.id).val().toString();this.$2.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B6,$4_0);if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB)!=null){if((this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8)||(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9)){if($4_0.toLowerCase()!==this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()){$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AC).show();}else{$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).show();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).show();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AC).show();}}else if(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA){if($4_0.toLowerCase()!==this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString().toLowerCase()){$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AF).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B0).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AC).show();}else{$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B0).show();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AF).show();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AC).hide();}}}}));$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AF,$2_0).change(ss.Delegate.create(this,function($p4_0){
var $4_0=this.$2.getDictionaryIDByName('IssueType');var $4_1=$('#issueTypeDropDown option:selected').val().toString().toLowerCase().replaceAll('  ','');if($4_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B1||$4_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D1){if($4_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D1){this.$2.setSharedData('SRUpdate','true');}$3_4.createSR($p4_0);}else if($4_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B2){$3_6.createTaskRequest($p4_0);$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).hide();}else if($4_1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B3){$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).hide();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AC).hide();}else{$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AD).show();$(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AE).show();}}));}));}));}}}}}));}catch($1){this.$2.errorLogEx('Error source:: DisplayPopUpForFieldInitiatedTask class',$1);}}}
P2.PS.AMEREN.CM.Events.AfterPropertyChangedTask=function(controllerServices,e){this.$1='';this.$2='';this.$0=controllerServices;this.$3=e.get_formServices();this.$4=e.get_formObject();var $0=new P2.PS.AMEREN.CM.Events.CreateCustomTables();if(e.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38){controllerServices.setSharedData('CurrentTaskStatus',e.get_newValue().toString());window.localStorage.setItem('Status',e.get_newValue().toString());if((e.get_oldValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E&&e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$61)||(e.get_oldValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$62&&e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$61)||(e.get_oldValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$62&&e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$65)){}else if(e.get_oldValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5F&&e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){if(P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired){this.$6(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);}if(P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired){this.$9(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);}}else{if(e.get_oldValue()!=null){this.$1=e.get_oldValue().toString();}if(e.get_newValue()!=null){this.$2=e.get_newValue().toString();}if(e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$62||e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){var $1=controllerServices.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$63);this.dtStart=$0.addDays(Date.get_today(),-2000000000);this.dtEnd=$0.addDays(Date.get_today(),2000000000);controllerServices.getTodaySchedule(this.dtStart,this.dtEnd,ss.Delegate.create(this,this.getAllAssignments));if(e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){var $2=Date.empty;var $3=Date.empty;var $4=Date.empty;if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6,Date.get_now());var $5=null;$5=controllerServices.getFormServices().getOpenFormByType(controllerServices.getCollectionIDByName('Assignment')).get_formObject();$5.setPropertyByName(0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$99,Date.get_now());if(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7)<Date.get_now()||e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7)===Date.get_now()){var $6=new P2.PS.AMEREN.CM.Events.CreateCustomTables();$4=$6.addDays(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6),e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Duration'));$5.setPropertyByName(0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C,$4);e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7,$4);}controllerServices.commitCMObjectUpdate($5);$2=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7);}else{$2=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C);}$3=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A);if($3===Date.empty||$3<$2){e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A,$2);}window.localStorage.setItem('CompletionFormEdited',false);if(P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired){this.$6(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);}if(P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired){this.$9(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);}}}else if(e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5F){if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7,Date.get_now());var $C=null;$C=controllerServices.getFormServices().getOpenFormByType(controllerServices.getCollectionIDByName('Assignment')).get_formObject();$C.setPropertyByName(0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C,Date.get_now());controllerServices.commitCMObjectUpdate($C);}if(controllerServices.isOnline()){controllerServices.externalMaskOnWithText('Checking for Subtask...');}var $7=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();var $8=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString();this.$A($7,$8,'SubTask');if(P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired||P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired){if(!this.orderCompletion(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33)){this.$0.showMessageBox('Complete all the Relays to Complete the order',P2.PS.AMEREN.CM.P2PSAMERENCM$1.$66,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);var $D=this.$0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$64);this.$0.getDictionaryItemsFilterByName($D,this.$1,25,ss.Delegate.create(this,function($p1_0){
this.$3.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$p1_0.get_item(0));}));}else if(!this.orderCompletion(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21)){this.$0.showMessageBox('Complete all the Primavera Activities to Complete the order',P2.PS.AMEREN.CM.P2PSAMERENCM$1.$66,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);var $E=this.$0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$64);this.$0.getDictionaryItemsFilterByName($E,this.$1,25,ss.Delegate.create(this,function($p1_0){
this.$3.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$p1_0.get_item(0));}));}}var $9=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid');var $A=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormURL').toString();var $B="<b style='color: #0271B6;'>&nbsp;&nbsp;&nbsp;&nbsp;Are you sure to Complete the Work Order? </b><br><br>  <I style='color: #0271B6;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If <b>'Yes'</b> please wait for a while<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to complete the saving process...<I>";controllerServices.showMessageBox($B,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B9,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.yes_No,ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_1===W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.yes){if(!this.orderCompletion(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21)){this.$0.showMessageBox('Complete all the Primavera Activities to Complete the order',P2.PS.AMEREN.CM.P2PSAMERENCM$1.$66,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);var $1_0=this.$0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$64);this.$0.getDictionaryItemsFilterByName($1_0,this.$1,25,ss.Delegate.create(this,function($p2_0){
this.$3.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$p2_0.get_item(0));}));}if(($9&&$A!=='CompletionForms/.html')||($A==='CompletionForms/.html')||!$A){this.setCompletedBy(e);e.get_formServices().saveForm();e.get_formServices().closeForm();}else if(!$9&&$A!=='CompletionForms/.html'){this.setCompletedBy(e);e.get_formServices().saveForm();}return true;}else if($p1_1===W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.no){var $1_1=this.$0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$64);this.$0.getDictionaryItemsFilterByName($1_1,this.$1,25,ss.Delegate.create(this,function($p2_0){
this.$3.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$p2_0.get_item(0));}));return true;}return false;}));}else if(e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$65){this.$5();e.get_formServices().saveForm();}else if(e.get_newValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$90&&e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C7,Date.get_now());var $F=null;$F=controllerServices.getFormServices().getOpenFormByType(controllerServices.getCollectionIDByName('Assignment')).get_formObject();$F.setPropertyByName(0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C,Date.get_now());controllerServices.commitCMObjectUpdate($F);e.get_formServices().saveForm();}else{e.get_formServices().saveForm();}}if(e.get_oldValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){if(P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired){this.$7(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);}if(P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired){this.$8(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);}}else if(e.get_oldValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$90){e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8F,'');}else if(e.get_oldValue().toString()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8D){e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8E,'');}}else if(e.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A){var $10=Date.empty;var $11=Date.empty;if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){$10=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C6);}else{$10=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$99)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$99);$11=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C);}var $12=(ss.isNullOrUndefined(e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A)))?Date.empty:e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A);var $13=$0.addDays($11,14400);var $14=this.$4.getPropertyID(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason');if($12>$13){e.get_formServices().setPropertyEnabledByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason',true);$("div[objname='W6CMPropPanelCombo[DelayReason:foreign_Key]']").find('#Asterisk').css('display','inline');}else{e.get_formServices().setPropertyEnabledByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason',false);$("div[objname='W6CMPropPanelCombo[DelayReason:foreign_Key]']").find('#Asterisk').css('display','none');var $15=new W6.ClickMobile.Web.ObjectModel.W6CMDictionaryItem();$15.set_key(-1);e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'DelayReason',$15);$("div[objname='W6CMPropPanelCombo[DelayReason:foreign_Key]'] option[value=-1]").remove();}}else if(e.get_propertyName()==='CompletionOutput'){var $16=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormURL').toString();var $17=window.localStorage.getItem('CompletionData').toString();var $18=window.localStorage.getItem('CompletionFormEdited').toString();if((!!e.get_oldValue().toString()&&e.get_oldValue().toString()!==e.get_newValue().toString()&&$16!=='CompletionForms/.html')||$16!=='CompletionForms/.html'&&$18==='true'&&!e.get_oldValue().toString()){controllerServices.showMessageBox('CompletionForm saved successfully!!!','Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);controllerServices.setSharedData('SID_COMPLETIONFORM_SAVED',false);var $19=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App);if($19){e.get_formServices().saveForm();}}}else if(e.get_propertyName()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29){var $1A=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormValid');var $1B=e.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CompletionFormURL').toString();if(($1A&&$1B!=='CompletionForms/.html')||($1B==='CompletionForms/.html')||!$1B){e.get_formServices().saveForm();}}}
P2.PS.AMEREN.CM.Events.AfterPropertyChangedTask.prototype={dtStart:null,dtEnd:null,$0:null,$3:null,$4:null,getAllAssignments:function(lstAssignments){var $0=false;var $1={};var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $2=$enum1.current;if($2.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)!=null){if($2.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()!==P2.PS.AMEREN.CM.AmerenP2Constants.callid||($2.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()===P2.PS.AMEREN.CM.AmerenP2Constants.callid&&$2.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString()!==P2.PS.AMEREN.CM.AmerenP2Constants.number.toString())){if($2.get_status().get_name()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E||$2.get_status().get_name()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$62){this.$0.showMessageBox(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$67,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$66,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);var $3=this.$0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$64);$0=true;this.$0.getDictionaryItemsFilterByName($3,this.$1,10,ss.Delegate.create(this,function($p1_0){
this.$3.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$p1_0.get_item(0));}));break;}}}}if(!$0){this.$5();this.$3.saveForm();}},$5:function(){var $0=Date.get_now();if(this.$2===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){if(this.$1!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5F){this.$4.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$BE,$0);}if(this.$1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$61){this.$4.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$BD,$0);this.$4.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$BF,$0);}if(this.$3.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'FinishDelayReason')!=null){this.$3.setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'FinishDelayReason','');}}else if(this.$2===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$62){this.$4.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$BF,$0);if(this.$1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$61){this.$4.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$BD,$0);}}else if(this.$2===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$65){this.$4.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$BD,$0);}},$6:function($p0){$('.'+$p0+'_startButton').removeAttr('disabled');$('.'+$p0+'_finishButton').removeAttr('disabled');$('.'+$p0+'_startButton').css('background-color','rgb(2, 113, 182)');$('.'+$p0+'_finishButton').css('background-color','#FF7F50');},$7:function($p0){$('.'+$p0+'_startButton').attr('disabled','disabled');$('.'+$p0+'_finishButton').attr('disabled','disabled');$('.'+$p0+'_startButton').css('background-color','rgb(169,169,169)');$('.'+$p0+'_finishButton').css('background-color','rgb(169,169,169)');},$8:function($p0){$('.'+$p0+'-text').attr('disabled','disabled');$('.'+$p0+'-checkbox').attr('disabled','checkbox');},$9:function($p0){var $0=$('#'+$p0+'-summaryTable > tbody');$('.'+$p0+'-text').removeAttr('disabled');$('tr',$0).each(function($p1_0,$p1_1){
if(!$p1_1.id.indexOf($p0+'-row')){var $1_0=$('#'+$p1_1.id).attr('Name');var $1_1=parseInt($1_0.split('-')[1].substr(3));var $1_2=$('#'+$p1_1.id);var $1_3=$('.'+$p0+'-text',$1_2).val();var $1_4=0;if(!ss.isNullOrUndefined($1_3)){$1_4=$1_3.length;}if($1_4>=2){$('.'+$p0+'-checkbox',$1_2).removeAttr('disabled');}}});},orderCompletion:function(table){var $0=$('#'+table+'-summaryTable > tbody');var $1=0;var $2=0;$('tr',$0).each(function($p1_0,$p1_1){
if(!!$p1_1.id&&$p1_1.id!=null&&!!$p1_1.id){$2=$('#'+table+'-summaryTable > tbody tr').length;var $1_0=$('#'+$p1_1.id).attr('status');if($1_0==='Complete'){$1++;}}});if($2!==$1){return false;}return true;},setCompletedBy:function(e){var $0='';if((window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C1)!=null&&!!window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C1))){$0=window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C1).toString();}if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){e.get_formServices().setUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$0);}else if(e.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task){e.get_formObject().get_parentObject().setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$0);this.$0.commitCMObjectUpdate(e.get_formObject().get_parentObject());}},$A:function($p0,$p1,$p2){this.$0.infoLog('From TriggerSxpToGetDisconnectedObjects');var $0='<SXPServerGetObjects>';if($p2==='SubTask'){$0=$0+'<ObjectType>PV'+$p2+'</ObjectType>';}else{$0=$0+'<ObjectType>'+$p2+'</ObjectType>';}$0=$0+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p0+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$p1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p0+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';if($p2==='SubTask'){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects['PVSubTask']));while($enum1.moveNext()){var $1=$enum1.current;$0=$0+'<Item>'+$1+'</Item>';}}else{var $enum2=ss.IEnumerator.getEnumerator(Object.keys(P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects[$p2]));while($enum2.moveNext()){var $2=$enum2.current;$0=$0+'<Item>'+$2+'</Item>';}}$0=$0+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($0);}}
P2.PS.AMEREN.CM.Events.Timesheet_CalendarInterval=function(){}
P2.PS.AMEREN.CM.Events.Timesheet_CalendarInterval.prototype={day1:null,day1Start:null,day1End:null,day2:null,day2Start:null,day2End:null,day3:null,day3Start:null,day3End:null,day4:null,day4Start:null,day4End:null,day5:null,day5Start:null,day5End:null,day6:null,day6Start:null,day6End:null,day7:null,day7Start:null,day7End:null}
P2.PS.AMEREN.CM.Events.CreateAndCompleteTask=function(controllerServ){this.$7=[];this.$4=controllerServ;W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$10));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$8));}
P2.PS.AMEREN.CM.Events.CreateAndCompleteTask.prototype={$0:null,$1:null,ev:null,$3:false,$4:null,$5:null,$6:null,$8:function($p0,$p1){if($p1.get_formObject().get_objectType()===this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('TaskStatus'),'On Hold',10,ss.Delegate.create(this,function($p1_0){
this.$5=$p1_0.get_item(0);}));var $0=(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3)==null)?'':this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3).toString();if($0===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B8){this.$1=$p1.get_formServices();this.$0=$p1.get_formObject();this.$4=$p0;this.$6=Date.get_now();this.$4.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,this.$6.toString());$p1.get_formServices().setUIPropertyValueByName('FUWStart',Date.get_now());$p1.get_formServices().setUIPropertyValueByName('FUWOpenDate',Date.get_now());var $1=(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB)==null)?'':this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString();var $2=(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B6)==null)?'':this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B6).toString();var $3=(!$2)?$1:$2;this.$4.getDictionaryItemsFilterByName(this.$4.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16),$3,1,function($p1_0){
$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,$p1_0.get_item(0));});if(this.$4.getSharedData('UserDistrict')!=null&&this.$4.getSharedData('UserRegion')!=null){this.$4.getDictionaryItemsFilterByName(this.$4.getDictionaryIDByName('Region'),this.$4.getSharedData('UserRegion').toString(),1,ss.Delegate.create(this,function($p1_0){
$p1.get_formServices().setUIPropertyValueByNameEx(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),'FUWRegion',$p1_0.get_item(0));}));this.$4.getDictionaryItemsFilterByName(this.$4.getDictionaryIDByName('District'),this.$4.getSharedData('UserDistrict').toString(),1,ss.Delegate.create(this,function($p1_0){
$p1.get_formServices().setUIPropertyValueByNameEx(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),'FUWDistrict',$p1_0.get_item(0));}));}$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0.get_key()!==-1){var $1_0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(8,'Engineer',null);$1_0.set_mobileKey($p1_0.get_mobileKey());$1_0.set_key($p1_0.get_key());var $1_1=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($p1_0.get_key(),$p1_0.get_mobileKey(),null,$1_0);$p1.get_formServices().setUIPropertyValueByName('FUWEngineer',$1_1);if($p1_0.getPropertyByName('LoginName')!=null){var $1_2=$p1_0.getPropertyByName('LoginName').toString();$p1.get_formServices().setUIPropertyValueByName('CreatedByID',$1_2);}if($p1_0.getPropertyByName('District')!=null){var $1_3=$p1_0.getPropertyByName('District').toString();var $1_4=this.$4.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6F);this.$4.getDictionaryItemsFilterByName($1_4,$1_3,50,function($p2_0){
if($p2_0.get_item(0)!=null){var $2_0=ss.parseXml($p2_0.get_item(0).get_body());var $2_1=$2_0.selectSingleNode('State').text;$p1.get_formServices().setUIPropertyValueByName('FUWState',$2_1);}});}}}));}}},createEmergentTask:function(e){try{this.$4.getBusinessViewServices().getAllBusinessViewItemsByObjectType(this.$4.getCollectionIDByName('CrewAllocation'),ss.Delegate.create(this,function($p1_0){
this.$4.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7,$p1_0);}));this.$4.windowClose(100);var $0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2,null);$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3,true);$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B5,false);this.$4.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3,true);this.$4.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14,false);this.$4.setSharedData('PARENT_ASSIGNMENT_KEY','');this.$4.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0.get_key()!==-1){this.$4.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6,$p1_0);}}));var $1=(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1)==null)?'':this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).toString();if($1.indexOf(':')>=0){var $2=new Array(2);$2=$1.split(':');if($2[0]===$2[1]){$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$2[0]);$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,'');}else{$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$2[1]);$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$2[0]);}}else{$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$1);}$0.setPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4,this.$4.guidGenerator());this.$4.openFormByObject($0,true,null,null);}catch($3){this.$4.errorLogEx('Error source:: CreateAndCompleteTask class',$3);}},$9:function($p0,$p1){this.ev=$p1;try{if($p1.get_formServices().validateFormEx()){var $0=($p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14)==null)?'':$p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14).toString();var $1=($p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3)==null)?'':$p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3).toString();if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)&&$1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B8&&$0===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B7&&!this.$3){$p1.cancel=true;$p0.showMessageBox(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B9,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok_Cancel,ss.Delegate.create(this,this.$A));}}}catch($2){this.$4.errorLogEx('Error source:: CreateAndCompleteTask class-BeforeSaveFormCreateandCompleteTask',$2);}},$A:function($p0,$p1){try{if(W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.toString($p1).toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.ok){this.$3=true;var $0=this.ev.get_formServices().getUIPropertyValueByNameEx(this.$4.getCollectionIDByName('FollowUpWork'),'FUWAttachments');if($0.get_count()>0){this.$4.setSharedData('SID_FollowUpKey_EmergentTask',this.ev.get_formObject().get_mobileKey());}else{this.$1.setUIPropertyValueByNameEx(this.$4.getCollectionIDByName('FollowUpWork'),'IsTaskCompleted',true);}if(this.$C(Date.get_now()).toString()===this.$C(this.$6).toString()){this.$1.setUIPropertyValueByNameEx(this.$4.getCollectionIDByName('FollowUpWork'),'FUWFinish',this.$D(Date.get_now(),60));}else{this.$1.setUIPropertyValueByNameEx(this.$4.getCollectionIDByName('FollowUpWork'),'FUWFinish',Date.get_now());}this.$E();this.$B();this.$F(this.ev);}return true;}catch($1){return false;}},$B:function(){var $0;var $1;$0=this.$D(Date.get_today(),-2000000000);$1=this.$D(Date.get_today(),2000000000);this.$4.getTodaySchedule($0,$1,ss.Delegate.create(this,this.getAllAssignments));},$C:function($p0){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes());},$D:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);},getAllAssignments:function(lstAssignments){var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status').toString();if($1==='Arrived'){$0.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Status',this.$5);this.$4.commitCMObjectUpdate($0);}}},$E:function(){this.$4.getBusinessViewServices().getAllBusinessViewItemsByObjectType(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13),ss.Delegate.create(this,function($p1_0){
if($p1_0.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;if($1_0.getPropertyByName(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D)==null){$1_0.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,new Date(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8).toString()));this.$4.commitCMObjectUpdate($1_0);}}}}));},$F:function($p0){try{this.$4.windowClose(100);var $0=this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2);var $1=this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);var $2=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();if($1.getPropertyByName('Key')!=null){this.$4.getBusinessViewServices().getAllBusinessViewItemsByObjectType(this.$4.getCollectionIDByName('CrewAllocation'),ss.Delegate.create(this,function($p1_0){
if($p1_0!=null){if(!!$p1_0.get_count()){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8)!=null){var $1_2=$1_1.getPropertyByName('StartTime').toString();var $1_3=Date.parseDate($1_2);var $1_4=$1_1.getPropertyByName('FinishTime').toString();var $1_5=Date.parseDate($1_4);if(($1_3<=Date.parseDate(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8).toString())&&$1_5>=Date.get_now())){$2.add($1_1);}}}}}var $1_0=null;if($2!=null&&$2.get_count()>0){this.$4.getDictionaryItemsFilterByName(this.$4.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$78),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$79,1,ss.Delegate.create(this,function($p2_0){
this.$4.getDictionaryItemsFilterByName(this.$4.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7A,1,ss.Delegate.create(this,function($p3_0){
var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3_0=$enum1.current;var $3_1=$3_0.getPropertyByName(this.$4.getCollectionIDByName('CrewAllocation'),'AllocatedResource');if(!this.$7.contains($3_1.get_displayString())){this.$7.add($3_1.get_displayString());var $3_2=this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $3_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$4.guidGenerator());$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,$3_1);$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7B,$3_1.get_displayString());if(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8)!=null){$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,new Date(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8).toString()));$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,Date.get_now());$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(Date.get_now().getMinutes()-new Date(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8).toString()).getMinutes()));}$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p3_0.get_item(0));var $3_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$3_4.set_mobileKey('');$3_4.set_key($1.get_key());var $3_5=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($1.get_key(),this.$4.guidGenerator(),null,$3_4);$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$3_5);$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$78,$p2_0.get_item(0));this.$4.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($3_3);if($p0.get_formObject().get_objectType()===$0){var $3_6=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($3_3.get_key(),$3_3.get_mobileKey(),'Activity_SO',$3_3);if($1_0==null){$1_0=new W6.ClickMobile.Web.ObjectModel.W6CMMultiValueOfLinkedBusinessObject($3_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$11,$3_2);$1_0.add($3_6);}else{$1_0.add($3_6);}}}}this.$7=null;$p0.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$11,$1_0);this.$4.setSharedData('Timesheet_FollowUpKey',$p0.get_formObject().get_mobileKey());$p0.get_formServices().saveForm();}));}));}else if($2==null||!$2.get_count()){var $1_6=null;this.$4.getDictionaryItemsFilterByName(this.$4.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$78),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$79,1,ss.Delegate.create(this,function($p2_0){
this.$4.getDictionaryItemsFilterByName(this.$4.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7A,1,ss.Delegate.create(this,function($p3_0){
var $3_0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$3_0.set_mobileKey('');$3_0.set_key($1.get_key());var $3_1=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($1.get_key(),this.$4.guidGenerator(),null,$3_0);if(!this.$7.contains($3_1.get_displayString())){this.$7.add($3_1.get_displayString());var $3_2=this.$4.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $3_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$78,$p2_0.get_item(0));$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p3_0.get_item(0));if(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8)!=null){$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,new Date(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8).toString()));$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,Date.get_now());$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(Date.get_now().getMinutes()-new Date(this.$4.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8).toString()).getMinutes()));}$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$4.guidGenerator());$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,$3_1);$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$3_1);$3_3.setPropertyByName($3_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7B,$3_1.get_displayString());this.$4.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($3_3);if($p0.get_formObject().get_objectType()===$0){var $3_4=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($3_3.get_key(),$3_3.get_mobileKey(),'Activity_SO',$3_3);$1_6=new W6.ClickMobile.Web.ObjectModel.W6CMMultiValueOfLinkedBusinessObject($3_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$11,$3_2);$1_6.add($3_4);}}this.$7=null;$p0.get_formServices().setUIPropertyValueByNameEx($0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$11,$1_6);this.$4.setSharedData('Timesheet_FollowUpKey',$p0.get_formObject().get_mobileKey());$p0.get_formServices().saveForm();}));}));}}));}}catch($3){this.$7=null;this.$4.errorLogEx($3.message,$3);}},$10:function($p0,$p1){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$8));}}
P2.PS.AMEREN.CM.Events.CreateServiceRequest=function(controllerServ,formServ,formObj){this.$3_4='';this.$3_5='';this.$3_6='';this.$3_7='';this.$3_8='';P2.PS.AMEREN.CM.Events.CreateServiceRequest.initializeBase(this);this.$3_1=formObj;this.$3_2=formServ;this.controllerServices=controllerServ;}
P2.PS.AMEREN.CM.Events.CreateServiceRequest.prototype={$3_0:0,$3_1:null,$3_2:null,$3_3:0,createSR:function(e){try{this.controllerServices.windowClose(100);W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$3_C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$3_D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$3_9));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$3_A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$3_B));var $0=null;this.$3_0=this.controllerServices.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);$0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$3_0,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15,null);$0.setPropertyByName('Name',this.controllerServices.guidGenerator());$0.setPropertyByName('IsStandAlone',true);this.controllerServices.openFormByObject($0,true,null,null);}catch($1){this.controllerServices.errorLogEx($1.message,$1);}},$3_9:function($p0,$p1){},$3_A:function($p0,$p1){try{var $0=$p0.getCollectionIDByName('ServiceRequest');if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('ServiceRequest')){var $1=($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80)==null)?'':$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80).toString();if($1==='Record Updates'||$1==='Asset Creation'){var $3='';if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString())){$3+='AssetDescription: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$83).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString())){$3+='circuitNumber: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$85).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString())){$3+='inServiceDate: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8C).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString())){$3+='manufacturer: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$86).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString())){$3+='manufacturerModel: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$87).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString())){$3+='manufactureDate: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$92).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString())){$3+='serialNumber: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$88).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('DivisionOC')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('DivisionOC').toString())){$3+='DivisionOC: '+$p1.get_formServices().getUIPropertyValueByName('DivisionOC').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString())){$3+='parentLocation: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$95).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A).toString())){$3+='locationDescription: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8A)+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString())){$3+='substationName: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$96).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('RegionDistrict')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('RegionDistrict').toString())){$3+='RegionDistrict: '+$p1.get_formServices().getUIPropertyValueByName('RegionDistrict').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString())){$3+='AssetUpdateComments: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString()+',';}$p1.get_formServices().setUIPropertyValueByNameEx($0,'ServiceRequestComments',$3.remove($3.length-1));}else if($1==='Construction'){var $4='';if($p1.get_formServices().getUIPropertyValueByName('EquipmentType')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('EquipmentType').toString())){$4+='EquipmentType: '+$p1.get_formServices().getUIPropertyValueByName('EquipmentType').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString())){$4+='Location: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89).toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('Position')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('Position').toString())){$4+='Position: '+$p1.get_formServices().getUIPropertyValueByName('Position').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName('Phase')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('Phase').toString())){$4+='Phase: '+$p1.get_formServices().getUIPropertyValueByName('Phase').toString()+',';}if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84)!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString())){$4+='Comments: '+$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$84).toString()+',';}$p1.get_formServices().setUIPropertyValueByNameEx($0,'ServiceRequestComments',$4.remove($4.length-1));}var $2=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName('ServiceRequest'),'Attachments');if($2.get_count()>0){$p0.setSharedData('SID_SRKey',$p1.get_formObject().get_mobileKey());}else{$p1.get_formServices().setUIPropertyValueByNameEx($0,'IsTaskCompleted',true);}}}catch($5){this.controllerServices.errorLogEx('Error source:: CreateServiceRequest/FormEvents_BeforeSaveForm()',$5);}},$3_B:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15)){$p1.get_formServices().closeForm();}},$3_C:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15)){var $0=($p0.getSharedData('UserBusinessLine')==null)?'':$p0.getSharedData('UserBusinessLine').toString();var $1=($p0.getSharedData('SelectedBusinessLine')==null)?'':$p0.getSharedData('SelectedBusinessLine').toString();var $2=(!$1)?$0:$1;switch($p1.get_propertyName()){case 'ServiceRequestType':$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'WorkType','');$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','');var $3=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);var $4=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15),'ServiceRequestType');if($4!=null){if($4.toString()==='Record Updates'||$4.toString()==='Corrective'||$4.toString()==='Construction'){var $5=(this.controllerServices.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1)==null)?'':this.controllerServices.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).toString();if($5.indexOf(':')>=0){var $6=new Array(2);$6=$5.split(':');if($6[0]===$6[1]){$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$6[0]);$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,'');}else{$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$6[1]);$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$6[0]);}}else{$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$5);}$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,$2.toUpperCase());}else{$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,'');$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,'');$p1.get_formServices().setUIPropertyValueByNameEx($3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,$2.toUpperCase());}this.$3_4=$p1.get_formServices().getUIPropertyValueByNameEx(this.$3_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$71).toString();this.$3_5=$p1.get_formServices().getUIPropertyValueByNameEx(this.$3_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16).toString();switch(this.$3_4){case 'Construction':if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','IL-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','MO-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','IL-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','MO-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','TRNS-EL');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','TRNS-EL');}break;case 'Corrective':if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72.toUpperCase()){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'WorkType','REL-REPAIR');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73.toUpperCase()){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'WorkType','SUB-REPAIR');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74.toUpperCase()){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'WorkType','XMSNLINE-REPAIR');}break;case 'Asset Creation':if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','IL-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','MO-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','IL-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','MO-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','TRNS-EL');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','TRNS-EL');}break;case 'Record Updates':if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','IL-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$72.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','MO-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','IL-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$73.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','MO-SUB');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$75){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','TRNS-EL');}else if(this.$3_5===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$74.toUpperCase()&&this.$3_6===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$76){$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'SiteID','TRNS-EL');}break;}}break;}}},$3_D:function($p0,$p1){this.$3_3=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$15);if($p1.get_formObject().get_objectType()===this.$3_3){$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('ID')!=null){var $1_0=$p1_0.getPropertyByName('ID').toString();$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,'CreatedBy',$1_0);}if($p1_0.getPropertyByName('District')!=null){var $1_1=$p1_0.getPropertyByName('District').toString();var $1_2=$1_1.split(' ');this.$3_5=$1_2[$1_2.length-1];var $1_3=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6F);$p0.getDictionaryItemsFilterByName($1_3,$1_1,50,ss.Delegate.create(this,function($p2_0){
if($p2_0.get_item(0)!=null){var $2_0=ss.parseXml($p2_0.get_item(0).get_body());this.$3_6=$2_0.selectSingleNode('State').text;var $2_1=($p0.getSharedData('SRUpdate')==null)?'':$p0.getSharedData('SRUpdate').toString();if(!!$2_1&&$2_1.toLowerCase()==='true'){$p0.setSharedData('SRUpdate','');$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('ServiceRequestType'),'Record Updates',10,ss.Delegate.create(this,function($p3_0){
$p1.get_formServices().setUIPropertyValueByNameEx(this.$3_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$80,$p3_0.get_item(0));}));}}}));}}));}}}
P2.PS.AMEREN.CM.Events.CreateTask=function(controllerServ){this.$2=controllerServ;W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$6));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$7));}
P2.PS.AMEREN.CM.Events.CreateTask.prototype={$0:null,$1:null,$2:null,ev:null,$3:false,$4:null,createTaskRequest:function(e){try{this.$2.windowClose(100);var $0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2,null);$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14,true);$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B5,false);this.$2.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14,true);this.$2.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3,false);this.$2.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0.get_key()!==-1){this.$2.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6,$p1_0);}}));var $1=(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1)==null)?'':this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).toString();if($1.indexOf(':')>=0){var $2=new Array(2);$2=$1.split(':');if($2[0]===$2[1]){$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$2[0]);$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,'');}else{$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$2[1]);$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$89,$2[0]);}}else{$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$1);}$0.setPropertyByName(this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4,this.$2.guidGenerator());this.$2.openFormByObject($0,true,null,null);}catch($3){this.$2.errorLogEx('Error source:: CreateTask class',$3);}},$5:function($p0,$p1){if($p1.get_formObject().get_objectType()===this.$2.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)){var $0=(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14)==null)?'':this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14).toString();if($0===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B8){this.$1=$p1.get_formServices();this.$0=$p1.get_formObject();this.$2=$p0;var $1=(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB)==null)?'':this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AB).toString();var $2=(this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B6)==null)?'':this.$2.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B6).toString();var $3=(!$2)?$1:$2;this.$4=Date.get_now();$p1.get_formServices().setUIPropertyValueByName('FUWStart',Date.get_now());this.$2.getDictionaryItemsFilterByName(this.$2.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16),$3,1,function($p1_0){
$p1.get_formServices().setUIPropertyValueByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$16,$p1_0.get_item(0));});$p0.getLoggedInEngineer(function($p1_0){
if($p1_0.get_key()!==-1){var $1_0=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(8,'Engineer',null);$1_0.set_mobileKey($p1_0.get_mobileKey());$1_0.set_key($p1_0.get_key());var $1_1=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($p1_0.get_key(),$p1_0.get_mobileKey(),null,$1_0);$p1.get_formServices().setUIPropertyValueByName('FUWEngineer',$1_1);}});}}},$6:function($p0,$p1){this.ev=$p1;if($p1.get_formServices().validateFormEx()){var $0=($p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14)==null)?'':$p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14).toString();var $1=($p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3)==null)?'':$p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3).toString();if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2)&&$0===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B8&&$1===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B7&&!this.$3){$p1.cancel=true;$p0.showMessageBox(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B9,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok_Cancel,ss.Delegate.create(this,this.$8));}}},$7:function($p0,$p1){$p1.get_formServices().closeForm();},$8:function($p0,$p1){if(W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.toString($p1).toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.ok){var $0=this.ev.get_formServices().getUIPropertyValueByNameEx(this.$2.getCollectionIDByName('FollowUpWork'),'FUWAttachments');if($0.get_count()>0){this.$2.setSharedData('SID_FollowUpKey_CreateTask',this.ev.get_formObject().get_mobileKey());}else{this.$1.setUIPropertyValueByNameEx(this.$2.getCollectionIDByName('FollowUpWork'),'IsTaskCompleted',true);}this.$3=true;if(this.$9(Date.get_now()).toString()===this.$9(this.$4).toString()){this.$1.setUIPropertyValueByNameEx(this.$2.getCollectionIDByName('FollowUpWork'),'FUWFinish',this.$A(Date.get_now(),60));}else{this.$1.setUIPropertyValueByNameEx(this.$2.getCollectionIDByName('FollowUpWork'),'FUWFinish',Date.get_now());}this.ev.get_formServices().saveForm();}return true;},$9:function($p0){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes());},$A:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);},$B:function($p0,$p1){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_beforeSaveForm(ss.Delegate.create(this,this.$6));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterOpenForm(ss.Delegate.create(this,this.$5));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().remove_afterSaveForm(ss.Delegate.create(this,this.$7));}}
P2.PS.AMEREN.CM.Events.ObjRetrievalSupervisor=function(settings){this.$8=new P2.PS.AMEREN.CM.Events.CreateCustomTables();this.$A={};this.$B={};this.$C={};this.$D={};this.$E={};this.$F={};W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterMsgProcessed(ss.Delegate.create(this,this.$22));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_businessViewEvents().add_afterReceivedAndStored(ss.Delegate.create(this,this.$1B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterCommitObject(ss.Delegate.create(this,this.$1A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeCommitObject(ss.Delegate.create(this,this.$19));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_wrappedCustomSXPResultReceived(ss.Delegate.create(this,this.$1C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterObjectUpdateReceivedWithValidMCR(ss.Delegate.create(this,this.$16));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$15));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$12));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySyncSessionCompleted(ss.Delegate.create(this,this.$1F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySync(ss.Delegate.create(this,this.$11));this.$9=ss.parseXml(settings);this.$14(this.$9);}
P2.PS.AMEREN.CM.Events.ObjRetrievalSupervisor.prototype={$0:null,$1:0,$2:0,$3:0,$4:0,$5:0,$6:0,$7:false,$9:null,$10:null,$11:function($p0,$p1){if($p1.get_dictionaryID()===56){this.$10={};$p0.getDictionaryItems($p1.get_dictionaryID(),1700,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=ss.parseXml($1_0.get_body());var $1_2=$1_1.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;this.$10[$1_0.get_key()]=$1_2;}$p0.getBusinessViewServices().getAllBusinessViewItemsByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,ss.Delegate.create(this,function($p2_0){
var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;this.$1D($2_0);}}));}));}},$12:function($p0,$p1){this.$0=$p0;if(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.AmerenP2Constants.callid+'_'+P2.PS.AMEREN.CM.AmerenP2Constants.number.toString()+'_MeterHistoryData'))){this.getMeterHistoryData();}else{this.$13();}},$13:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad);var $0=$('.doc-info');var $1=$('div:contains(No Completion Form Required)');var $2=$('div:contains(Error in loading Completion Form)');if(!$0.length&&!$1.length&&!$2.length){P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad=window.setInterval(ss.Delegate.create(this,this.$13),2000);}else if(!$0.length&&($1.length>0||$2.length>0)){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad);}else if($0.length>0){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad);setMeterHistoryValues(JSON.parse(window.localStorage.getItem(P2.PS.AMEREN.CM.AmerenP2Constants.callid+'_'+P2.PS.AMEREN.CM.AmerenP2Constants.number.toString()+'_MeterHistoryData')));}},getMeterHistoryData:function(){try{var $dict1=this.$B['MeterHistory'];for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};this.$E[$2.key]=$2.value;}this.$5=this.$0.getCollectionIDByName('MeterHistory');var $0=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.$5,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$0.initStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $1=[];$1.add($0);this.$0.getSearchedBusinessViewItemsByObjectType(this.$5,$1,ss.Delegate.create(this,function($p1_0){
if($p1_0!=null&&$p1_0.get_count()>0){var $1_0='';var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_1.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()&&P2.PS.AMEREN.CM.AmerenP2Constants.number===parseInt($1_1.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString())){var $dict2=this.$E;for(var $key3 in $dict2){var $1_3={key:$key3,value:$dict2[$key3]};if($1_3.key===P2.PS.AMEREN.CM.AmerenP2Constants.meterID){$1_0=$1_1.getPropertyByName($1_3.key).toString();}this.$E[$1_3.key]=($1_1.getPropertyByName($1_3.key)==null)?'':$1_1.getPropertyByName($1_3.key).toString();}var $1_2={};var $dict4=this.$E;for(var $key5 in $dict4){var $1_4={key:$key5,value:$dict4[$key5]};$1_2[$1_4.key]=$1_4.value;}this.$D[$1_0]=$1_2;}}setMeterHistoryValues(this.$D);}}));}catch($3){this.$0.errorLog('Exception from P2.PS.AMEREN.CM.Events.ObjRetrievalSupervisor.GetMeterHistoryData '+$3.message);}},$14:function($p0){var $0=$p0.selectNodes('//DisconnectedObjects/Object');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.selectNodes('Property');var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $4=$enum2.current;this.$A[$4.selectSingleNode('PropertyName').text]=$4.selectSingleNode('PropertyType').text;}var $3={};var $dict3=this.$A;for(var $key4 in $dict3){var $5={key:$key4,value:$dict3[$key4]};$3[$5.key]=$5.value;}this.$B[$1.selectSingleNode('Name').text]=$3;P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects[$1.selectSingleNode('Name').text]=$3;Object.clearKeys(this.$A);}},$15:function($p0,$p1){this.$0=$p0;},$16:function($p0,$p1){},$17:function($p0,$p1){var $0=new P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable(P2.PS.AMEREN.CM.AmerenP2Constants.formServices);var $1=[];var $2=[];var $3=null;var $enum1=ss.IEnumerator.getEnumerator(window.localStorage.getItem($p0+'_headingList').toString().split(','));while($enum1.moveNext()){var $8=$enum1.current;$1.add($8);}var $enum2=ss.IEnumerator.getEnumerator(window.localStorage.getItem($p0+'_propertyList').toString().split(','));while($enum2.moveNext()){var $9=$enum2.current;$2.add($9);}$('#'+$p0+'-SortAndFilterDiv').children().remove();$('#'+$p0+'-SummaryTableDiv').children().remove();$('#'+$p0+'-summaryTable').remove();$('#'+$p0+'-sortDivision').remove();var $4=(ss.isNullOrUndefined(window.localStorage.getItem($p0+'_sortPropertyStr')))?'':window.localStorage.getItem($p0+'_sortPropertyStr').toString();var $5=$0.createSortButton($p0,$4);var $6=$0.createFilter($1,$p0);$('#'+$p0+'-SortAndFilterDiv').append($5);$6.insertAfter('#'+$p0+'-sortDivision');switch($p0){case 'PVSubTask':$3=$0.createTableWithStartFinishCompleteButtonsWithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sortWithStartFinishCompeteButtonClick($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'_startButton').click(function($p1_0){
$0.startFinishCompeteButtonClick($p1_0);});$('.'+$p0+'_finishButton').click(function($p1_0){
$0.startFinishCompeteButtonClick($p1_0);});$('.'+$p0+'_completeButton').click(function($p1_0){
$0.startFinishCompeteButtonClick($p1_0);});$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$18($p1_0,$p0,this.$1);}));break;case 'Material':$3=$0.createTable_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sort($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$18($p1_0,$p0,this.$3);}));break;case 'AssetFeatureSpec':$3=$0.createTable_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sort($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$18($p1_0,$p0,this.$4);}));break;case 'MeterHistory':$3=$0.createTable_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sort($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$18($p1_0,$p0,this.$5);}));break;case 'RelayInspection':var $7=P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getTabTitles();for(var $A=0;$A<P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getTabsCount();$A++){if($7[$A]===P2.PS.AMEREN.CM.AmerenP2Constants.relayTabHeading){P2.PS.AMEREN.CM.AmerenP2Constants.formServices.setTabVisibility($A,true);}}$3=$0.createTableWithCheckBox_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sortWithThreeAtrr($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-checkbox').change(function($p1_0){
$0.checkBoxClick($p1_0);});$('.'+$p0+'-text').keyup(function($p1_0){
$0.textBoxChange($p1_0);});$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$18($p1_0,$p0,this.$2);}));break;}},$18:function($p0,$p1,$p2){var $0='';var $1=0;var $2='';var $3='';var $4;switch($p1){case 'PVSubTask':$1=parseInt($p0.target.id.split('_')[1]);var $5='';var $6='';var $7='';var $8='';var $9;if($('#'+$p1+'-Data-Status_'+$1).text()!=null){$5=$('#'+$p1+'-Data-Status_'+$1).text().toString();}if($('#'+$p1+'-Data-ActualFinishDateTime_'+$1).text()!=null){$6=$('#'+$p1+'-Data-ActualFinishDateTime_'+$1).text().toString();}if($('#'+$p1+'-Data-ActualStartDateTime_'+$1).text()!=null){$8=$('#'+$p1+'-Data-ActualStartDateTime_'+$1).text().toString();}if($('#'+$p1+'-Data-EstimatedFinishDateTime_'+$1).text()!=null){$7=$('#'+$p1+'-Data-EstimatedFinishDateTime_'+$1).text().toString();}$2=$('#'+$p1+'-SummaryDataCol_'+$1).attr('Key');$9=[];$9.add($5);$9.add($6);$9.add($8);$9.add($7);$9.add($1.toString());$9.add($p1);$0=JSON.stringify($9);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39,$0);break;case 'RelayInspection':$1=parseInt($p0.target.id.split('_')[1]);$3='';var $A='';var $B='';if($('#'+$p1+'-text'+$1).text()!=null){$A=$('#'+$p1+'-text'+$1).text().toString();}if($('#'+$p1+'-SummaryDataCol_'+$1).text()!=null){$B=$('#'+$p1+'-SummaryDataCol_'+$1).text().toString();}$2=$('#'+$p1+'-SummaryDataCol_'+$1).attr('Key');var $C=[];$C.add($('#'+$p1+'-checkBoxField_'+$1).text().toString());$C.add($A);$C.add($1.toString());$C.add($B);$C.add(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);$0=JSON.stringify($C);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,$0);break;default:$1=parseInt($p0.target.id.split('_')[1]);var $D=$p0.target.id.toString().split('-')[0];$4={};$4[P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4F]=$D;var $E=$('#'+$D+'-row'+$1);$('span',$E).each(function($p1_0,$p1_1){
if(!$p1_1.id.indexOf($D+'-Data')){var $1_0=$('#'+$p1_1.id).parent();var $1_1=$1_0.attr('name');var $1_2=$1_1.split('-')[1].split('_')[0];if($('#'+$p1_1.id).text()!=null){$3=$('#'+$p1_1.id).text().toString();}$4[$1_2]=$3;}});$4[P2.PS.AMEREN.CM.P2PSAMERENCM$1.id]=$1.toString();$0=JSON.stringify($4);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E,$0);$2=$('#'+$p1+'-SummaryDataCol_'+$1).attr('Key');break;}this.$0.openFormByKey($p2,parseInt($2),false,null);},getDateObject:function(dateTime){if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}else{return Date.empty;}}else{return Date.empty;}},$19:function($p0,$p1){},$1A:function($p0,$p1){},$1B:function($p0,$p1){},$1C:function($p0,$p1){this.$0.externalMaskOff();var $0=(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C2)))?'':window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C2).toString();var $1='';if(!String.isNullOrEmpty($0)){$1='clickmobiledb'+$0.toLowerCase();}this.$1=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);this.$2=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);this.$3=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$44);this.$4=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$59);this.$5=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$52);if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$22).length>0){try{var $2='PVSubTask';var $3='';var $4=0;var $5=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $enum1=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$22));while($enum1.moveNext()){var $6=$enum1.current;var $7=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23).text;var $8=parseInt($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$3=$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;var $9=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;$4=parseInt($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $A=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).text==='0')?false:true;var $B=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26).text;var $C=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27).text;var $D=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A).text;var $E=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B).text;var $F=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D).text;var $10=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $11=($6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$6.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).text;var $12=$6.xml;var $13=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$13=true;if($13){var $14=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21,null);$14.set_key($8);$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$3);$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$4);$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,$A);$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($B));$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($C));$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($D));$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B,this.getDateObject($E));$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D,this.getDateObject($F));$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$10);$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$11);$14.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23,$7);this.$0.commitCMObjectUpdate($14);}else{insertIntoTable('W6CMPVSubTask',$1,$8,$10,$12,$3,$4);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$3&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$4){var $15=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21,null);$15.set_key($8);$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$3);$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$4);$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,$A);$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($B));$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($C));$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($D));$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B,this.getDateObject($E));$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D,this.getDateObject($F));$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$10);$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$11);$15.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23,$7);$5.add($15);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$3&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$4){this.$17($2,$5);}}catch($16){this.$0.errorLog($16.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$34).length>0){try{var $17=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $18='RelayInspection';var $19='';var $1A=0;var $enum2=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$34));while($enum2.moveNext()){var $1B=$enum2.current;var $1C=parseInt($1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$19=$1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;$1A=parseInt($1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $1D=$1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29).text;var $1E=$1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $1F=$1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$35).text;var $20=$1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37).text;var $21=($1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).text==='0')?false:true;var $22=$1B.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).text;var $23=$1B.xml;var $24=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$24=true;if($24){var $25=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33,null);$25.set_key($1C);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$19);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$1A);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$22);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$1D);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$1E);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$35,$1F);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37,$20);$25.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,$21);this.$0.commitCMObjectUpdate($25);}else{insertIntoTable('W6CMRelayInspection',$1,$1C,$1E,$23,$19,$1A);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$19&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1A){var $26=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33,null);$26.set_key($1C);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$19);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$1A);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$22);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$1D);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$1E);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$35,$1F);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37,$20);$26.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,$21);$17.add($26);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$19&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$1A){this.$17($18,$17);}}catch($27){this.$0.errorLog($27.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$46).length>0){try{var $28=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $29='Material';var $2A='';var $2B=0;var $enum3=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$46));while($enum3.moveNext()){var $2C=$enum3.current;var $2D=parseInt($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$2A=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;var $2E=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;$2B=parseInt($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $2F=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47).text;var $30=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48).text;var $31=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49).text;var $32=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$45)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$45).text;var $33=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $34=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A).text;var $35=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B).text;var $36=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A).text;var $37=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D).text;var $38=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C).text;var $39=($2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E)==null)?'':$2C.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E).text;var $3A=$2C.xml;var $3B=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$3B=true;if($3B){var $3C=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$44,null);$3C.set_key($2D);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$2A);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$2B);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47,$2F);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48,$30);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49,$31);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$45,$32);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$33);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A,$34);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B,$35);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A,$36);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D,$37);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C,$38);$3C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E,$39);this.$0.commitCMObjectUpdate($3C);}else{insertIntoTable('W6CMMaterial',$1,$2D,$33,$3A,$2A,$2B);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$2A&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$2B){var $3D=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$44,null);$3D.set_key($2D);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$2A);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$2B);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47,$2F);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48,$30);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49,$31);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$45,$32);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$33);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A,$34);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B,$35);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A,$36);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D,$37);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C,$38);$3D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E,$39);$28.add($3D);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$2A&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$2B){this.$17($29,$28);}}catch($3E){this.$0.errorLog($3E.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5A).length>0){try{var $3F=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $40='AssetFeatureSpec';var $41='';var $42=0;var $enum4=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5A));while($enum4.moveNext()){var $43=$enum4.current;var $44=parseInt($43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$41=($43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)==null)?'':$43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;$42=parseInt($43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $45=($43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50)==null)?'':$43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50).text;var $46=($43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51)==null)?'':$43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51).text;var $47=($43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $48=($43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$43.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;var $49=false;if($43.selectSingleNode('IsSpecUpdated')!=null){$49=($43.selectSingleNode('IsSpecUpdated').text==='0')?false:true;}var $4A=$43.xml;var $4B=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$4B=true;if($4B){var $4C=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$59,null);$4C.set_key($44);$4C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$41);$4C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$42);$4C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50,$45);$4C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51,$46);$4C.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$47);$4C.setPropertyByName('IsSpecUpdated',$49);this.$0.commitCMObjectUpdate($4C);}else{insertIntoTable('W6CMAssetFeatureSpec',$1,$44,$47,$4A,$41,$42);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$41&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$42){var $4D=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$59,null);$4D.set_key($44);$4D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$41);$4D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$42);$4D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50,$45);$4D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51,$46);$4D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$47);$4D.setPropertyByName('IsSpecUpdated',$49);$3F.add($4D);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$41&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$42){this.$17($40,$3F);}}catch($4E){this.$0.errorLog($4E.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$53).length>0){try{var $4F=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $50='MeterHistory';var $51={};var $enum5=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$53));while($enum5.moveNext()){var $52=$enum5.current;var $53=parseInt($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);var $54=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;var $55=parseInt($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $56=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54).text;var $57=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55).text;var $58=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56).text;var $59=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57).text;var $5A=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$58).text;var $5B=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $5C=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B).text;var $5D=($52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$52.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;var $5E=$52.xml;var $5F={};$5F['Key']=$53.toString();$5F['MeterID']=$56;$5F['Reading1']=$57;$5F['Reading2']=$58;$5F['ReadingDate1']=$59;$5F['ReadingDate2']=$5A;$5F['Name']=$5B;$5F['Unit']=$5C;$5F['MobileKey']=$5D;$51[$56]=$5F;this.$F[$54+'_'+$55+'_MeterHistoryData']=$51;window.localStorage.setItem($54+'_'+$55+'_MeterHistoryData',JSON.stringify(this.$F[$54+'_'+$55+'_MeterHistoryData']));this.$0.setSharedData($54+'_'+$55+'_MeterHistoryData',this.$F);var $60=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$60=true;if($60){var $61=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$5,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$52,null);$61.set_key($53);$61.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$54);$61.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$55);$61.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54,$56);$61.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55,$57);$61.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56,$58);$61.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57,Date.parseDate($59));$61.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B,$5C);this.$0.commitCMObjectUpdate($61);}else{insertIntoTable('W6CMMeterHistory',$1,$53,$5B,$5E,$54,$55);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$54&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$55){var $62=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$5,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$52,null);$62.set_key($53);$62.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$54);$62.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$55);$62.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54,$56);$62.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55,$57);$62.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56,$58);$62.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57,Date.parseDate($59));$62.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B,$5C);$4F.add($62);this.$17($50,$4F);}}if(!!P2.PS.AMEREN.CM.AmerenP2Constants.callid&&!!P2.PS.AMEREN.CM.AmerenP2Constants.number.toString()){this.$13();}}catch($63){this.$0.errorLog($63.message);}}},$1D:function($p0){try{var $0=$p0.getPropertyByName('Task');var $1=(ss.isNullOrUndefined($0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60)))?'':$0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60).toString();var $2=$0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);var $3=0;$3=$2.get_key();var $4=(ss.isNullOrUndefined($0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)))?'':$0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();var $5=(ss.isNullOrUndefined($0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)))?0:parseInt($0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString());var $6=this.$0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);if(this.$10!=null&&Object.keyExists(this.$10,$3)){var $7='';var $8=this.$10[$3];var $9=(ss.isNullOrUndefined($0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3)))?'':$0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3).toString();var $A=(ss.isNullOrUndefined($0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)))?'':$0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).toString();if(!!$8){var $B=$8.split(',');if($9===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){$7=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$B[0]+'.html';}else if($9===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){$7=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$B[1]+'.html';}if($A!==$7){this.$1E(this.$0,$4,$5,$7);}}}else{this.$0.getDictionaryItem($6,$3,ss.Delegate.create(this,function($p1_0){
var $1_0=ss.parseXml($p1_0.get_body());var $1_1=(ss.isNullOrUndefined($1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)))?'':$1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;var $1_2='';var $1_3=(ss.isNullOrUndefined($0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3)))?'':$0.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3).toString();if(!!$1_1){var $1_4=$1_1.split(',');if($1_3===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){$1_2=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_4[0]+'.html';}else if($1_3===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){$1_2=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_4[1]+'.html';}var $1_5=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).toString();if($1_5!==$1_2){this.$1E(this.$0,$4,$5,$1_2);}}}));}}catch($C){this.$0.errorLog('Excepetion from ObjRetrievalSupervisor '+$C);}},$1E:function($p0,$p1,$p2,$p3){var $0='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>Update</Action>'+'<Object>'+'<Task>'+'<CallID>'+$p1+'</CallID>'+'<Number>'+$p2+'</Number>'+'<CompletionFormURL>'+$p3+'</CompletionFormURL>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';$p0.sendWrappedCustomSXP($0);},$1F:function($p0,$p1){if(ss.isNullOrUndefined(window.sessionStorage.getItem('verifiedInJeopardyAfterLogin'))){window.sessionStorage.setItem('verifiedInJeopardyAfterLogin','false');this.$20();}},$20:function(){this.$0.getBusinessViewServices().getAllBusinessViewItemsByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,ss.Delegate.create(this,function($p1_0){
var $1_0='';if($p1_0!=null){if($p1_0.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2=$1_1.getPropertyByName('Task');var $1_3=($1_2.get_genericObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$1_2.get_genericObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if($1_3!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5F&&$1_3!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$90&&$1_3!==P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8D){var $1_4='';var $1_5='';var $1_6='';var $1_7=($1_2.get_genericObject().getPropertyByName('CallID')==null)?'':$1_2.get_genericObject().getPropertyByName('CallID').toString();var $1_8=($1_2.get_genericObject().getPropertyByName('Number')==null)?'':$1_2.get_genericObject().getPropertyByName('Number').toString();var $1_9=$1_7+'_'+$1_8;$1_4=(ss.isNullOrUndefined($1_1.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C)))?'':$1_1.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C).toString();$1_5=(ss.isNullOrUndefined($1_2.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A)))?'':$1_2.get_genericObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A).toString();if($1_5==null||!$1_5){$1_6=$1_4;}else if(Date.parseDate($1_5)>Date.parseDate($1_4)){$1_6=$1_5;}else{$1_6=$1_4;}var $1_A=Date.get_now();var $1_B='';if(!ss.isNullOrUndefined(window.sessionStorage.getItem('verifiedInJeopardyAfterLogin'))){$1_B=window.sessionStorage.getItem('verifiedInJeopardyAfterLogin').toString();}if($1_B==='false'){window.sessionStorage.setItem('verifiedInJeopardyAfterLogin','true');if(Date.parseDate($1_6)<$1_A){if(String.isNullOrEmpty($1_0)){$1_0=$1_9;}else{$1_0+=', '+$1_9;}}}else{var $1_C=this.$8.addDays($1_A,-180);if(Date.parseDate($1_6)>=$1_C&&Date.parseDate($1_6)<$1_A){if(String.isNullOrEmpty($1_0)){$1_0=$1_9;}else{$1_0+=', '+$1_9;}}}}}if(!String.isNullOrEmpty($1_0)){this.$0.showMessageBox('Order '+$1_0+' is in Jeopardy','Jeopardy Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}}}}));},$21:function(){window.clearInterval(this.$6);this.$20();this.$6=window.setInterval(ss.Delegate.create(this,this.$21),180000);},$22:function($p0,$p1){this.$0=$p0;var $0=ss.parseXml($p1.message);var $1=[];var $2=[];var $3='';var $4='';var $5='';var $6='';var $7=$0.documentElement.nodeName;if($7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$77){var $8=$0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7C);if($8.text==='0'){var $9=$0.selectNodes('ListOfAllObjectKeys/K');var $A=$0.selectNodes('Assignment');if($9.length>0){var $enum1=ss.IEnumerator.getEnumerator($9);while($enum1.moveNext()){var $B=$enum1.current;if(!$1.contains($B)){$1.add($B.text);}}}else if($A.length>0){var $enum2=ss.IEnumerator.getEnumerator($A);while($enum2.moveNext()){var $C=$enum2.current;var $D=ss.parseXml($C.xml);var $E=$D.selectNodes('P');var $enum3=ss.IEnumerator.getEnumerator($E);while($enum3.moveNext()){var $F=$enum3.current;var $10=$F.attributes.getNamedItem('i').nodeValue;if($10==='0'){$1.add($F.text);}}}}if($1.length>0){$p0.getBusinessViewServices().getAllBusinessViewItemsByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=$1_0.getPropertyByName('Key').toString();if($1.contains($1_1)){var $1_2=$1_0.getPropertyByName('Task');$3=($1_2.get_genericObject().getPropertyByName('DisObjectIdentifier')==null)?'':$1_2.get_genericObject().getPropertyByName('DisObjectIdentifier').toString();$4=($1_2.get_genericObject().getPropertyByName('DisObjectUpdateDate')==null)?'':$1_2.get_genericObject().getPropertyByName('DisObjectUpdateDate').toString();$5=($1_2.get_genericObject().getPropertyByName('CallID')==null)?'':$1_2.get_genericObject().getPropertyByName('CallID').toString();$6=($1_2.get_genericObject().getPropertyByName('Number')==null)?'':$1_2.get_genericObject().getPropertyByName('Number').toString();var $1_3=($1_2.get_genericObject().getPropertyByName('LocationDescription')==null)?'':$1_2.get_genericObject().getPropertyByName('LocationDescription').toString();var $1_4=($1_2.get_genericObject().getPropertyByName('SubstationName')==null)?'':$1_2.get_genericObject().getPropertyByName('SubstationName').toString();var $1_5=($1_2.get_genericObject().getPropertyByName('CircuitNumber')==null)?'':$1_2.get_genericObject().getPropertyByName('CircuitNumber').toString();var $1_6={};$1_6['location']=$1_3;$1_6['substation']=$1_4;$1_6['circuitnumber']=$1_5;window.localStorage.setItem('taskProperties_'+$5+'_'+$6,JSON.stringify($1_6));setTaskProperties($5,$6);var $1_7=($1_2.get_genericObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$1_2.get_genericObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();var $1_8=($1_2.get_genericObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)==null)?'':$1_2.get_genericObject().getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).toString();if($1_7===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$61){this.$1D($1_0);}var $1_9=new Array(Object.getKeyCount(this.$B));var $1_A=0;var $enum2=ss.IEnumerator.getEnumerator(Object.keys(this.$B));while($enum2.moveNext()){var $1_B=$enum2.current;$1_9[$1_A]=$1_B;$1_A++;}if(!ss.isNullOrUndefined($4)){if($p0.getSharedData($5)==null){$p0.setSharedData($5,$4);if($1_9.length>0){var $enum3=ss.IEnumerator.getEnumerator($1_9);while($enum3.moveNext()){var $1_C=$enum3.current;this.$23($5,$6,$1_C);$p0.infoLog('From ClientEvents_AfterMsgProcessed SXp Trig,'+$5+' '+$6);}}}else{if($4===$p0.getSharedData($5).toString()){if($1_9.length>0){if($1_7==='Dispatched'){var $enum4=ss.IEnumerator.getEnumerator($1_9);while($enum4.moveNext()){var $1_D=$enum4.current;this.$23($5,$6,$1_D);$p0.infoLog('From ClientEvents_AfterMsgProcessed SXp Trig,'+$5+' '+$6);}}}}else{$p0.setSharedData($5,$4);if($1_9.length>0){var $enum5=ss.IEnumerator.getEnumerator($1_9);while($enum5.moveNext()){var $1_E=$enum5.current;this.$23($5,$6,$1_E);$p0.infoLog('From ClientEvents_AfterMsgProcessed SXp Trig,'+$5+' '+$6);}}}}}}}}));}}else if($8.text==='8'){$p0.getLoggedInEngineer(function($p1_0){
if($p0.get_loggedInEngineerKey()!==-1){var $1_0=$p1_0.getPropertyByName('LoginName').toString();var $1_1=$p1_0.getPropertyByName('ID').toString();window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C1,$1_1);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C2,$1_0);}});}}else if($p1.message!=null&&$p1.message.toString().startsWith('<SXPMobileGenericObjectUpdateResult')){var $11=ss.parseXml($p1.message.toString());if($11.selectSingleNode('CollectionID').text==='30000200'){if($p0.getSharedData('SID_SRKey')!=null&&$p0.getSharedData('SID_SRKey')!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('ServiceRequest'),$p0.getSharedData('SID_SRKey').toString(),function($p1_0){
$p1_0.setPropertyByName(($p0.getCollectionIDByName('ServiceRequest')),'IsTaskCompleted',true);$p0.commitCMObjectUpdate($p1_0);$p0.setSharedData('SID_SRKey','');});}else if($p0.getSharedData('SID_FollowUpKey_EmergentTask')!=null&&$p0.getSharedData('SID_FollowUpKey_EmergentTask')!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('FollowUpWork'),$p0.getSharedData('SID_FollowUpKey_EmergentTask').toString(),function($p1_0){
if($p1_0.getPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),'IsEmergentTask').toString().toLowerCase()==='true'){$p1_0.setPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),'IsTaskCompleted',true);$p0.commitCMObjectUpdate($p1_0);$p0.setSharedData('SID_FollowUpKey_EmergentTask','');}});}else if($p0.getSharedData('SID_FollowUpKey_CreateTask')!=null&&$p0.getSharedData('SID_FollowUpKey_CreateTask')!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('FollowUpWork'),$p0.getSharedData('SID_FollowUpKey_CreateTask').toString(),function($p1_0){
if($p1_0.getPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14).toString().toLowerCase()==='true'){$p1_0.setPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),'IsTaskCompleted',true);$p0.commitCMObjectUpdate($p1_0);$p0.setSharedData('SID_FollowUpKey_CreateTask','');}});}}}if(!this.$7){this.$7=true;this.$6=window.setInterval(ss.Delegate.create(this,this.$21),10);}},$23:function($p0,$p1,$p2){this.$0.infoLog('From TriggerSxpToGetDisconnectedObjects');var $0='<SXPServerGetObjects>';if($p2==='SubTask'){$0=$0+'<ObjectType>PV'+$p2+'</ObjectType>';}else{$0=$0+'<ObjectType>'+$p2+'</ObjectType>';}$0=$0+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p0+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$p1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p0+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';if($p2==='SubTask'){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$B['PVSubTask']));while($enum1.moveNext()){var $1=$enum1.current;$0=$0+'<Item>'+$1+'</Item>';}}else{var $enum2=ss.IEnumerator.getEnumerator(Object.keys(this.$B[$p2]));while($enum2.moveNext()){var $2=$enum2.current;$0=$0+'<Item>'+$2+'</Item>';}}$0=$0+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($0);},triggerSxpToGetRelatedObjects:function(disconnectedObject,number,callid,propertyList){var $0='<SXPServerGetObjects>'+'<ObjectType>'+disconnectedObject+'</ObjectType>'+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+callid+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+number+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+callid+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+number+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';var $enum1=ss.IEnumerator.getEnumerator(propertyList);while($enum1.moveNext()){var $1=$enum1.current;$0+='<Item>'+$1+'</Item>';}$0+='</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($0);}}
P2.PS.AMEREN.CM.Events.SubtaskRetrieval=function(settings){this.$A='';this.$E={};this.$10={};this.$11={};this.$12={};this.$13={};this.$14={};this.$15={};W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_wrappedCustomSXPResultReceived(ss.Delegate.create(this,this.$29));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$23));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterSettingsChanged(ss.Delegate.create(this,this.$22));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterMsgProcessed(ss.Delegate.create(this,this.$21));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterScheduleReceivedAndProcessed(ss.Delegate.create(this,this.$17));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$1A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeLogOut(ss.Delegate.create(this,this.$19));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySync(ss.Delegate.create(this,this.$18));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeOpenView(ss.Delegate.create(this,this.$16));this.$F=ss.parseXml(settings);this.$1F(this.$F);}
P2.PS.AMEREN.CM.Events.SubtaskRetrieval.prototype={$0:null,$1:0,$2:0,$3:0,$4:0,$5:0,$6:0,$7:0,$8:null,$9:0,$B:'',$C:null,$D:null,$F:null,$16:function($p0,$p1){try{if($p1.viewSettings.name==='Schedule'){if(this.$8==null){this.$0.externalMaskOn();}}}catch($0){this.$0.errorLog('Exception from SubtaskRetrieval.cs, method:ClientEvents_BeforeOpenView .Message:'+$0.message);}},$17:function($p0,$p1){try{var $0=($p1.get_addedAssignments()!=null)?$p1.get_addedAssignments().get_count():0;var $1=($p1.get_updatedAssignments()!=null)?$p1.get_updatedAssignments().get_count():0;var $2=$0+$1;var $3=new W6.ClickMobile.Web.ObjectModel.W6CMAssignmentsList();if($p1.get_addedAssignments()!=null){$3=$p1.get_addedAssignments();}else if($p1.get_updatedAssignments()!=null){$3=$p1.get_updatedAssignments();}if($p1.get_addedAssignments()!=null&&$p1.get_updatedAssignments()!=null){var $enum1=ss.IEnumerator.getEnumerator($p1.get_updatedAssignments());while($enum1.moveNext()){var $D=$enum1.current;$3.add($D);}}var $4=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;var $5='';var $6='';var $7='';var $8='';var $9='';this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndProcessed,'+$2);var $A='ClientEvents_AfterScheduleReceivedAndProcessed';console.log($A);for(var $E=0;$E<$2;$E++){var $F=$3.get_item($E);if($F.get_key()===-1){continue;}$5=$F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();$6=$F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString();$A='ClientEvents_AfterScheduleReceivedAndProcessed:'+$5+'_'+$6;console.log($A);var $10=($F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();var $11=($F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)==null)?'':$F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).toString();$A='CompletionFormURL Value:'+$5+'_'+$6+':'+$11;console.log($A);if($11.indexOf(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5)<0){$A='Entered if condition:'+$5+'_'+$6;console.log($A);this.$2A($F);}$7=(ss.isNullOrUndefined($F.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C)))?'':$F.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C).toString();$8=(ss.isNullOrUndefined($F.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A)))?'':$F.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A).toString();if($8==null||!$8){$9=$7;}else if(Date.parseDate($8)>Date.parseDate($7)){$9=$8;}else{$9=$7;}if(P2.PS.AMEREN.CM.AmerenP2Constants.formServices!=null){var $15=P2.PS.AMEREN.CM.AmerenP2Constants.formServices.get_formObject().getPropertyByName($4,'Key');var $16=$F.getPropertyByName($4,'Key');if($16===$15){var $17=P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getUIPropertyValueByNameEx($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if(($17===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5F||$17===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$90)&&$10===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){}else{this.$34($5,$6,$9);}}else{this.$34($5,$6,$9);}}else{this.$34($5,$6,$9);}this.$A=$5;this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndNotProcessed,'+this.$A+' '+$6);var $12=($F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$69)==null)?null:$F.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$69).toString();var $13=new Array(Object.getKeyCount(this.$11));var $14=0;var $enum2=ss.IEnumerator.getEnumerator(Object.keys(this.$11));while($enum2.moveNext()){var $18=$enum2.current;$13[$14]=$18;$14++;}if(!ss.isNullOrUndefined($12)){if(this.$0.getSharedData($5)==null){this.$0.setSharedData($5,$12);if($13.length>0){var $enum3=ss.IEnumerator.getEnumerator($13);while($enum3.moveNext()){var $19=$enum3.current;if(!ss.isNullOrUndefined($19)){this.$2E($F,$5,$6,$19);}}}}else{if(this.$2C($12)===this.$2C(this.$0.getSharedData($5).toString())){if($10==='Dispatched'){var $enum4=ss.IEnumerator.getEnumerator($13);while($enum4.moveNext()){var $1A=$enum4.current;if(!ss.isNullOrUndefined($1A)){this.$2E($F,$5,$6,$1A);this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndNotProcessed SXp Trig,'+this.$A+' '+$6);}}}}else{this.$0.setSharedData($5,$12);if($13.length>0){var $enum5=ss.IEnumerator.getEnumerator($13);while($enum5.moveNext()){var $1B=$enum5.current;if(!ss.isNullOrUndefined($1B)){this.$2E($F,$5,$6,$1B);this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndNotProcessed SXp Trig,'+this.$A+' '+$6);}}}}}}}var $B=$p1.get_deletedAssignments();if($B!=null&&$B.get_count()>0){var $enum6=ss.IEnumerator.getEnumerator($B);while($enum6.moveNext()){var $1C=$enum6.current;this.$0.getAssignmentByKey($1C.get_key(),ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=$1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();$6=$1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString();var $1_2=($1_0.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$1_0.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();var $1_3=($1_0.getPropertyByName($4,'IncompleteReason')==null)?'':$1_0.getPropertyByName($4,'IncompleteReason').toString();var $1_4='Unassigned';if($1_2==='Incomplete'&&$1_3==='P2- Rescheduling Needed'){var $1_5='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>UpdateOrCreate</Action>'+'<Object>'+'<Task>'+'<CallID>'+$1_1+'</CallID>'+'<Number>'+$6+'</Number>'+'<Status>'+$1_4+'</Status>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';this.$0.sendWrappedCustomSXP($1_5);}if(!ss.isNullOrUndefined(window.localStorage.getItem($1_1+'_'+$6+'_MeterHistory'))){window.localStorage.removeItem($1_1+'_'+$6+'_MeterHistory');}this.$35($1_1,$6);if(this.$0.getSharedData($1_1)!=null){}}));}}var $C=$p1.get_updatedAssignments();if($C!=null&&$C.get_count()>0){var $enum7=ss.IEnumerator.getEnumerator($C);while($enum7.moveNext()){var $1D=$enum7.current;this.$0.getAssignmentByKey($1D.get_key(),ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=$1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();$6=$1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString();var $1_2=($1_0.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$1_0.getPropertyByName($4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if($1_2==='Complete'){this.$0.getLoggedInEngineer(function($p2_0){
if($p2_0!=null){var $2_0='clickmobiledb'+(($p2_0.getPropertyByName('LoginName')==null)?'':$p2_0.getPropertyByName('LoginName').toString().toLowerCase());var dbConn = window.openDatabase($2_0,'','my first database',2*1024*1024);dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMPVSubTask WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$6+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMRelayInspection WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$6+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMMaterial WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$6+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMAssetFeatureSpec WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$6+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMMeterHistory WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$6+'<%'])});}});}}));}}}catch($1E){this.$0.errorLog('Exception from SubtaskRetrieval.cs, method:ClientEvents_AfterScheduleReceivedAndProcessed .Message:'+$1E.message);}},$18:function($p0,$p1){try{if($p1.get_dictionaryID()===56){this.$8={};$p0.getDictionaryItems($p1.get_dictionaryID(),1700,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_6=$enum1.current;var $1_7=ss.parseXml($1_6.get_body());var $1_8=$1_7.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;this.$8[$1_6.get_key()]=$1_8;}var $1_0=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHistory();var $1_1=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHorizon();var $1_2=0;var $1_3=0;if($1_0!=null){$1_2=$1_0.seconds;}if($1_1!=null){$1_3=$1_1.seconds;}var $1_4=this.$2D(Date.get_today(),-$1_2);var $1_5=this.$2D(Date.get_today(),$1_3);$p0.getTodaySchedule($1_4,$1_5,ss.Delegate.create(this,this.getAllAssignments));}));}}catch($0){$p0.errorLog('Exception from SubtrakRetrivel.cs, Method:'+$0.message);}},$19:function($p0,$p1){window.sessionStorage.clear();},$1A:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){this.$1B();this.$0=$p0;P2.PS.AMEREN.CM.AmerenP2Constants.callid=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();if(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.AmerenP2Constants.callid+'_'+P2.PS.AMEREN.CM.AmerenP2Constants.number.toString()+'_MeterHistoryData'))){this.getMeterHistoryData();}else{this.$1E();}}},$1B:function(){window.clearInterval(this.$1);var $0=$('.doc-info');var $1=$('div:contains(No Completion Form Required)');var $2=$('div:contains(Error in loading Completion Form)');if(!$0.length&&!$1.length&&!$2.length){this.$1=window.setInterval(ss.Delegate.create(this,this.$1B),1000);}else if(!$0.length&&($1.length>0||$2.length>0)){window.clearInterval(this.$1);}else if($0.length>0){window.clearInterval(this.$1);$('.main-header').parents().closest('.W6CMPanelHtmlContainer').children().find('select').each(ss.Delegate.create(this,this.$1C));$('.main-header').parents().closest('.W6CMPanelHtmlContainer').children().find('input').each(ss.Delegate.create(this,this.$1D));}},$1C:function($p0,$p1){var $0=(!ss.isNullOrUndefined(P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getUIPropertyValueByNameEx(2,'CompletionFormURL')))?P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getUIPropertyValueByNameEx(2,'CompletionFormURL').toString():'';if(!!$0){if($0.indexOf('SWE')>0){$('#'+$p1.id).css('margin-left','-50%');$('#'+$p1.id).css('width','150%');}}},$1D:function($p0,$p1){if($p1.id.toString().indexOf('readingInput')>-1){$('#'+$p1.id).css('margin-left','-80%');$('#'+$p1.id).css('width','180%');}},$1E:function(){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad);var $0=$('.doc-info');var $1=$('div:contains(No Completion Form Required)');var $2=$('div:contains(Error in loading Completion Form)');if(!$0.length&&!$1.length&&!$2.length){P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad=window.setInterval(ss.Delegate.create(this,this.$1E),2000);}else if(!$0.length&&($1.length>0||$2.length>0)){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad);}else if($0.length>0){window.clearInterval(P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad);setMeterHistoryValues(JSON.parse(window.localStorage.getItem(P2.PS.AMEREN.CM.AmerenP2Constants.callid+'_'+P2.PS.AMEREN.CM.AmerenP2Constants.number.toString()+'_MeterHistoryData')));}},getMeterHistoryData:function(){try{var $dict1=this.$11['MeterHistory'];for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};this.$14[$2.key]=$2.value;}this.$7=this.$0.getCollectionIDByName('MeterHistory');var $0=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.$7,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$0.initStringCriterion(P2.PS.AMEREN.CM.AmerenP2Constants.callid);var $1=[];$1.add($0);this.$0.getSearchedBusinessViewItemsByObjectType(this.$7,$1,ss.Delegate.create(this,function($p1_0){
var $1_0='';var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$1_1.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()&&P2.PS.AMEREN.CM.AmerenP2Constants.number===parseInt($1_1.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString())){var $dict2=this.$14;for(var $key3 in $dict2){var $1_3={key:$key3,value:$dict2[$key3]};if($1_3.key===P2.PS.AMEREN.CM.AmerenP2Constants.meterID){$1_0=$1_1.getPropertyByName($1_3.key).toString();}this.$14[$1_3.key]=($1_1.getPropertyByName($1_3.key)==null)?'':$1_1.getPropertyByName($1_3.key).toString();}var $1_2={};var $dict4=this.$14;for(var $key5 in $dict4){var $1_4={key:$key5,value:$dict4[$key5]};$1_2[$1_4.key]=$1_4.value;}this.$13[$1_0]=$1_2;}}setMeterHistoryValues(this.$13);}));}catch($3){this.$0.errorLog('Exception from P2.PS.AMEREN.CM.Events.SubtaskRetrieval.GetMeterHistoryData '+$3.message);}},$1F:function($p0){var $0=$p0.selectNodes('//DisconnectedObjects/Object');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.selectNodes('Property');var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $4=$enum2.current;this.$10[$4.selectSingleNode('PropertyName').text]=$4.selectSingleNode('PropertyType').text;}var $3={};var $dict3=this.$10;for(var $key4 in $dict3){var $5={key:$key4,value:$dict3[$key4]};$3[$5.key]=$5.value;}this.$11[$1.selectSingleNode('Name').text]=$3;P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects[$1.selectSingleNode('Name').text]=$3;Object.clearKeys(this.$10);}},$20:function($p0,$p1,$p2,$p3){var $0=($p2.getDate().toString().length>1)?$p2.getDate().toString():'0'+$p2.getDate().toString();var $1=(($p2.getMonth()+1).toString().length>1)?($p2.getMonth()+1).toString():'0'+($p2.getMonth()+1).toString();var $2=($p2.getFullYear().toString().length>1)?$p2.getFullYear().toString():'0'+$p2.getFullYear().toString();var $3=($p2.getHours().toString().length>1)?$p2.getHours().toString():'0'+$p2.getHours().toString();var $4=($p2.getMinutes().toString().length>1)?$p2.getMinutes().toString():'0'+$p2.getMinutes().toString();var $5=($p2.getSeconds().toString().length>1)?$p2.getSeconds().toString():'0'+$p2.getSeconds().toString();var $6=$2+'-'+$1+'-'+$0+'T'+$3+':'+$4+':'+$5;var $7='<SXPMultipleOperations>'+'<Operations>'+'<Operation>'+'<Action>UpdateOrCreate</Action>'+'<Object>'+'<Task>'+'<CallID>'+$p0+'</CallID>'+'<Number>'+$p1+'</Number>'+'<DisObjectUpdateDate>'+$6+'</DisObjectUpdateDate>'+'<DisObjectIdentifier>'+$p3+'</DisObjectIdentifier>'+'</Task>'+'</Object>'+'</Operation>'+'</Operations>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPMultipleOperations>';this.$0.sendWrappedCustomSXP($7);},$21:function($p0,$p1){console.log($p1.message);if($p1.message!=null&&$p1.message.toString().startsWith('<SXPMobileGetGenericObjectsResult')){var $0=ss.parseXml($p1.message.toString());if($0.selectSingleNode('CollectionID').text==='8'){$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p0.get_loggedInEngineerKey()!==-1){this.$C=$p1_0.getPropertyByName('LoginName');var $1_0=$p1_0.getPropertyByName('ID').toString();window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C1,$1_0);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C2,this.$C);var $1_1='<SXPServerGetObjects >'+'<ObjectType>CrewAllocation</ObjectType>'+'<Indexes>'+'<Index>'+'<LowBound>'+'<Property>'+'<Name>EngineerID</Name>'+'<Value>'+$1_0+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>EngineerID</Name>'+'<Value>'+$1_0+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>'+'<Item>Key</Item>'+'<Item>Crew</Item >'+'<Item>AllocatedResource</Item >'+'<Item>StartTime</Item>'+'<Item>FinishTime</Item >'+'<Item>AllocatedResource</Item>'+'</RequestedProperties>'+'</SXPServerGetObjects>';$p0.sendWrappedCustomSXP($1_1);}}));}}else if($p1.message!=null&&$p1.message.toString().startsWith('<SXPMobileGenericObjectUpdateResult')){var $1=ss.parseXml($p1.message.toString());if($1.selectSingleNode('CollectionID').text===$p0.getCollectionIDByName('Activity_SO').toString()){if($p0.getSharedData('Timesheet_FollowUpKey')!=null&&$p0.getSharedData('Timesheet_FollowUpKey')!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('FollowUpWork'),$p0.getSharedData('Timesheet_FollowUpKey').toString(),function($p1_0){
$p1_0.setPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),'FUWLeadUpdate',true);$p0.commitCMObjectUpdate($p1_0);$p0.setSharedData('Timesheet_FollowUpKey','');});}}if($1.selectSingleNode('CollectionID').text==='30000200'){if($p0.getSharedData('SID_SRKey')!=null&&$p0.getSharedData('SID_SRKey')!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('ServiceRequest'),$p0.getSharedData('SID_SRKey').toString(),function($p1_0){
$p1_0.setPropertyByName(($p0.getCollectionIDByName('ServiceRequest')),'IsTaskCompleted',true);$p0.commitCMObjectUpdate($p1_0);$p0.setSharedData('SID_SRKey','');});}else if($p0.getSharedData('SID_FollowUpKey_EmergentTask')!=null&&$p0.getSharedData('SID_FollowUpKey_EmergentTask')!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('FollowUpWork'),$p0.getSharedData('SID_FollowUpKey_EmergentTask').toString(),function($p1_0){
if($p1_0.getPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),'IsEmergentTask').toString().toLowerCase()==='true'){$p1_0.setPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),'IsTaskCompleted',true);$p0.commitCMObjectUpdate($p1_0);$p0.setSharedData('SID_FollowUpKey_EmergentTask','');}});}else if($p0.getSharedData('SID_FollowUpKey_CreateTask')!=null&&$p0.getSharedData('SID_FollowUpKey_CreateTask')!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('FollowUpWork'),$p0.getSharedData('SID_FollowUpKey_CreateTask').toString(),function($p1_0){
if($p1_0.getPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$14).toString().toLowerCase()==='true'){$p1_0.setPropertyByName(($p0.getCollectionIDByName('FollowUpWork')),'IsTaskCompleted',true);$p0.commitCMObjectUpdate($p1_0);$p0.setSharedData('SID_FollowUpKey_CreateTask','');}});}}}},$22:function($p0){this.$0=$p0;},$23:function($p0,$p1){this.$0=$p0;},$24:function($p0,$p1){this.$2=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);var $0=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch(this.$2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17);$0.initStringCriterion(this.$A);var $1=[];$1.add($0);this.$0.getSearchedBusinessViewItemsByObjectType(this.$2,$1,ss.Delegate.create(this,function($p1_0){
var $1_0=0;if($p1_0.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_1=$enum1.current;if(this.$A===$1_1.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString()){var $1_2=$('#subTaskData tbody').html().split('</tr>');var $1_3=0;$1_0=$1_2.length-1;var $1_4=$1_1.getPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23).toString();var $enum2=ss.IEnumerator.getEnumerator($1_2);while($enum2.moveNext()){var $1_5=$enum2.current;if($1_5.indexOf($1_4)===-1){$1_3++;if($1_3===$1_2.length){var $1_6=$('<tr><td id="obj'+$1_0+'"style="display:none">'+$1_1.get_key()+'</td><td>'+$1_1.getPropertyByName('CallID')+'</td><td>'+$1_1.getPropertyByName('Number')+'</td><td>'+$1_1.getPropertyByName('SubTaskID')+'</td><td><img id="img_'+$1_0+'" class="openSubTask" key="'+$1_1.get_key()+'"  src="Images/Pencil_blue.png" style="height:25px; width:25px;"></img></td></tr>').get(0);$('#subTaskData tbody').append($1_6);$('',$1_6).click(ss.Delegate.create(this,this.$25));}continue;}}}}}}));return true;},$25:function($p0){var $0=$p0.currentTarget.getAttribute('key').toString();this.$0.openFormByKey(this.$2,parseInt($0),false,null);},$26:function(){this.$0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if(!ss.isNullOrUndefined($p1_0)){this.$C=$p1_0.getPropertyByName('LoginName');}}));},$27:function($p0,$p1){var $0=new P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable(P2.PS.AMEREN.CM.AmerenP2Constants.formServices);var $1=[];var $2=[];var $3=null;if(!ss.isNullOrUndefined(window.localStorage.getItem($p0+'_headingList'))){var $enum1=ss.IEnumerator.getEnumerator(window.localStorage.getItem($p0+'_headingList').toString().split(','));while($enum1.moveNext()){var $B=$enum1.current;$1.add($B);}}if(!ss.isNullOrUndefined(window.localStorage.getItem($p0+'_propertyList'))){var $enum2=ss.IEnumerator.getEnumerator(window.localStorage.getItem($p0+'_propertyList').toString().split(','));while($enum2.moveNext()){var $C=$enum2.current;$2.add($C);}}$('#'+$p0+'-SortAndFilterDiv').children().remove();$('#'+$p0+'-SummaryTableDiv').children().remove();$('#'+$p0+'-summaryTable').remove();$('#'+$p0+'-sortDivision').remove();var $4=(ss.isNullOrUndefined(window.localStorage.getItem($p0+'_sortPropertyStr')))?'':window.localStorage.getItem($p0+'_sortPropertyStr').toString();var $5=$0.createSortButton($p0,$4);var $6=$0.createFilter($1,$p0);$('#'+$p0+'-SortAndFilterDiv').append($5);$6.insertAfter('#'+$p0+'-sortDivision');switch($p0){case 'PVSubTask':$3=$0.createTableWithStartFinishCompleteButtonsWithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sortWithStartFinishCompeteButtonClick($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'_startButton').click(function($p1_0){
$0.startFinishCompeteButtonClick($p1_0);});$('.'+$p0+'_finishButton').click(function($p1_0){
$0.startFinishCompeteButtonClick($p1_0);});$('.'+$p0+'_completeButton').click(function($p1_0){
$0.startFinishCompeteButtonClick($p1_0);});$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$28($p1_0,$p0,this.$2);}));var $7=new P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation();var $8=0;var $9=P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getTabTitles();for(var $D=0;$D<P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getTabsCount();$D++){if($9[$D]===P2.PS.AMEREN.CM.AmerenP2Constants.subTabHeading){$8=$D;}}if(P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getSelectedTabIndex()===$8){this.$9=0;$7.verifyPlanStartDate();this.$9=window.setInterval(ss.Delegate.create($7,$7.verifyPlanStartDate),60000);}else{window.clearInterval(this.$9);}break;case 'Material':$3=$0.createTable_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sort($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$28($p1_0,$p0,this.$4);}));break;case 'AssetFeatureSpec':$3=$0.createTable_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sort($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$28($p1_0,$p0,this.$6);}));break;case 'MeterHistory':$3=$0.createTable_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sort($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$28($p1_0,$p0,this.$7);}));break;case 'RelayInspection':var $A=P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getTabTitles();for(var $E=0;$E<P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getTabsCount();$E++){if($A[$E]===P2.PS.AMEREN.CM.AmerenP2Constants.relayTabHeading){P2.PS.AMEREN.CM.AmerenP2Constants.formServices.setTabVisibility($E,true);}}$3=$0.createTableWithCheckBox_WithOBJ($1,$2,$p0,$p1);$('#'+$p0+'-sortDivision').click(function($p1_0){
$0.sortWithThreeAtrr($p1_0);});$('#'+$p0+'-filterTextbox').keyup(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterTextbox').change(function($p1_0){
$0.applyfilter($p1_0);});$('#'+$p0+'-filterDDL').change(function($p1_0){
$0.filterChange($p1_0);});$('#'+$p0+'-filterContainer').click(function($p1_0){
$0.searchDivClick($p1_0);});$('#'+$p0+'-SummaryTableDiv').append($3);$('.'+$p0+'-checkbox').change(function($p1_0){
$0.checkBoxClick($p1_0);});$('.'+$p0+'-text').keyup(function($p1_0){
$0.textBoxChange($p1_0);});$('.'+$p0+'-SummaryDataCol').click(ss.Delegate.create(this,function($p1_0){
this.$28($p1_0,$p0,this.$3);}));break;}},$28:function($p0,$p1,$p2){var $0='';var $1=0;var $2='';var $3='';switch($p1){case 'PVSubTask':$1=parseInt($p0.target.id.split('_')[1]);var $4='';var $5='';var $6='';var $7='';var $8;if($('#'+$p1+'-Data-Status_'+$1).text()!=null){$4=$('#'+$p1+'-Data-Status_'+$1).text().toString();}if($('#'+$p1+'-Data-ActualFinishDateTime_'+$1).text()!=null){$5=$('#'+$p1+'-Data-ActualFinishDateTime_'+$1).text().toString();}if($('#'+$p1+'-Data-ActualStartDateTime_'+$1).text()!=null){$7=$('#'+$p1+'-Data-ActualStartDateTime_'+$1).text().toString();}if($('#'+$p1+'-Data-EstimatedFinishDateTime_'+$1).text()!=null){$6=$('#'+$p1+'-Data-EstimatedFinishDateTime_'+$1).text().toString();}$2=$('#'+$p1+'-SummaryDataCol_'+$1).attr('Key');$8=[];$8.add($4);$8.add($5);$8.add($7);$8.add($6);$8.add($1.toString());$8.add($p1);$0=JSON.stringify($8);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$39,$0);break;case 'RelayInspection':$1=parseInt($p0.target.id.split('_')[1]);$3='';var $9='';var $A='';if($('#'+$p1+'-text'+$1).text()!=null){$9=$('#'+$p1+'-text'+$1).text().toString();}if($('#'+$p1+'-SummaryDataCol_'+$1).text()!=null){$A=$('#'+$p1+'-SummaryDataCol_'+$1).text().toString();}$2=$('#'+$p1+'-SummaryDataCol_'+$1).attr('Key');var $B=[];$B.add($('#'+$p1+'-checkBoxField_'+$1).text().toString());$B.add($9);$B.add($1.toString());$B.add($A);$B.add(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);$0=JSON.stringify($B);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$32,$0);break;default:$1=parseInt($p0.target.id.split('_')[1]);var $C=$p0.target.id.toString().split('-')[0];this.$E={};this.$E[P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4F]=$C;var $D=$('#'+$C+'-row'+$1);$('span',$D).each(ss.Delegate.create(this,function($p1_0,$p1_1){
if(!$p1_1.id.indexOf($C+'-Data')){var $1_0=$('#'+$p1_1.id).parent();var $1_1=$1_0.attr('name');var $1_2=$1_1.split('-')[1].split('_')[0];if($('#'+$p1_1.id).text()!=null){$3=$('#'+$p1_1.id).text().toString();}this.$E[$1_2]=$3;}}));this.$E[P2.PS.AMEREN.CM.P2PSAMERENCM$1.id]=$1.toString();$0=JSON.stringify(this.$E);window.localStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4E,$0);$2=$('#'+$p1+'-SummaryDataCol_'+$1).attr('Key');break;}this.$0.openFormByKey($p2,parseInt($2),false,null);},$29:function($p0,$p1){this.$0.externalMaskOff();this.$0.infoLog('From ClientEvents_WrappedCustomSXPResultReceived started');var $0=(ss.isNullOrUndefined(window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C2)))?'':window.localStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C2).toString();var $1='';var $2='';var $3='';if(!String.isNullOrEmpty($0)){$1='clickmobiledb'+$0.toLowerCase();}this.$2=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21);this.$3=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33);this.$4=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$44);this.$6=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$59);this.$7=this.$0.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$52);if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CD).length>0){try{var $enum1=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CD));while($enum1.moveNext()){var $4=$enum1.current;var $5=($4.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CB)==null)?'':$4.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CB).text;var $6=($4.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CC)==null)?'':$4.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CC).text;var $7=Date.get_now();var $8=this.getDateObject($5);var $9=this.getDateObject($6);if($8<=$7&&$9>=$7){var $enum2=ss.IEnumerator.getEnumerator($4.childNodes);while($enum2.moveNext()){var $A=$enum2.current;if($A.nodeName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D0){var $enum3=ss.IEnumerator.getEnumerator($A.attributes);while($enum3.moveNext()){var $B=$enum3.current;if($B.name===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CF){$2=$B.value;}if($B.name===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$CE){$3=$B.value;}}}}}}window.localStorage.setItem('CrewKey',$2);window.localStorage.setItem('CrewID',$3);}catch($C){this.$0.errorLog($C.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes('//SXPServerGetObjectsResult/Objects/Task').length>0){var $D=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(2,'Task',null);this.$0.commitCMObjectUpdate($D);}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$22).length>0){try{var $E=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $F='PVSubTask';var $10='';var $11=0;var $12=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $enum4=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$22));while($enum4.moveNext()){var $13=$enum4.current;var $14=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23).text;var $15=parseInt($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$10=$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;var $16=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;$11=parseInt($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $17=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C).text==='0')?false:true;var $18=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26).text;var $19=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27).text;var $1A=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A).text;var $1B=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B).text;var $1C=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D).text;var $1D=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $1E=($13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$13.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).text;var $1F=$13.xml;var $20=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$20=true;if($20){var $21=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21,null);$21.set_key($15);$21.set_mobileKey($16.toString());$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$10);$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$11);$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,$17);$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($18));$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($19));$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($1A));$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B,this.getDateObject($1B));$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D,this.getDateObject($1C));$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$1D);$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$1E);$21.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23,$14);this.$0.commitCMObjectUpdate($21);}else{insertIntoTable('W6CMPVSubTask',$1,$15,$1D,$1F,$10,$11);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$10&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$11){var $22=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$21,null);$22.set_key($15);$22.set_mobileKey($16.toString());$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$10);$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$11);$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2C,$17);$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$26,this.getDateObject($18));$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$27,this.getDateObject($19));$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2A,this.getDateObject($1A));$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3B,this.getDateObject($1B));$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$3D,this.getDateObject($1C));$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$1D);$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38,$1E);$22.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$23,$14);$E.add($22);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$10&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$11){this.$27($F,$E);}}catch($23){this.$0.errorLog($23.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$34).length>0){try{var $24=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $25='RelayInspection';var $26='';var $27=0;var $enum5=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$34));while($enum5.moveNext()){var $28=$enum5.current;var $29=parseInt($28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$26=$28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;$27=parseInt($28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $2A=$28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29).text;var $2B=$28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $2C=$28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$35).text;var $2D=$28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37).text;var $2E=($28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D).text==='0')?false:true;var $2F=$28.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1).text;var $30=$28.xml;var $31=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$33,null);var $32=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$32=true;if($32){$31.set_key($29);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$26);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$27);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$2F);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$2A);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$2B);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$35,$2C);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37,$2D);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,$2E);this.$0.commitCMObjectUpdate($31);}else{insertIntoTable('W6CMRelayInspection',$1,$29,$2B,$30,$26,$27);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$26&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$27){$31.set_key($29);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$26);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$27);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1,$2F);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$29,$2A);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$2B);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$35,$2C);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$37,$2D);$31.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$2D,$2E);$24.add($31);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$26&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$27){this.$27($25,$24);}}catch($33){this.$0.errorLog($33.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$46).length>0){try{this.$0.infoLog('From ClientEvents_WrappedCustomSXPResultReceived: '+$p1.message);var $34=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $35='Material';var $36='';var $37=0;var $enum6=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$46));while($enum6.moveNext()){var $38=$enum6.current;var $39=parseInt($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$36=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;var $3A=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;$37=parseInt($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $3B=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47).text;var $3C=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48).text;var $3D=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49).text;var $3E=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$97)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$97).text;var $3F=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $40=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A).text;var $41=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B).text;var $42=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A).text;var $43=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D).text;var $44=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C).text;var $45=($38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E)==null)?'':$38.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E).text;var $46=$38.xml;var $47=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$47=true;if($47){var $48=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$44,null);$48.set_key($39);$48.set_mobileKey($3A.toString());$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$36);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$37);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47,$3B);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48,$3C);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49,$3D);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$97,$3E);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$3F);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A,$40);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B,$41);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A,$42);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D,$43);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C,$44);$48.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E,$45);this.$0.commitCMObjectUpdate($48);}else{insertIntoTable('W6CMMaterial',$1,$39,$3F,$46,$36,$37);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$36&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$37){var $49=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$4,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$44,null);$49.set_key($39);$49.set_mobileKey($3A.toString());$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$36);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$37);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$47,$3B);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$48,$3C);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$49,$3D);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$97,$3E);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$3F);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4A,$40);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6B,$41);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6A,$42);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6D,$43);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6C,$44);$49.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6E,$45);$34.add($49);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$36&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$37){this.$27($35,$34);}}catch($4A){this.$0.errorLog($4A.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5A).length>0){try{var $4B='';var $4C=0;var $4D=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $4E='AssetFeatureSpec';var $enum7=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5A));while($enum7.moveNext()){var $4F=$enum7.current;var $50=parseInt($4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$4B=($4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)==null)?'':$4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;$4C=parseInt($4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $51=($4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50)==null)?'':$4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50).text;var $52=($4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51)==null)?'':$4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51).text;var $53=($4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $54=($4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$4F.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;var $55=$4F.xml;var $56=($4F.selectSingleNode('IsSpecUpdated').text==='0')?false:true;var $57=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$57=true;if($57){var $58=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$6,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$59,null);$58.set_key($50);$58.set_mobileKey($54.toString());$58.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$4B);$58.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$4C);$58.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50,$51);$58.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51,$52);$58.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$53);$58.setPropertyByName('IsSpecUpdated',$56);this.$0.commitCMObjectUpdate($58);}else{insertIntoTable('W6CMAssetFeatureSpec',$1,$50,$53,$55,$4B,$4C);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$4B&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$4C){var $59=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$6,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$59,null);$59.set_key($50);$59.set_mobileKey($54.toString());$59.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$4B);$59.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$4C);$59.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$50,$51);$59.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$51,$52);$59.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0,$53);$59.setPropertyByName('IsSpecUpdated',$56);$4D.add($59);}}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$4B&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$4C){this.$27($4E,$4D);}}catch($5A){this.$0.errorLog($5A.message);}}if($p1.messageName===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$24&&$p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$53).length>0){try{var $5B='';var $5C=0;var $5D=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObjectsList();var $5E='MeterHistory';var $5F={};var $enum8=ss.IEnumerator.getEnumerator($p1.message.selectNodes(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$53));while($enum8.moveNext()){var $60=$enum8.current;var $61=parseInt($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$19).text);$5B=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).text;$5C=parseInt($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).text);var $62=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54).text;var $63=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55).text;var $64=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56).text;var $65=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57).text;var $66=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$58).text;var $67=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C0).text;var $68=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B).text;var $69=($60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4)==null)?'':$60.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$4).text;var $6A=$60.xml;var $6B={};$6B['Key']=$61.toString();$6B['MeterID']=$62;$6B['Reading1']=$63;$6B['Reading2']=$64;$6B['ReadingDate1']=$65;$6B['ReadingDate2']=$66;$6B['Name']=$67;$6B['Unit']=$68;$6B['MobileKey']=$69;$5F[$62]=$6B;this.$15[$5B+'_'+$5C+'_MeterHistoryData']=$5F;window.localStorage.setItem($5B+'_'+$5C+'_MeterHistoryData',JSON.stringify(this.$15[$5B+'_'+$5C+'_MeterHistoryData']));this.$0.setSharedData($5B+'_'+$5C+'_MeterHistoryData',this.$15);var $6C=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win10App)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.Win);$6C=true;if($6C){var $6D=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$7,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$52,null);$6D.set_key($61);$6D.set_mobileKey($69.toString());$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$5B);$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$5C);$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54,$62);$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55,$63);$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56,$64);$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57,Date.parseDate($65));$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57,Date.parseDate($66));$6D.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B,$68);this.$0.commitCMObjectUpdate($6D);}else{insertIntoTable('W6CMMeterHistory',$1,$61,$67,$6A,$5B,$5C);}if(P2.PS.AMEREN.CM.AmerenP2Constants.callid===$5B&&P2.PS.AMEREN.CM.AmerenP2Constants.number===$5C){var $6E=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$7,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$52,null);$6E.set_key($61);$6E.set_mobileKey($69.toString());$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17,$5B);$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C,$5C);$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$54,$62);$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$55,$63);$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$56,$64);$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57,Date.parseDate($65));$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$57,Date.parseDate($66));$6E.setPropertyByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5B,$68);$5D.add($6E);}}if(!!P2.PS.AMEREN.CM.AmerenP2Constants.callid&&!!P2.PS.AMEREN.CM.AmerenP2Constants.number.toString()){this.$1E();}}catch($6F){this.$0.errorLog($6F.message);}}},getDateObject:function(dateTime){if(dateTime!=null&&!!dateTime){var $0=new RegExp('[^0-9]');var $1=dateTime.split($0);if($1.length>=6){return new Date(parseInt($1[0]),parseInt($1[1])-1,parseInt($1[2]),parseInt($1[3]),parseInt($1[4]),parseInt($1[5]));}else{return Date.empty;}}else{return Date.empty;}},$2A:function($p0){try{var $0=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60).toString();var $1=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();var $2=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString();var $3=$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);var $4=0;$4=$3.get_key();var $5='tasktypeKey'+$1+'_'+$2+':'+$4;console.log($5);var $6=this.$0.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$60);if(this.$8!=null&&Object.keyExists(this.$8,$4)){var $7='';var $8=this.$8[$4];var $9=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3).toString();var $A=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).toString();if(!!$8){var $B=$8.split(',');if($9===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){$7=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$B[0]+'.html';}else if($9===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){$7=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$B[1]+'.html';}if($A!==$7){$p0.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4,$7);this.$0.commitCMObjectUpdate($p0);}}}else{this.$0.getDictionaryItem($6,$4,ss.Delegate.create(this,function($p1_0){
var $1_0=ss.parseXml($p1_0.get_body());var $1_1=$1_0.selectSingleNode(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).text;var $1_2='';var $1_3=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C3).toString();$5='Sate'+$1+'_'+$2+':'+$1_3;console.log($5);if(!!$1_1){$5='completionFormURL'+$1+'_'+$2+':'+$1_1;console.log($5);var $1_5=$1_1.split(',');if($1_3===P2.PS.AMEREN.CM.P2PSAMERENCM$1.IL){$1_2=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_5[0]+'.html';}else if($1_3===P2.PS.AMEREN.CM.P2PSAMERENCM$1.MO){$1_2=P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5+$1_5[1]+'.html';}$5='URL'+$1+'_'+$2+':'+$1_2;console.log($5);}var $1_4=(ss.isNullOrUndefined($p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)))?'':$p0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).toString();if($1_4!==$1_2){$p0.setPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4,$1_2);this.$0.commitCMObjectUpdate($p0);}}));}}catch($C){this.$0.errorLog('Exception from SubtaskRetrieval.cs , method :setCompletionFormURL.Message :'+$C.message);}},$2B:function($p0,$p1){try{if(this.$8==null){this.$0.externalMaskOn();}var $0=$p1.newAndUpdatedAssignments.get_count();var $1=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;var $2='';var $3='';var $4='';var $5='';var $6='';this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndNotProcessed,'+$0);var $7='ClientEvents_AfterScheduleReceivedAndNotProcessed';console.log($7);for(var $9=0;$9<$0;$9++){var $A=$p1.newAndUpdatedAssignments.get_item($9);if($A.get_key()===-1){continue;}$2=$A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$17).toString();$3=$A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$1C).toString();$7='ClientEvents_AfterScheduleReceivedAndNotProcessed:'+$2+'_'+$3;console.log($7);var $B=($A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38)==null)?'':$A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();var $C=($A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4)==null)?'':$A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C4).toString();$7='CompletionFormURL Value:'+$2+'_'+$3+':'+$C;console.log($7);if($C.indexOf(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C5)<0){$7='Entered if condition:'+$2+'_'+$3;console.log($7);this.$2A($A);}$4=(ss.isNullOrUndefined($A.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C)))?'':$A.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9C).toString();$5=(ss.isNullOrUndefined($A.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A)))?'':$A.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9A).toString();if($5==null||!$5){$6=$4;}else if(Date.parseDate($5)>Date.parseDate($4)){$6=$5;}else{$6=$4;}if(P2.PS.AMEREN.CM.AmerenP2Constants.formServices!=null){var $10=P2.PS.AMEREN.CM.AmerenP2Constants.formServices.get_formObject().getPropertyByName($1,'Key');var $11=$A.getPropertyByName($1,'Key');if($11===$10){var $12=P2.PS.AMEREN.CM.AmerenP2Constants.formServices.getUIPropertyValueByNameEx($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$38).toString();if(($12===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5F||$12===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$90)&&$B===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$5E){}else{this.$34($2,$3,$6);}}else{this.$34($2,$3,$6);}}else{this.$34($2,$3,$6);}this.$A=$2;this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndNotProcessed,'+this.$A+' '+$3);var $D=($A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$69)==null)?null:$A.getPropertyByName($1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$69).toString();var $E=new Array(Object.getKeyCount(this.$11));var $F=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$11));while($enum1.moveNext()){var $13=$enum1.current;$E[$F]=$13;$F++;}if(!ss.isNullOrUndefined($D)){if(this.$0.getSharedData($2)==null){this.$0.setSharedData($2,$D);if($E.length>0){var $enum2=ss.IEnumerator.getEnumerator($E);while($enum2.moveNext()){var $14=$enum2.current;if(!ss.isNullOrUndefined($14)){this.$2E($A,$2,$3,$14);}}}}else{if(this.$2C($D)===this.$2C(this.$0.getSharedData($2).toString())){if($B==='Dispatched'){var $enum3=ss.IEnumerator.getEnumerator($E);while($enum3.moveNext()){var $15=$enum3.current;if(!ss.isNullOrUndefined($15)){this.$2E($A,$2,$3,$15);this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndNotProcessed SXp Trig,'+this.$A+' '+$3);}}}}else{this.$0.setSharedData($2,$D);if($E.length>0){var $enum4=ss.IEnumerator.getEnumerator($E);while($enum4.moveNext()){var $16=$enum4.current;if(!ss.isNullOrUndefined($16)){this.$2E($A,$2,$3,$16);this.$0.infoLog('From ClientEvents_AfterScheduleReceivedAndNotProcessed SXp Trig,'+this.$A+' '+$3);}}}}}}}var $8=$p1.deletedAssignments;if($8.length>0){var $enum5=ss.IEnumerator.getEnumerator($8);while($enum5.moveNext()){var $17=$enum5.current;this.$0.getAssignmentByKey($17,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=$1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();$3=$1_0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString();if(!ss.isNullOrUndefined(window.localStorage.getItem($1_1+'_'+$3+'_MeterHistory'))){window.localStorage.removeItem($1_1+'_'+$3+'_MeterHistory');}this.$35($1_1,$3);if(this.$0.getSharedData($1_1)!=null){}this.$0.getLoggedInEngineer(function($p2_0){
if($p2_0!=null){var $2_0='clickmobiledb'+(($p2_0.getPropertyByName('LoginName')==null)?'':$p2_0.getPropertyByName('LoginName').toString().toLowerCase());var dbConn = window.openDatabase($2_0,'','my first database',2*1024*1024);dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMPVSubTask WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$3+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMRelayInspection WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$3+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMMaterial WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$3+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMAssetFeatureSpec WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$3+'<%'])});dbConn.transaction(function(tx){tx.executeSql('DELETE FROM W6CMMeterHistory WHERE [BODY] LIKE ? AND [BODY] LIKE ?',['%>'+$1_1+'<%','%>'+$3+'<%'])});}});}));}}}catch($18){this.$0.errorLog('Exception from SubtaskRetrieval.cs, method:ClientEvents_AfterScheduleReceivedAndNotProcessed .Message:'+$18.message);}},$2C:function($p0){var $0='';var $1=Date.parseDate($p0);$0=$1.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateandMinuteOnlyFormat);return $0;},getAllAssignments:function(lstAssignments){try{if(lstAssignments.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $0=$enum1.current;this.$2A($0);}}this.$0.externalMaskOff();}catch($1){this.$0.errorLog('FileName: SubTaskRetrivel;, Method:GetAllAssignments. Exception msg is: '+$1.message);this.$0.externalMaskOff();}},$2D:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);},$2E:function($p0,$p1,$p2,$p3){this.$0.infoLog('From TriggerSxpToGetDisconnectedObjects');var $0='<SXPServerGetObjects>';if($p3==='SubTask'){$0=$0+'<ObjectType>PV'+$p3+'</ObjectType>';}else{$0=$0+'<ObjectType>'+$p3+'</ObjectType>';}$0=$0+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$p2+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$p2+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';if($p3==='SubTask'){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$11['PVSubTask']));while($enum1.moveNext()){var $1=$enum1.current;$0=$0+'<Item>'+$1+'</Item>';}}else{var $enum2=ss.IEnumerator.getEnumerator(Object.keys(this.$11[$p3]));while($enum2.moveNext()){var $2=$enum2.current;$0=$0+'<Item>'+$2+'</Item>';}}$0=$0+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($0);},$2F:function($p0,$p1){var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;var $1=parseInt($p0.getPropertyByName($0,'Number').toString());var $2='<SXPServerGetObjects>'+'<ObjectType>PVSubTask</ObjectType>'+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.subTaskItemList);while($enum1.moveNext()){var $3=$enum1.current;$2=$2+'<Item>'+$3+'</Item>';}$2=$2+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($2);},$30:function($p0,$p1){var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;var $1=parseInt($p0.getPropertyByName($0,'Number').toString());var $2='<SXPServerGetObjects>'+'<ObjectType>RelayInspection</ObjectType>'+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionItemList);while($enum1.moveNext()){var $3=$enum1.current;$2=$2+'<Item>'+$3+'</Item>';}$2=$2+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($2);},$31:function($p0,$p1){var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;var $1=parseInt($p0.getPropertyByName($0,'Number').toString());var $2='<SXPServerGetObjects>'+'<ObjectType>Material</ObjectType>'+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.materialItemList);while($enum1.moveNext()){var $3=$enum1.current;$2=$2+'<Item>'+$3+'</Item>';}$2=$2+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($2);},$32:function($p0,$p1){var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;var $1=parseInt($p0.getPropertyByName($0,'Number').toString());var $2='<SXPServerGetObjects>'+'<ObjectType>AssetFeatureSpec</ObjectType>'+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.specificationItemList);while($enum1.moveNext()){var $3=$enum1.current;$2=$2+'<Item>'+$3+'</Item>';}$2=$2+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($2);},$33:function($p0,$p1){var $0=W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task;var $1=parseInt($p0.getPropertyByName($0,'Number').toString());var $2='<SXPServerGetObjects>'+'<ObjectType>MeterHistory</ObjectType>'+'<Indexes>'+' <Index>'+'<LowBound>'+' <Property>'+' <Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+' <Property>'+'  <Name>Number</Name>'+' <Value>'+$1+'</Value>'+'</Property>'+'</LowBound>'+'<HighBound>'+'<Property>'+'<Name>CallID</Name>'+'<Value>'+$p1+'</Value>'+'</Property>'+'<Property>'+'<Name>Number</Name>'+'<Value>'+$1+'</Value>'+'</Property>'+'</HighBound>'+'</Index>'+'</Indexes>'+'<RequestedProperties>';var $enum1=ss.IEnumerator.getEnumerator(P2.PS.AMEREN.CM.AmerenP2Constants.meterhistoryItemList);while($enum1.moveNext()){var $3=$enum1.current;$2=$2+'<Item>'+$3+'</Item>';}$2=$2+'</RequestedProperties>'+'<ErrorOnNonExistingDictionaries>true</ErrorOnNonExistingDictionaries>'+'<OneTransaction>true</OneTransaction>'+'<ContinueOnError>false</ContinueOnError>'+'</SXPServerGetObjects>';this.$0.sendWrappedCustomSXP($2);},$34:function($p0,$p1,$p2){var $0=$p0+'_'+$p1;var $1={};if(!ss.isNullOrUndefined(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B))&&!String.isNullOrEmpty(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B).toString())){$1=JSON.parse(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B).toString());if(Object.keyExists($1,$0)){var $3=$1[$0];if($3[0]!==$p2){var $4=[];$4.add($p2);$4.add('False');$1[$0]=$4;var $5=Date.parseDate($p2);var $6=$5-Date.get_now();window.setTimeout(ss.Delegate.create(this,this.$36),$6);}}else{var $7=[];$7.add($p2);$7.add('False');$1[$0]=$7;var $8=Date.parseDate($p2);var $9=$8-Date.get_now();window.setTimeout(ss.Delegate.create(this,this.$36),$9);}}else{var $A=[];$A.add($p2);$A.add('False');$1[$0]=$A;var $B=Date.parseDate($p2);var $C=$B-Date.get_now();window.setTimeout(ss.Delegate.create(this,this.$36),$C);}var $2=JSON.stringify($1);window.sessionStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B,$2);},$35:function($p0,$p1){var $0={};var $1=$p0+'_'+$p1;if(!ss.isNullOrUndefined(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B))&&!String.isNullOrEmpty(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B).toString())){$0=JSON.parse(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B).toString());if(Object.keyExists($0,$1)){delete $0[$1];}var $2=JSON.stringify($0);window.sessionStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B,$2);}},$36:function(){var $0={};if(!ss.isNullOrUndefined(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B))&&!String.isNullOrEmpty(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B).toString())){$0=JSON.parse(window.sessionStorage.getItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B).toString());var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $1=$enum1.current;var $2=Date.parseDate($0[$1][0].toString());if($2<Date.get_now()&&$0[$1][1]==='False'){$0[$1][1]='True';var $3=JSON.stringify($0);window.sessionStorage.setItem(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$9B,$3);this.$0.showMessageBox('Order '+$1+' is in Jeopardy','Jeopardy Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}}}}}
P2.PS.AMEREN.CM.Events.AfterMessageReceived_Timesheet=function(customSettings){this.calendarSXP='';this.$0='';this.$5='';this.$7='';this.$8='';this.$9='';this.$A='';this.$B='';this.$C=[];this.$D=[];this.$E='';this.$F='';this.$10='';this.$11='';this.$12='';this.$1A=Date.get_today();this.$1B=new Date();this.$1C=new Date();this.$1F=[];W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterMsgProcessed(ss.Delegate.create(this,this.$29));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_wrappedCustomSXPResultReceived(ss.Delegate.create(this,this.$2A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeCommitObject(ss.Delegate.create(this,this.$2B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$2E));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$2D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$28));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$27));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySync(ss.Delegate.create(this,this.$25));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySyncSessionCompleted(ss.Delegate.create(this,this.$2F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$26));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterDictionaryDataLoaded(ss.Delegate.create(this,this.$24));P2.PS.AMEREN.CM.AmerenP2Constants.timesheetCustomSettings=customSettings;this.calendarSXP=customSettings;}
P2.PS.AMEREN.CM.Events.AfterMessageReceived_Timesheet.prototype={controllerServices:null,formServices:null,$1:null,$2:null,$3:null,$4:null,$6:0,$13:null,$14:null,$15:null,$16:null,$17:null,$18:null,$19:null,$20:0,$21:0,$22:true,$23:null,$24:function($p0,$p1){try{this.$6=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);if($p1.get_formObject().get_objectType()===this.$6){var $0=[];if($p1.get_propertyName()==='Type_SO'){if(this.controllerServices.getSharedData('removedActivityList')!=null){var $1=$p0.getSharedData('removedActivityList').toString();if($1!=null){$0=this.controllerServices.getSharedData('removedActivityList');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;$("div[objname='W6CMPropPanelCombo[Type_SO:foreign_Key]'] select").find("option[value='"+$2+"']").remove();}}}}}}catch($3){$p0.errorLog('Error for FormEvents_AfterDictionaryDataLoaded()'+$3.message);}},$25:function($p0,$p1){this.$23=$p0;var $0=this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A);var $1=this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B);if($p0.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7)==null&&$p0.getSharedData(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$25)==null){$p0.getBusinessViewServices().getAllBusinessViewItemsByObjectType($p0.getCollectionIDByName('CrewAllocation'),ss.Delegate.create(this,function($p1_0){
$p0.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7,$p1_0);if($p1_0!=null){if($p1_0.get_count()>1){var $1_0=[];var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2=$1_1.getPropertyByName(this.controllerServices.getCollectionIDByName('CrewAllocation'),'AllocatedResource');$1_0.add($1_2.get_key());}$p0.setSharedData(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$25,$1_0);}}}));}this.$23.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if(this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6)==null){if($p1_0.get_key()!==-1){this.$23.setSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6,$p1_0);}}if(this.$23.getSharedData('LoggedEnggBusinessLine')==null){if($p1_0.getPropertyByName('Region')!=null){this.$13=$p1_0.getPropertyByName('Region').toString();var $1_0=$p1_0.getPropertyByName('Name').toString();$p0.setSharedData('LoggedEnggName',$1_0);$p0.setSharedData('LoggedEnggRegion',this.$13);var $1_1=null;if(ss.parseXml($p1_0.getBody())!=null){$1_1=ss.parseXml($p1_0.getBody()).selectNodes('P');var $enum1=ss.IEnumerator.getEnumerator($1_1);while($enum1.moveNext()){var $1_2=$enum1.current;if($1_2.attributes.getNamedItem('i').nodeValue!=null){if($p1_0.getPropertyName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,parseInt($1_2.attributes.getNamedItem('i').nodeValue))==='District'){var $1_3=$1_2.text.split(' ');if(($1_3[$1_3.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A8)||($1_3[$1_3.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A9)||($1_3[$1_3.length-1].toLowerCase()===P2.PS.AMEREN.CM.P2PSAMERENCM$1.$AA)){$p0.setSharedData('LoggedEnggBusinessLine',$1_3[$1_3.length-1]);}}}}}}}}));},$26:function($p0,$p1){try{var $0='';var $1='';var $2=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1A);$p0.getDictionaryItemsFilterByName($2,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1F,1,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=ss.parseXml($p1_0.get_item(0).get_body());var $1_1=$1_0.selectSingleNode('Key').text;$p0.setSharedData('workActivityKey',$1_1);}});}catch($3){$p0.errorLog('Error for ClientEvents_AfterClientInitialized()'+$3.message);}},$27:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.$6){this.$6=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);this.$7=$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$2);this.$A=this.fetchDictionaryValue(this.$7,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1);if(this.$A==='E'){if(!$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12)||$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12)==null){$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,'');$p1.cancel=true;}}if(this.$A==='H'){if(!$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E)||$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E)==null){$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E,'');$p1.cancel=true;}}if(this.$A==='W'||this.$A==='S'){$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,0);$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E,0);}}}catch($0){$p0.errorLog('Error for Before change'+$0.message);}},$28:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer){this.$6=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);if($p1.get_sourceObject().get_objectType()===this.$6){$p1.cancel=true;}}}catch($0){this.controllerServices.errorLog($0.message);}},$29:function($p0,$p1){try{this.controllerServices=$p0;var $0='';var $1=ss.parseXml($p1.message);$0=$1.documentElement.nodeName;if($0===P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$C){var $2='';var $3='';var $4=null;var $5=null;if($1!=null){$4=$1.selectNodes('P');var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $7=$enum1.current;$2=$7.attributes.getNamedItem('i').nodeValue;if($2==='5'){this.$13=$7.text;$p0.setSharedData('LoggedEnggRegion',this.$13);}if($2==='8'){$5=$7.selectNodes('P');var $enum2=ss.IEnumerator.getEnumerator($5);while($enum2.moveNext()){var $8=$enum2.current;$2=$8.attributes.getNamedItem('i').nodeValue;if($2==='3'){this.$0=$8.text;}}}}}var $6;if(!!this.$0){console.log('TimesheetCustom: Engineer calendar name retrieved'+' '+'-'+' '+this.$0);this.$23.infoLog('TimesheetCustom: Engineer calendar name retrieved'+' '+'-'+' '+this.$0);this.retrieveCalenderDetails(this.$0);}else{console.log('TimesheetCustom: Engineer calendar not defined');this.$23.infoLog('TimesheetCustom: Engineer calendar not defined');}}}catch($9){$p0.errorLog('Error for After Engineer messageReceived'+$9.message);}},retrieveCalenderDetails:function(LoggedUserCalenderName){try{if(!!LoggedUserCalenderName){this.calendarSXP=this.calendarSXP.replaceAll('CalenderName',LoggedUserCalenderName);this.controllerServices.sendWrappedCustomSXP(this.calendarSXP);}}catch($0){this.controllerServices.errorLog('Error on Sending SXP'+$0.message);}},$2A:function($p0,$p1){try{console.log($p1);var $0=new P2.PS.AMEREN.CM.Events.Timesheet_CalendarInterval();if($p1.messageName==='SXPCalendarGetIntervalsResult'&&$p1.message.selectNodes('//SXPCalendarGetIntervalsResult/Calendar/WeeklyLevel').length>0){var $enum1=ss.IEnumerator.getEnumerator($p1.message.selectNodes('//SXPCalendarGetIntervalsResult/Calendar/WeeklyLevel'));while($enum1.moveNext()){var $1=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($1.selectNodes('//WeeklyInterval'));while($enum2.moveNext()){var $2=$enum2.current;var $3=$2.selectSingleNode('Status').text;var $enum3=ss.IEnumerator.getEnumerator($2.selectNodes('//WeeklyIntervalStart'));while($enum3.moveNext()){var $4=$enum3.current;var $5=$4.childNodes.length;var $6=$4.selectSingleNode('Day').text;if($6==='Monday'){if($0.day1==null){$0.day1='Monday';$0.day1Start=$4.selectSingleNode('Time').text;}}else if($6==='Tuesday'){if($0.day2==null){$0.day2='Tuesday';$0.day2Start=$4.selectSingleNode('Time').text;}}else if($6==='Wednesday'){if($0.day3==null){$0.day3='Wednesday';$0.day3Start=$4.selectSingleNode('Time').text;}}else if($6==='Thursday'){if($0.day4==null){$0.day4='Thursday';$0.day4Start=$4.selectSingleNode('Time').text;}}else if($6==='Friday'){if($0.day5==null){$0.day5='Friday';$0.day5Start=$4.selectSingleNode('Time').text;}}else if($6==='Saturday'){if($0.day6==null){$0.day6='Saturday';$0.day6Start=$4.selectSingleNode('Time').text;}}else if($6==='Sunday'){if($0.day7==null){$0.day7='Sunday';$0.day7Start=$4.selectSingleNode('Time').text;}}}}var $enum4=ss.IEnumerator.getEnumerator($1.selectNodes('//SXPCalendarGetIntervalsResult/Calendar/WeeklyLevel/WeeklyInterval/WeeklyIntervalFinish'));while($enum4.moveNext()){var $7=$enum4.current;var $8=$7.selectSingleNode('Day').text;if($8==='Monday'){$0.day1='Monday';$0.day1End=$7.selectSingleNode('Time').text;}else if($8==='Tuesday'){$0.day2='Tuesday';$0.day2End=$7.selectSingleNode('Time').text;}else if($8==='Wednesday'){$0.day3='Wednesday';$0.day3End=$7.selectSingleNode('Time').text;}else if($8==='Thursday'){$0.day4='Thursday';$0.day4End=$7.selectSingleNode('Time').text;}else if($8==='Friday'){$0.day5='Friday';$0.day5End=$7.selectSingleNode('Time').text;}else if($8==='Saturday'){$0.day6='Saturday';$0.day6End=$7.selectSingleNode('Time').text;}else if($8==='Sunday'){$0.day7='Sunday';$0.day7End=$7.selectSingleNode('Time').text;}}this.controllerServices.setSharedData('calendarShiftTime',$0);window.sessionStorage.setItem('EngineerShift',JSON.stringify($0));console.log('TimesheetCustom: Engineer shift stored in session storage');this.$23.infoLog('TimesheetCustom: Engineer shift stored in session storage');}}if($p1.messageName==='SXPMultipleOperationsResult'){if($p1.message.selectNodes('//SXPMultipleOperationsResult/Operations/Operation/Object/Engineer').length>0){this.controllerServices.externalMaskOff();this.controllerServices.showMessageBox('Please log out and log in again for the changes to take effect','Success',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}else if($p1.message.selectNodes('//SXPMultipleOperationsResult/Error').length>0){this.controllerServices.externalMaskOff();this.controllerServices.showMessageBox('Please try again','Failed',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}}}catch($9){this.controllerServices.errorLog('Error for SXP response'+$9.message);}},$2B:function($p0,$p1){try{var $0=false;var $1='';this.$6=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);var $2=this.controllerServices.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B);if($p1.objectToCommit.get_objectType()===$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0)){var $3=$p1.objectToCommit.getPropertyByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D);if($3==null){this.controllerServices.getDictionaryItemsFilterByName($2,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,50,function($p1_0){
if($p1_0.get_item(0)!=null){$p1.objectToCommit.setPropertyByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p1_0.get_item(0));}});}var $4=$p1.objectToCommit.getPropertyByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$2);$1=$4.get_name().toString();if(($1==='Driving'||$1==='Work')&&!String.equals($p1.objectToCommit.getPropertyByName('RelatedTaskKey_SO').toString(),'0',true)){var $7=$p1.objectToCommit.getPropertyByName('MaximoWONumber').toString();if(!!$7||!!$7){if($7.indexOf('_')!==-1){var $8=$7.split('_');var $9=$8[0];var $A=parseInt($8[1]);if(!!$9||!!$9){$p1.objectToCommit.setPropertyByName('MaximoWONumber',$9);}if(!!$8[1]||!!$8[1]){$p1.objectToCommit.setPropertyByName('MaximoTaskNumber',$A);}}}}var $5='';var $6=$p1.objectToCommit.getPropertyByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$10);$5=$6.get_displayString();if($5!=null){$p1.objectToCommit.setPropertyByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$13,$5);}}}catch($B){this.controllerServices.errorLog(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$6+$B.message);}},$2C:function($p0,$p1){var $0=false;try{var $1=$p0.split(':');var $2=$p1.split(':');var $3=parseInt($1[0]);if($3>12){$3=$3-12;}var $4=parseInt($2[0]);var $5=parseInt($1[1]);$5=(!$5)?60:$5;var $6=parseInt($2[1]);if($5===60){if(($3-$4)===1||!($3-$4)&&($5-$6)<=15){this.$1.setMinutes($5);$0=true;}}else{if($6<=$5){if(($3-$4)===1||!($3-$4)&&($5-$6)<=15){this.$1.setMinutes($5);$0=true;}}}}catch($7){this.controllerServices.errorLog('Error for GetTimeDifference'+$7.message);$0=false;}return $0;},fetchDictionaryValue:function(dictionaryValue,colName){var $0='';try{var $1=dictionaryValue;var $2=ss.parseXml($1.get_body());$0=$2.selectSingleNode(colName).text;}catch($3){this.controllerServices.errorLog(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$6+$3.message);}return $0;},searchDictionaryValue:function(dictonaryName,searchString,colName){try{var $0=this.controllerServices.getDictionaryIDByName(dictonaryName);this.controllerServices.getDictionaryItemsFilterByName($0,searchString,50,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=ss.parseXml($p1_0.get_item(0).get_body());var $1_1=$1_0.selectSingleNode(colName).text;this.$5=$1_1;}}));}catch($1){this.controllerServices.errorLog(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$6+$1.message);}return this.$5;},$2D:function($p0,$p1){try{var $0=0,$1=0;var $2;var $3,$4='';var $5=false;this.$6=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);var $6=[];var $7=[];var $8=this.controllerServices.getDictionaryIDByName('ActivityType_SO');if($p1.get_formObject().get_objectType()===this.$6){this.$13=$p0.getSharedData('LoggedEnggRegion').toString();$p0.getDictionaryItems($p0.getDictionaryIDByName('PayCode'),100,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=new P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject();var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_3=$enum1.current;$1_0=new P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject();var $1_4=ss.parseXml($1_3.get_body());var $1_5=$1_4.selectSingleNode('Priority').text;$1_0.aPriority=$1_5;$1_0.bName=$1_4.selectSingleNode('Name').text;$1_0.cCode=$1_4.selectSingleNode('Code').text;var $1_6=$1_4.selectSingleNode('Key').text;$1_0.dKey=$1_6;$1_0.region=$1_4.selectSingleNode('Region').text;$2=$1_0.region.split(',');$5=false;if(this.$13.length>0){if($2[0].length>0){var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $1_7=$enum2.current;if($1_7===this.$13){$5=true;$7.add($1_0);}}}else{$7.add($1_0);}}else{$7.add($1_0);}}var $1_1=[];$1_1.add('1');$1_1.add('2');$1_1.add('3');$1_1.add('4');$1_1.add('5');$1_1.add('6');$1_1.add('7');var $1_2=new ss.StringBuilder();var $enum3=ss.IEnumerator.getEnumerator($1_1);while($enum3.moveNext()){var $1_8=$enum3.current;var $1_9=$1_8;var $enum4=ss.IEnumerator.getEnumerator($7);while($enum4.moveNext()){var $1_A=$enum4.current;if($1_9===$1_A.aPriority.toString()){var $1_B='<option value="'+$1_A.bName+'" >'+$1_A.bName+'</option>';$1_2.append($1_B);}}}$('#PayCodeValues').append($1_2.toString());if($p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D)!=null){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D).toString(),150,function($p2_0){
if($p2_0.get_item(0).get_name()===$p1.get_formServices().getUIPropertyValueByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D).toString()){$('#PayCodeValues').val($p2_0.get_item(0).getAttribute('Name'));}});}}}));this.$7=$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$2);this.$10=$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D);this.$B=this.fetchDictionaryValue(this.$7,'Code');var $9=this.controllerServices.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B);if(this.controllerServices.getSharedData('removedActivityList')==null){this.controllerServices.getDictionaryItems(this.controllerServices.getDictionaryIDByName('ActivityType_SO'),200,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;this.$13=$p0.getSharedData('LoggedEnggRegion').toString();var $1_1=ss.parseXml($1_0.get_body());this.$12=$1_1.selectSingleNode('Name').text;if($1_1.selectSingleNode('Region')!=null){this.$F=$1_1.selectSingleNode('Region').text;this.$14=$1_1.selectSingleNode('Key').text;this.$16=this.$F.split(',');$5=false;if(this.$16[0].length>0){var $enum2=ss.IEnumerator.getEnumerator(this.$16);while($enum2.moveNext()){var $1_2=$enum2.current;if($1_2===this.$13){$5=true;}}if(!$5){$("div[objname='W6CMPropPanelCombo[Type_SO:foreign_Key]'] select").find("option[value='"+$1_0.get_key()+"']").remove();$6.add($1_0.get_key());}}if(this.$12.startsWith('(NR)')){$("div[objname='W6CMPropPanelCombo[Type_SO:foreign_Key]'] select").find("option[value='"+$1_0.get_key()+"']").remove();$6.add($1_0.get_key());}}}$p0.setSharedData('removedActivityList',$6);}}));}this.controllerServices.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('PayCode'),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,50,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){if(this.$10==null){$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p1_0.get_item(0));$('#PayCodeValues').val($p1_0.get_item(0).getAttribute('Name'));}}}));if(!!this.$7){this.controllerServices.getDictionaryItemsFilterByName($8,this.$7.toString(),50,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=ss.parseXml($p1_0.get_item(0).get_body());this.$A=$1_0.selectSingleNode(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1).text;this.$B=$1_0.selectSingleNode('Code').text;}if(!!this.$A){this.$C.add(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$18);this.$C.add(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19);this.$D.add(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$14);this.$D.add(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$D);this.$D.add('Duration_SO');if(this.$A==='W'){$0=0;var $enum1=ss.IEnumerator.getEnumerator(this.$C);while($enum1.moveNext()){var $1_1=$enum1.current;this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,this.$C[$0])[0];this.$19.set_Visibility(true);$0+=1;}$0=0;}if(this.$A==='E'){$0=0;var $enum2=ss.IEnumerator.getEnumerator(this.$D);while($enum2.moveNext()){var $1_2=$enum2.current;this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,this.$D[$0])[0];this.$19.set_Visibility(false);$0+=1;}$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,true);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12)[0];this.$19.set_Visibility(true);}if(this.$A==='S'){$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19,true);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19)[0];this.$19.set_Visibility(true);$8=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$8);$p0.getDictionaryItemsFilterByName($8,this.$7.toString(),50,ss.Delegate.create(this,function($p2_0){
if($p2_0.get_item(0)!=null){var $2_0=ss.parseXml($p2_0.get_item(0).get_body());var $2_1=$2_0.selectSingleNode(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$A).text;$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19,$2_1);}}));}if(this.$A==='H'){$0=0;var $enum3=ss.IEnumerator.getEnumerator(this.$D);while($enum3.moveNext()){var $1_3=$enum3.current;this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,this.$D[$0])[0];this.$19.set_Visibility(false);$0+=1;}$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E,true);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E)[0];this.$19.set_Visibility(true);}}}));this.controllerServices.getDictionaryItemsFilterByName($9,this.$10.toString(),50,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=ss.parseXml($p1_0.get_item(0).get_body());this.$9=$1_0.selectSingleNode('Code').text;}if(!!this.$9){if(this.$9==='OT1'||this.$9==='OT2'||this.$9==='OT3'||this.$9==='OT4'||this.$9==='OT5'){$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,'OvertimeReasonCode',true);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,'OvertimeReasonCode')[0];this.$19.set_Visibility(true);}else{$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,'OvertimeReasonCode',false);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,'OvertimeReasonCode')[0];this.$19.set_Visibility(false);}}}));}}}catch($A){$p0.errorLog('Error for AfterOpen View'+$A.message);}},$2E:function($p0,$p1){try{var $0=0;this.$6=$p0.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);this.$7=$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$2);this.$8=$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D);if($p1.get_formObject().get_objectType()===this.$6){switch($p1.get_propertyName()){case 'HeadquarteredOut':var $1=$p1.get_formServices().getUIPropertyValueByNameEx(this.$6,'HeadquarteredOut').toString();if($1.toLowerCase()==='false'){$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,'');}break;case 'Type_SO':this.$A=this.fetchDictionaryValue(this.$7,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1);this.$B=this.fetchDictionaryValue(this.$7,'Code');this.$C.add(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$18);this.$C.add(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19);if(this.$A==='W'){$0=0;var $enum1=ss.IEnumerator.getEnumerator(this.$C);while($enum1.moveNext()){var $2=$enum1.current;this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,this.$C[$0])[0];this.$19.set_Visibility(true);$0+=1;}$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$18,true);$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19,true);}else{$0=0;var $enum2=ss.IEnumerator.getEnumerator(this.$C);while($enum2.moveNext()){var $3=$enum2.current;this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,this.$C[$0])[0];this.$19.set_Visibility(false);$0+=1;}$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$18,false);$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19,false);$0=0;}if(this.$A==='E'){this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12)[0];this.$19.set_Visibility(true);$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,'');$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,true);$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$14,Date.get_now());$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$D,Date.get_now());}else{$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,false);$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12,0);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$12)[0];this.$19.set_Visibility(false);}if(this.$A==='S'){$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19,true);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19)[0];this.$19.set_Visibility(true);var $4=$p0.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$8);$p0.getDictionaryItemsFilterByName($4,this.$7.toString(),50,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=ss.parseXml($p1_0.get_item(0).get_body());var $1_1=$1_0.selectSingleNode(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$A).text;$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$19,$1_1);}}));}if(this.$A==='H'){this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E)[0];this.$19.set_Visibility(true);$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E,'');$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E,true);$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$14,Date.get_now());$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$D,Date.get_now());}else{$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E,false);$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E,0);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$E)[0];this.$19.set_Visibility(false);}break;case 'PayCode':this.$9=this.fetchDictionaryValue(this.$8,'Code');if(this.$9==='OT1'||this.$9==='OT2'||this.$9==='OT3'||this.$9==='OT4'||this.$9==='OT5'){$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,'OvertimeReasonCode',true);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,'OvertimeReasonCode')[0];this.$19.set_Visibility(true);}else{$p1.get_formServices().setPropertyMandatoryByNameEx(this.$6,'OvertimeReasonCode',false);this.$18=W6.ClickMobile.Web.UI.frmGenericForm.getOpenObjectForm($p1.get_formObject().get_objectType(),$p1.get_formObject().get_key());this.$19=this.$18.getPanelsByPropertyName(this.$6,'OvertimeReasonCode')[0];this.$19.set_Visibility(false);}var $5=this.controllerServices.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B);var $6=this.controllerServices.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1A);this.controllerServices.getDictionaryItemsFilterByName($5,$p1.get_newValue().toString(),50,ss.Delegate.create(this,function($p1_0){
if($p1_0.get_item(0)!=null){var $1_0=ss.parseXml($p1_0.get_item(0).get_body());this.$11=$1_0.selectSingleNode(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1C).text;this.controllerServices.getDictionaryItemsFilterByName($6,this.$11,50,ss.Delegate.create(this,function($p2_0){
if($p2_0.get_item(0)!=null){$p1.get_formServices().setUIPropertyValueByNameEx(this.$6,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$2,$p2_0.get_item(0));}}));}}));break;}}}catch($7){$p0.errorLog('Error for AfterProperty change'+$7.message);}},$2F:function($p0,$p1){try{this.$23=$p0;this.createActivity();}catch($0){console.log('TimesheetCustom: Error in AfterDictionarySyncSessionCompletedTimesheet()'+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in AfterDictionarySyncSessionCompletedTimesheet()'+'-'+$0.message);this.$23.errorLog('Error for AfterDictionarySyncSessionCompletedTimesheet'+$0.message);}},createTimesheetActivity:function(ControllerServicesTimesheet){this.$23=ControllerServicesTimesheet;this.controllerServices=ControllerServicesTimesheet;this.createActivity();},createActivity:function(){console.log('TimesheetCustom: Entered CreateActivity()');this.$23.infoLog('TimesheetCustom: Entered CreateActivity()');var $0=false;var $1=false;var $2=null;$0=W6.ClickMobile.Web.Timesheet.W6CMTimesheetManager.crewInitComplete();$1=W6.ClickMobile.Web.Timesheet.W6CMTimesheetManager.initComplete();if(($0&&$1)||this.$20>45){if($0&&$1){console.log('TimesheetCustom: Timesheet Objects and Dictionaries Retrieved');this.$23.infoLog('TimesheetCustom: Timesheet Objects and Dictionaries Retrieved');console.log('TimesheetCustom: crewComplete-'+$0+' '+'timesheetInitComplete-'+$1);this.$23.infoLog('TimesheetCustom: crewComplete-'+$0+' '+'timesheetInitComplete-'+$1);}else{console.log('TimesheetCustom: Timesheet Objects and Dictionaries Not Retrieved,continuing activity creation');this.$23.infoLog('TimesheetCustom: Timesheet Objects and Dictionaries Not Retrieved,continuing activity creation');console.log('TimesheetCustom: crewComplete-'+$0+' '+'timesheetInitComplete-'+$1);this.$23.infoLog('TimesheetCustom: crewComplete-'+$0+' '+'timesheetInitComplete-'+$1);}this.$20=0;var $3=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$0);var $4=this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1A);var $5=false;var $6='false';var $7=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($7!=null){console.log('TimesheetCustom: Engineer Received');this.$23.infoLog('TimesheetCustom: Engineer Received');if($7.getPropertyByName('IsSupervisor')!=null){$6=$7.getPropertyByName('IsSupervisor').toString();console.log('TimesheetCustom: IsSupervisor not null: Value -'+' '+$6);this.$23.infoLog('TimesheetCustom: IsSupervisor not null: Value -'+' '+$6);}else{console.log('TimesheetCustom: IsSupervisor null, taking default value as false');this.$23.infoLog('TimesheetCustom: IsSupervisor null, taking default value as false');}if(window.sessionStorage.getItem('EngineerShift')!=null){if(!!window.sessionStorage.getItem('EngineerShift').toString()){var $8=window.sessionStorage.getItem('EngineerShift').toString();$2=JSON.parse($8);console.log('TimesheetCustom: Engineer shift retrieved-'+' '+$8);this.$23.infoLog('TimesheetCustom: Engineer shift retrieved-'+' '+$8);}}if($2!=null||this.$21>120){this.$21=0;if($2==null){console.log('TimesheetCustom: Engineer shift details not retrieved...Stopping activity creation');this.$23.infoLog('TimesheetCustom: Engineer shift details not retrieved...Stopping activity creation');}else{$5=this.getShift($2);if($5&&$6.toLowerCase()==='false'){console.log('TimesheetCustom: Shift start and shift end time fetched');this.$23.infoLog('TimesheetCustom: Shift start and shift end time fetched');this.$23.getDictionaryItemsFilterByName($4,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$21,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName($4,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$22,1,ss.Delegate.create(this,function($p2_0){
if($p1_0.get_item(0)!=null&&$p2_0.get_item(0)!=null){this.searchActivity($p1_0.get_item(0),$p2_0.get_item(0),$7);}}));}));}else{if(!$5){console.log('TimesheetCustom: Shift start and shift end time not received.Stopping activity creation');this.$23.infoLog('TimesheetCustom: Shift start and shift end time not received.Stopping activity creation');this.$23.showMessageBox(P2.PS.AMEREN.CM.AmerenP2Constants.shiftNotDefinedWarning,'Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.close,null);}if($6.toLowerCase()==='true'){console.log('TimesheetCustom: IsSupervisor-'+$6+' '+'.Stopping activity creation');this.$23.infoLog('TimesheetCustom: IsSupervisor-'+$6+' '+'.Stopping activity creation');}}}}else{console.log('TimesheetCustom: Waiting for Engineer shift details...');this.$23.infoLog('TimesheetCustom: Waiting for Engineer shift details...');window.setTimeout(ss.Delegate.create(this,function(){
this.$21++;this.createActivity();}),2000);}}}else{console.log('TimesheetCustom:Waiting for Timesheet Objects and Dictionaries....');this.$23.infoLog('TimesheetCustom:Waiting for Timesheet Objects and Dictionaries....');console.log('TimesheetCustom:crewComplete-'+$0+' '+'timesheetInitComplete-'+$1);this.$23.infoLog('TimesheetCustom:crewComplete-'+$0+' '+'timesheetInitComplete-'+$1);window.setTimeout(ss.Delegate.create(this,function(){
this.$20++;this.createActivity();}),2000);}},createFirstActivity:function(){try{console.log('TimesheetCustom: Creating activity Delay-Other');this.$23.infoLog('TimesheetCustom: Creating activity Delay-Other');this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$21,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),this.$1B.getHours(),this.$1B.getMinutes(),this.$1B.getSeconds()+1080);var $2_1=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_1.getPropertyByName('Key')!=null){var $2_2=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_4.set_mobileKey('');$2_4.set_key($2_1.get_key());var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_1.get_key(),this.$23.guidGenerator(),null,$2_4);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,$2_5);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_5);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,this.$1B);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,$2_0);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(($2_0-this.$1B)/60000));if($p1_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_3);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Delay-Other'+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Delay-Other'+'-'+$0.message);this.$23.errorLog('Error for CreateFirstActivity()'+$0.message);}},createFirstActivityCrew:function(AllocatedResource){try{console.log('TimesheetCustom: Creating activity Delay-Other for'+' '+AllocatedResource.get_displayString());this.$23.infoLog('TimesheetCustom: Creating activity Delay-Other for'+' '+AllocatedResource.get_displayString());this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$21,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),this.$1B.getHours(),this.$1B.getMinutes(),this.$1B.getSeconds()+1080);var $2_1=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_1.getPropertyByName('Key')!=null){var $2_2=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,AllocatedResource);var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_4.set_mobileKey('');$2_4.set_key($2_1.get_key());var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_1.get_key(),this.$23.guidGenerator(),null,$2_4);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_5);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,this.$1B);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,$2_0);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(($2_0-this.$1B)/60000));if($p1_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_3);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Delay-Other for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Delay-Other for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.errorLog('Error for CreateFirstActivityCrew()'+$0.message);}},createSecondActivity:function(){try{console.log('TimesheetCustom: Creating activity Dept. Transp. Requirements');this.$23.infoLog('TimesheetCustom: Creating activity Dept. Transp. Requirements');this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$22,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_0.getPropertyByName('Key')!=null){var $2_1=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_2=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());var $2_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_3.set_mobileKey('');$2_3.set_key($2_0.get_key());var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_0.get_key(),this.$23.guidGenerator(),null,$2_3);$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,$2_4);$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_4);$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),this.$1B.getHours(),this.$1B.getMinutes(),this.$1B.getSeconds()+1080));if($p1_0.get_item(0)!=null){$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_2);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Dept. Transp. Requirements'+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Dept. Transp. Requirements'+'-'+$0.message);this.$23.errorLog('Error for CreateSecondActivity()'+$0.message);}},createSecondActivityCrew:function(AllocatedResource){try{console.log('TimesheetCustom: Creating activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString());this.$23.infoLog('TimesheetCustom: Creating activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString());this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$22,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_0.getPropertyByName('Key')!=null){var $2_1=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_2=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,AllocatedResource);var $2_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_3.set_mobileKey('');$2_3.set_key($2_0.get_key());var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_0.get_key(),this.$23.guidGenerator(),null,$2_3);$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_4);$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),this.$1B.getHours(),this.$1B.getMinutes(),this.$1B.getSeconds()+1080));if($p1_0.get_item(0)!=null){$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_2.setPropertyByName($2_1,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_2);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.errorLog('Error for CreateSecondActivityCrew()'+$0.message);}},createLunchActivity:function(){try{console.log('TimesheetCustom: Creating activity Lunch');this.$23.infoLog('TimesheetCustom: Creating activity Lunch');this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$23,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$24,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),11,30,0);var $2_1=new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),12,0,0);var $2_2=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_2.getPropertyByName('Key')!=null){var $2_3=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_5.set_mobileKey('');$2_5.set_key($2_2.get_key());var $2_6=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_2.get_key(),this.$23.guidGenerator(),null,$2_5);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,$2_6);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_6);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,$2_0);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,$2_1);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(($2_1-$2_0)/60000));if($p1_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_4);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Lunch'+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Lunch'+'-'+$0.message);this.$23.errorLog('Error for CreateLunchActivity()'+$0.message);}},createLunchActivityCrew:function(AllocatedResource){try{console.log('TimesheetCustom: Creating activity Lunch for'+' '+AllocatedResource.get_displayString());this.$23.infoLog('TimesheetCustom: Creating activity Lunch for'+' '+AllocatedResource.get_displayString());this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$23,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$24,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),11,30,0);var $2_1=new Date(this.$1B.getFullYear(),this.$1B.getMonth(),this.$1B.getDate(),12,0,0);var $2_2=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_2.getPropertyByName('Key')!=null){var $2_3=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,AllocatedResource);var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_5.set_mobileKey('');$2_5.set_key($2_2.get_key());var $2_6=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_2.get_key(),this.$23.guidGenerator(),null,$2_5);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_6);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,$2_0);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,$2_1);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(($2_1-$2_0)/60000));if($p1_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_4);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Lunch for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Lunch for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.errorLog('Error for CreateLunchActivityCrew()'+$0.message);}},createFourthActivity:function(){try{console.log('TimesheetCustom: Creating activity Driving');this.$23.infoLog('TimesheetCustom: Creating activity Driving');this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$20,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1C.getFullYear(),this.$1C.getMonth(),this.$1C.getDate(),this.$1C.getHours(),this.$1C.getMinutes(),this.$1C.getSeconds()-2880);var $2_1=new Date(this.$1C.getFullYear(),this.$1C.getMonth(),this.$1C.getDate(),this.$1C.getHours(),this.$1C.getMinutes(),this.$1C.getSeconds()-1080);var $2_2=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_2.getPropertyByName('Key')!=null){var $2_3=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_5.set_mobileKey('');$2_5.set_key($2_2.get_key());var $2_6=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_2.get_key(),this.$23.guidGenerator(),null,$2_5);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,$2_6);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_6);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,$2_0);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,$2_1);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(($2_1-$2_0)/60000));if($p1_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_4);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Driving'+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Driving'+'-'+$0.message);this.$23.errorLog('Error for CreateFourthActivity()'+$0.message);}},createFourthActivityCrew:function(AllocatedResource){try{console.log('TimesheetCustom: Creating activity Driving for'+' '+AllocatedResource.get_displayString());this.$23.infoLog('TimesheetCustom: Creating activity Driving for'+' '+AllocatedResource.get_displayString());this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$20,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1C.getFullYear(),this.$1C.getMonth(),this.$1C.getDate(),this.$1C.getHours(),this.$1C.getMinutes(),this.$1C.getSeconds()-2880);var $2_1=new Date(this.$1C.getFullYear(),this.$1C.getMonth(),this.$1C.getDate(),this.$1C.getHours(),this.$1C.getMinutes(),this.$1C.getSeconds()-1080);var $2_2=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_2.getPropertyByName('Key')!=null){var $2_3=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,AllocatedResource);var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_5.set_mobileKey('');$2_5.set_key($2_2.get_key());var $2_6=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_2.get_key(),this.$23.guidGenerator(),null,$2_5);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_6);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,$2_0);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,$2_1);$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,(($2_1-$2_0)/60000));if($p1_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_4.setPropertyByName($2_3,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_4);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating activity Driving for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating activity Driving for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.errorLog('Error for CreateFourthActivityCrew()'+$0.message);}},createFifthActivity:function(){try{console.log('TimesheetCustom: Creating last activity Dept. Transp. Requirements');this.$23.infoLog('TimesheetCustom: Creating last activity Dept. Transp. Requirements');this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$22,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1C.getFullYear(),this.$1C.getMonth(),this.$1C.getDate(),this.$1C.getHours(),this.$1C.getMinutes(),this.$1C.getSeconds()-1080);var $2_1=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_1.getPropertyByName('Key')!=null){var $2_2=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_4.set_mobileKey('');$2_4.set_key($2_1.get_key());var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_1.get_key(),this.$23.guidGenerator(),null,$2_4);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,$2_5);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_5);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,$2_0);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,this.$1C);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,((this.$1C-$2_0)/60000));if($p1_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_3);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating last activity Dept. Transp. Requirements'+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating last activity Dept. Transp. Requirements'+'-'+$0.message);this.$23.errorLog('Error for CreateFifthActivity()'+$0.message);}},createFifthActivityCrew:function(AllocatedResource){try{console.log('TimesheetCustom: Creating last activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString());this.$23.infoLog('TimesheetCustom: Creating last activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString());this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$A),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$22,1,ss.Delegate.create(this,function($p1_0){
this.$23.getDictionaryItemsFilterByName(this.$23.getDictionaryIDByName(P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1B),P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1E,1,ss.Delegate.create(this,function($p2_0){
var $2_0=new Date(this.$1C.getFullYear(),this.$1C.getMonth(),this.$1C.getDate(),this.$1C.getHours(),this.$1C.getMinutes(),this.$1C.getSeconds()-1080);var $2_1=this.$23.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$6);if($2_1.getPropertyByName('Key')!=null){var $2_2=this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13);var $2_3=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$13,null);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$B,this.$23.guidGenerator());$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$C,AllocatedResource);var $2_4=new W6.ClickMobile.Web.ObjectModel.W6CMGenericObject(this.$23.getCollectionIDByName(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12),P2.PS.AMEREN.CM.P2PSAMERENCM$1.$12,null);$2_4.set_mobileKey('');$2_4.set_key($2_1.get_key());var $2_5=new W6.ClickMobile.Web.ObjectModel.W6CMLinkedBusinessObjectItem($2_1.get_key(),this.$23.guidGenerator(),null,$2_4);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$10,$2_5);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$8,$2_0);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$D,this.$1C);$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$E,((this.$1C-$2_0)/60000));if($p1_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.P2PSAMERENCM$1.$F,$p1_0.get_item(0));}if($p2_0.get_item(0)!=null){$2_3.setPropertyByName($2_2,P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0.$1D,$p2_0.get_item(0));}this.$23.getBusinessViewServices().commitBusinessViewItemAddOrUpdate($2_3);}}));}));}catch($0){console.log('TimesheetCustom: Error in Creating last activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.infoLog('TimesheetCustom: Error in Creating last activity Dept. Transp. Requirements for'+' '+AllocatedResource.get_displayString()+'-'+$0.message);this.$23.errorLog('Error for CreateFifthActivityCrew()'+$0.message);}},searchActivity:function(item1,item2,objEngineer){try{console.log('TimesheetCustom: Entered SearchActivity()');this.$23.infoLog('TimesheetCustom: Entered SearchActivity()');var $0=new Date(this.$1A.getFullYear(),this.$1A.getMonth(),this.$1A.getDate(),this.$1A.getHours(),this.$1A.getMinutes(),this.$1A.getSeconds()-86400);var $1=new Date(this.$1A.getFullYear(),this.$1A.getMonth(),this.$1A.getDate(),this.$1A.getHours(),this.$1A.getMinutes(),this.$1A.getSeconds()+86400);var $2=new Date(this.$1A.getFullYear(),this.$1A.getMonth(),this.$1A.getDate(),11,0,0);var $3=this.$23.getCollectionIDByName('Activity_SO');var $4=false;var $5=false;var $6=new W6.ClickMobile.Web.ObjectModel.W6CMBusinessViewSearch($3,'StartTime_SO');$6.initDateTimeCriterion($0,$1);var $7=[];$7.add($6);this.$23.getSearchedBusinessViewItemsByObjectType($3,$7,ss.Delegate.create(this,function($p1_0){
if($p1_0!=null){var $1_0=this.controllerServices.getSharedData(P2.PS.AMEREN.CM.P2PSAMERENCM$1.$7);if($1_0!=null){console.log('TimesheetCustom: Crew Allocation not null');this.$23.infoLog('TimesheetCustom: Crew Allocation not null');if($1_0.get_count()>0){console.log('TimesheetCustom: Crew Allocation list greater than zero');this.$23.infoLog('TimesheetCustom: Crew Allocation list greater than zero');var $enum1=ss.IEnumerator.getEnumerator($1_0);while($enum1.moveNext()){var $1_1=$enum1.current;$4=false;this.$22=true;var $1_2=$1_1.getPropertyByName(this.controllerServices.getCollectionIDByName('CrewAllocation'),'AllocatedResource');var $1_3=$1_1.getPropertyByName(this.controllerServices.getCollectionIDByName('CrewAllocation'),'Crew');if($1_2.get_key()!==objEngineer.get_key()){var $1_4=$1_1.getPropertyByName('StartTime').toString();var $1_5=Date.parseDate($1_4);var $1_6=$1_1.getPropertyByName('FinishTime').toString();var $1_7=Date.parseDate($1_6);if(!($1_5<=this.$1A&&$1_7>=this.$1A)){this.$22=false;}}if(this.$22){var $enum2=ss.IEnumerator.getEnumerator($p1_0);while($enum2.moveNext()){var $1_8=$enum2.current;var $1_9=$1_8.getPropertyByName('StartTime_SO').toString();var $1_A=Date.parseDate($1_9);$1_9=$1_A.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat);var $1_B=$1_8.getPropertyByName('Engineer_SO');if($1_8.getPropertyByName('Type_SO').toString()===item1.get_name()&&$1_9===this.$1B.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat)&&$1_2.get_key()===$1_B.get_key()){$4=true;}if($1_8.getPropertyByName('Type_SO').toString()===item2.get_name()&&$1_9===$0.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat)&&$1_2.get_key()===$1_B.get_key()&&$1_8.getPropertyByName('FinishTime_SO')==null){$5=true;}}if(!$4&&!P2.PS.AMEREN.CM.AmerenP2Constants.crewActivityCreated&&!this.$1F.contains($1_2.get_key())){this.createFirstActivityCrew($1_2);console.log('TimesheetCustom: Dept. Transp. Requirements activity open from previous day for'+' '+$1_2.get_displayString()+'-'+$5);this.$23.infoLog('TimesheetCustom: Dept. Transp. Requirements activity open from previous day for'+' '+$1_2.get_displayString()+'-'+$5);if(!$5){this.createSecondActivityCrew($1_2);}$5=false;if(this.$1B<$2){this.createLunchActivityCrew($1_2);}this.createFourthActivityCrew($1_2);this.createFifthActivityCrew($1_2);this.$1F.add($1_2.get_key());}else{console.log('TimesheetCustom: Timesheet Login Activities exists for'+' '+$1_2.get_displayString());this.$23.infoLog('TimesheetCustom: Timesheet Login Activities exists for'+' '+$1_2.get_displayString());if(P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup){var $1_C=$1_2.get_displayString();this.$23.showMessageBox(P2.PS.AMEREN.CM.AmerenP2Constants.failSafeButtonWarning+' '+$1_C,'Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.close,null);}}}else{console.log('TimesheetCustom:'+' '+$1_2.get_displayString()+' '+'not in crew'+' '+$1_3.get_displayString()+' '+'for today.Login Activities will not be created');this.$23.infoLog('TimesheetCustom:'+' '+$1_2.get_displayString()+' '+'not in crew'+' '+$1_3.get_displayString()+' '+'for today.Login Activities will not be created');}}P2.PS.AMEREN.CM.AmerenP2Constants.crewActivityCreated=true;P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup=false;}else{console.log('TimesheetCustom: Engineer not part of a crew');this.$23.infoLog('TimesheetCustom: Engineer not part of a crew');var $enum3=ss.IEnumerator.getEnumerator($p1_0);while($enum3.moveNext()){var $1_D=$enum3.current;var $1_E=$1_D.getPropertyByName('StartTime_SO').toString();var $1_F=Date.parseDate($1_E);$1_E=$1_F.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat);if($1_D.getPropertyByName('Type_SO').toString()===item1.get_name()&&$1_E===this.$1B.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat)){$4=true;}if($1_D.getPropertyByName('Type_SO').toString()===item2.get_name()&&$1_E===$0.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat)&&$1_D.getPropertyByName('FinishTime_SO')==null){$5=true;}}if(!$4&&!P2.PS.AMEREN.CM.AmerenP2Constants.activityCreated){this.createFirstActivity();if(!$5){this.createSecondActivity();}if(this.$1B<$2){this.createLunchActivity();}this.createFourthActivity();this.createFifthActivity();P2.PS.AMEREN.CM.AmerenP2Constants.activityCreated=true;}else{console.log('TimesheetCustom: Timesheet Login Activities exists for'+' '+objEngineer.get_name());this.$23.infoLog('TimesheetCustom: Timesheet Login Activities exists for'+' '+objEngineer.get_name());if(P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup){P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup=false;var $1_10=objEngineer.get_name();this.$23.showMessageBox(P2.PS.AMEREN.CM.AmerenP2Constants.failSafeButtonWarning+' '+$1_10,'Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.close,null);}}}}else if($1_0==null){console.log('TimesheetCustom: Engineer not part of a crew');this.$23.infoLog('TimesheetCustom: Engineer not part of a crew');var $enum4=ss.IEnumerator.getEnumerator($p1_0);while($enum4.moveNext()){var $1_11=$enum4.current;var $1_12=$1_11.getPropertyByName('StartTime_SO').toString();var $1_13=Date.parseDate($1_12);$1_12=$1_13.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat);if($1_11.getPropertyByName('Type_SO').toString()===item1.get_name()&&$1_12===this.$1B.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat)){$4=true;}if($1_11.getPropertyByName('Type_SO').toString()===item2.get_name()&&$1_12===$0.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat)&&$1_11.getPropertyByName('FinishTime_SO')==null){$5=true;}}if(!$4&&!P2.PS.AMEREN.CM.AmerenP2Constants.activityCreated){this.createFirstActivity();if(!$5){this.createSecondActivity();}if(this.$1B<$2){this.createLunchActivity();}this.createFourthActivity();this.createFifthActivity();P2.PS.AMEREN.CM.AmerenP2Constants.activityCreated=true;}else{console.log('TimesheetCustom: Timesheet Login Activities exists for'+' '+objEngineer.get_name());this.$23.infoLog('TimesheetCustom: Timesheet Login Activities exists for'+' '+objEngineer.get_name());if(P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup){P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup=false;var $1_14=objEngineer.get_name();this.$23.showMessageBox(P2.PS.AMEREN.CM.AmerenP2Constants.failSafeButtonWarning+' '+$1_14,'Alert',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.close,null);}}}}}));}catch($8){console.log('TimesheetCustom: Error in SearchActivity()'+'-'+$8.message);this.$23.infoLog('TimesheetCustom: Error in SearchActivity()'+'-'+$8.message);this.$23.errorLog('Error for SearchActivity()'+$8.message);}},getShift:function(objShiftInterval){console.log('TimesheetCustom: Fetching shift start time and shift end time...');this.$23.infoLog('TimesheetCustom: TimesheetCustom: Fetching shift start time and shift end time...');if(this.$1A.localeFormat('dddd')==='Monday'){var $0=objShiftInterval.day1Start;var $1=objShiftInterval.day1End;if(!!$0&&!!$1){this.$1B=this.timeConversion($0);this.$1C=this.timeConversion($1);return true;}else{return false;}}else if(this.$1A.localeFormat('dddd')==='Tuesday'){var $2=objShiftInterval.day2Start;var $3=objShiftInterval.day2End;if(!!$2&&!!$3){this.$1B=this.timeConversion($2);this.$1C=this.timeConversion($3);return true;}else{return false;}}else if(this.$1A.localeFormat('dddd')==='Wednesday'){var $4=objShiftInterval.day3Start;var $5=objShiftInterval.day3End;if(!!$4&&!!$5){this.$1B=this.timeConversion($4);this.$1C=this.timeConversion($5);return true;}else{return false;}}else if(this.$1A.localeFormat('dddd')==='Thursday'){var $6=objShiftInterval.day4Start;var $7=objShiftInterval.day4End;if(!!$6&&!!$7){this.$1B=this.timeConversion($6);this.$1C=this.timeConversion($7);return true;}else{return false;}}else if(this.$1A.localeFormat('dddd')==='Friday'){var $8=objShiftInterval.day5Start;var $9=objShiftInterval.day5End;if(!!$8&&!!$9){this.$1B=this.timeConversion($8);this.$1C=this.timeConversion($9);return true;}else{return false;}}else if(this.$1A.localeFormat('dddd')==='Saturday'){var $A=objShiftInterval.day6Start;var $B=objShiftInterval.day6End;if(!!$A&&!!$B){this.$1B=this.timeConversion($A);this.$1C=this.timeConversion($B);return true;}else{return false;}}else if(this.$1A.localeFormat('dddd')==='Sunday'){var $C=objShiftInterval.day7Start;var $D=objShiftInterval.day7End;if(!!$C&&!!$D){this.$1B=this.timeConversion($C);this.$1C=this.timeConversion($D);return true;}else{return false;}}return false;},timeConversion:function(time){var $0=new Array(3);$0=time.split(':');var $1=parseInt($0[0]);var $2=parseInt($0[1]);var $3=parseInt($0[2]);var $4=new Date(this.$1A.getFullYear(),this.$1A.getMonth(),this.$1A.getDate(),$1,$2,$3);return $4;}}
P2.PS.AMEREN.CM.Events.CopyAssetMVtoSharedMemory=function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$0));}
P2.PS.AMEREN.CM.Events.CopyAssetMVtoSharedMemory.prototype={$0:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $0=new ss.StringBuilder();var $1={};var $2=$p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');var $3=$p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString()+$p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString();if($2==null){return;}var $4=$p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($4.get_count()<=0){return;}var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $5=$enum1.current;var $6=$5.get_genericObject();$p0.getBusinessViewServices().getBusinessViewItemByObjectType(30000008,$5.get_key(),function($p1_0){
var $1_0=new P2.PS.AMEREN.CM.Events.AssetObj();$1_0.AID=$p1_0.getPropertyByName('AssetID').toString();if($p1_0.getPropertyByName('OperationalStatus')!=null){$1_0.AS=$p1_0.getPropertyByName('OperationalStatus').toString();}else{$1_0.AS='';}if($p1_0.getPropertyByName('AssetType')!=null){$1_0.AT=$p1_0.getPropertyByName('AssetType').toString();}else{$1_0.AT='';}$1[$1_0.AID]=$1_0;$p0.setSharedData('AssetMV'+$3,JSON.stringify($1));});}}}catch($7){$p0.errorLogEx($7.message,$7);}}}
P2.PS.AMEREN.CM.Events.AssetObj=function(){}
P2.PS.AMEREN.CM.Events.AssetObj.prototype={AID:null,AT:null,AS:null}
P2.PS.AMEREN.CM.Events.CreateCustomTables=function(){this.$1='';this.viewDivName='';this.currentObject='';}
P2.PS.AMEREN.CM.Events.CreateCustomTables.prototype={$0:null,init:function(controllerServ){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterOpenView(ss.Delegate.create(this,this.$2));this.$0=controllerServ;this.viewDivName=controllerServ.get_currentViewName();this.viewDivName='div'+this.viewDivName.replaceAll(' ','');var $0=$('<div id="customTable"><div id="'+this.viewDivName+'" style= "margin-left: 3%"></div></div>');var $1=$0.get(0);return $1;},setCustomSettings:function(strCustomSettings){this.$1=strCustomSettings;},$2:function($p0,$p1){try{if($p1.viewSettings.customSettings===this.$1){P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails={};$('#refreshbtn').unbind('click');var $0=ss.parseXml(this.$1);var $1=null;var $2='';var $3='';if($0!=null){$1=$0.selectNodes('Table');var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $4=$enum1.current;var $5=$4.xml;var $6=ss.parseXml($5);var $7=null;var $8='false';var $9='';if($6.selectSingleNode('Object')!=null){$2=$6.selectSingleNode('Object').text;}var $A=[];var $B=[];$7=$6.selectNodes('Field');var $enum2=ss.IEnumerator.getEnumerator($7);while($enum2.moveNext()){var $C=$enum2.current;$A.add($C.childNodes[0].text.toString());$B.add($C.childNodes[1].text.toString());}P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$2]=$B;if($6.selectSingleNode('IsFilterReq')!=null){$8=$6.selectSingleNode('IsFilterReq').text;}if($6.selectSingleNode('TableHeading')!=null){$9=$6.selectSingleNode('TableHeading').text;}if($8==='true'){this.createFiler($2,$B,$A);}else{this.createRefreshButton($2);}this.createTable($A,$B,$2,$9);this.registerHeaderEvents($2,$B);this.getData($2);}}}}catch($D){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.ClientEvents_AfterOpenView_CustomTable'+$D);}},registerHeaderEvents:function(objectName,propertyList){try{var $enum1=ss.IEnumerator.getEnumerator(propertyList);while($enum1.moveNext()){var $0=$enum1.current;$('#'+objectName+'_'+$0).click(ss.Delegate.create(this,function($p1_0){
this.sortOnHeadingClick($p1_0);}));$('#'+objectName+'_'+$0).css('cursor','pointer');}}catch($1){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.RegisterHeaderEvents'+$1);}},registerRowEvents:function(rowID){try{$('#'+rowID).click(ss.Delegate.create(this,function($p1_0){
this.openForm($p1_0);}));$('#'+rowID).css('cursor','pointer');}catch($0){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.RegisterRowEvents'+$0);}},createTable:function(headingList,propertyList,objectName,tableHeading){try{$('#'+objectName+'_Table').remove();var $0='';var $1=headingList.length+1;var $2=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod);if($2){$0='<div id="scrollDiv" class="scrollDiv" style="overflow:auto;"><table id="'+objectName+"_Table\" style=\"border-collapse: collapse; color:rgb(2,113,182);font-family:'Calibri', sans-serif;font-weight:540;font-size:11.0pt; margin-top: 2%;margin-bottom: 3%;width:40%;max-width: 30%;\">"+'<thead><tr style="background-color: rgb(11, 125, 195);color: white;border: 1px solid rgb(2,113,182);"><th id="'+objectName+'_Title" colspan="'+$1+'" class="collapsibleTitle" style="font - size:14.0pt">'+tableHeading+'</th></tr><tr id="'+objectName+'_headings"><th style="background-color: rgb(2,113,182);color: white;border: 1px solid rgb(2,113,182); width:4em;">SL NO:</th>';}else{$0='<div id="scrollDiv" class="scrollDiv" style="overflow:auto;"><table id="'+objectName+"_Table\" style=\"border-collapse: collapse; color:rgb(2,113,182);font-family:'Calibri', sans-serif;font-weight:540;font-size:11.0pt; margin-top: 2%;margin-bottom: 3%; margin-left:3em;width:90%;\">"+'<thead><tr style="background-color: rgb(11, 125, 195);color: white;border: 1px solid rgb(2,113,182);"><th id="'+objectName+'_Title" colspan="'+$1+'" class="collapsibleTitle" style="font - size:14.0pt">'+tableHeading+'</th></tr><tr id="'+objectName+'_headings"><th style="background-color: rgb(2,113,182);color: white;border: 1px solid rgb(2,113,182); width:4em;">SL NO:</th>';}var $3=0;for(var $4=0;$4<headingList.length;$4++){$3=$4+1;$0+='<th id="'+objectName+'_'+propertyList[$4]+'" colNum="'+$3+'" style="background-color: rgb(2,113,182);color: white;border: 1px solid rgb(2,113,182);">'+headingList[$4]+'</th>';}$0+='</tr></thead><tbody></tbody></table></div>';$('#'+this.viewDivName).append($0);$('.'+'collapsibleTitle').unbind('click');$('.'+'collapsibleTitle').click(ss.Delegate.create(this,function($p1_0){
this.collapse($p1_0);}));}catch($5){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.createTable'+$5);}},collapse:function(e){try{var $0=e.target.id;var $1=$0.split('_')[0];$('#'+$0).toggleClass('active');if($('#'+$0).hasClass('active')){$('#'+$1+'_headings').css('display','none');$('#'+$1+'_Table > tbody').css('display','none');}else{$('#'+$1+'_headings').css('display','table-row');$('#'+$1+'_Table > tbody').css('display','table-row-group');}}catch($2){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.collapse'+$2);}},getData:function(objectName){try{switch(objectName){case 'Task':var $0;var $1;$0=this.addDays(Date.get_today(),-2000000000);$1=this.addDays(Date.get_today(),2000000000);this.$0.getTodaySchedule($0,$1,ss.Delegate.create(this,this.getAllAssignments));var $2=(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPad)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPhone)||(W6.ClickMobile.Web.Core.W6CMPlatform.getPlatform()===W6.ClickMobile.Web.Core.W6CMPlatformType.iPod);if($2){$('#Task_Table').css('width','40%');$('#Task_Table').css('max-width','30%');}else{$('#Task_Table').css('width','90%');}break;case 'RequiredTool':var $3;var $4;$3=this.addDays(Date.get_today(),-2000000000);$4=this.addDays(Date.get_today(),2000000000);this.$0.getTodaySchedule($3,$4,ss.Delegate.create(this,this.getAllToolsFromAssignments));$('#RequiredTool_Table').css('width','40%');break;case 'MRDetails':var $5;var $6;$5=this.addDays(Date.get_today(),-2000000000);$6=this.addDays(Date.get_today(),2000000000);this.$0.getTodaySchedule($5,$6,ss.Delegate.create(this,this.getAllMRDetailsFromAssignments));$('#MRDetails_Table').css('width','40%');break;case 'Material':var $7={};var $8=0;var $9=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[objectName];var $A=this.$0.getCollectionIDByName('Material');P2.PS.AMEREN.CM.AmerenP2Constants.assignmentList=[];var $B=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHistory();var $C=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHorizon();var $D=0;var $E=0;if($B!=null){$D=$B.seconds;}if($C!=null){$E=$C.seconds;}var $F=this.addDays(Date.get_today(),-$D);var $10=this.addDays(Date.get_today(),$E);this.$0.getTodaySchedule($F,$10,ss.Delegate.create(this,this.getAllMaterialAssignments));this.$0.getBusinessViewServices().getAllBusinessViewItemsByObjectType($A,ss.Delegate.create(this,function($p1_0){
if($p1_0!=null){if($p1_0.get_count()>0){for(var $1_0=0;$1_0<$p1_0.get_count();$1_0++){var $1_1=$p1_0.get_item($1_0).getPropertyByName('CallID').toString();var $1_2=$p1_0.get_item($1_0).getPropertyByName('Number').toString();if(P2.PS.AMEREN.CM.AmerenP2Constants.assignmentList.contains($1_1+'_'+$1_2)){var $1_3='';var $1_4='';var $1_5='';var $1_6='';var $1_7=[];var $1_8=[];var $1_9=[];var $enum1=ss.IEnumerator.getEnumerator($9);while($enum1.moveNext()){var $1_A=$enum1.current;var $1_B='';if($p1_0.get_item($1_0).getPropertyByName($1_A)!=null){$1_B=$p1_0.get_item($1_0).getPropertyByName($1_A).toString();if(!!$1_B){$1_7.add($1_B);$1_8.add($1_A);}else{$1_7.add('');$1_8.add($1_A);}}else{$1_7.add('');$1_8.add($1_A);}}$1_4=(!ss.isNullOrUndefined($p1_0.get_item($1_0).getPropertyByName('PONumber')))?$p1_0.get_item($1_0).getPropertyByName('PONumber').toString():'';$1_6=(!ss.isNullOrUndefined($p1_0.get_item($1_0).getPropertyByName('StockNumber')))?$p1_0.get_item($1_0).getPropertyByName('StockNumber').toString():'';$1_3=(!ss.isNullOrUndefined($p1_0.get_item($1_0).getPropertyByName('Description')))?$p1_0.get_item($1_0).getPropertyByName('Description').toString():'';$1_5=(!ss.isNullOrUndefined($p1_0.get_item($1_0).getPropertyByName('QuantityRequired')))?$p1_0.get_item($1_0).getPropertyByName('QuantityRequired').toString():'';if($('[val="'+$1_6+'"]').length>0){var $1_C=$('[val="'+$1_6+'"]').attr('id');var $1_D=$1_C.split('_')[2].substr(5);var $1_E=$('#Material_QuantityRequired_Value'+$1_D).text();var $1_F=parseInt($1_E)+parseInt($1_5);$('#Material_QuantityRequired_Value'+$1_D).text($1_F.toString());$('#Material_MaterialDescription_Value'+$1_D).text($1_3);}else{this.appendtoUI(objectName,$1_8,$1_7,$8);$8++;}}}}else{var $1_10=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[objectName][0].length;var $1_11='<tr id="'+objectName+'_noRecords"><td colspan="'+$1_10+'">No Records to Display</td></tr>';$('#'+objectName+'_noRecords').remove();$('#'+objectName+'_Table > tbody').append($1_11);}}else{var $1_12=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[objectName][0].length;var $1_13='<tr id="'+objectName+'_noRecords"><td colspan="'+$1_12+'">No Records to Display</td></tr>';$('#'+objectName+'_noRecords').remove();$('#'+objectName+'_Table > tbody').append($1_13);}}));$('#Material_Table').css('width','60%');break;}}catch($11){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.GetData'+$11);}},addDays:function(objDateTime,numDays){return new Date(objDateTime.getFullYear(),objDateTime.getMonth(),objDateTime.getDate(),objDateTime.getHours(),objDateTime.getMinutes(),objDateTime.getSeconds()+numDays);},getAllMRDetailsFromAssignments:function(lstAssignments){try{var $0='MRDetails';var $1=0;var $2=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$0];var $3=false;var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $4=$enum1.current;var $5=$4.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'MRDetails');if($5!=null){var $6=ss.parseXml($5.toString());var $enum2=ss.IEnumerator.getEnumerator($6.documentElement.childNodes);while($enum2.moveNext()){var $7=$enum2.current;$3=true;var $8='';var $9=[];var $A=[];var $enum3=ss.IEnumerator.getEnumerator($7.childNodes);while($enum3.moveNext()){var $B=$enum3.current;var $enum4=ss.IEnumerator.getEnumerator($2);while($enum4.moveNext()){var $C=$enum4.current;var $D='';if($B.nodeName===$C){if($B.text!=null){$D=$B.text;if(!!$D){$9.add($D);$A.add($C);}else{$9.add('');$A.add($C);}}else{$9.add('');$A.add($C);}break;}}if($B.nodeName==='MRNumber'){$8=$B.text;}}if($('[val="'+$8+'"]').length>0){}else{this.appendtoUI($0,$A,$9,$1);$1++;}}}}if(!$3){var $E=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$0][0].length;var $F='<tr id="'+$0+'_noRecords"><td colspan="'+$E+'">No Records to Display</td></tr>';$('#'+$0+'_noRecords').remove();$('#'+$0+'_Table > tbody').append($F);}}catch($10){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.GetAllMRDetailsFromAssignments'+$10);}},getAllToolsFromAssignments:function(lstAssignments){try{var $0='RequiredTool';var $1=0;var $2=false;var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $3=$enum1.current;var $4=$3.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'RequiredTools');if($4.get_count()>0){$2=true;for(var $5=0;$5<$4.get_count();$5++){var $6=[];var $7=[];var $8=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$0];var $enum2=ss.IEnumerator.getEnumerator($8);while($enum2.moveNext()){var $A=$enum2.current;var $B='';if($4.get_item($5).get_genericObject().getPropertyByName($A)!=null){$B=$4.get_item($5).get_genericObject().getPropertyByName($A).toString();if(!!$B){$6.add($B);$7.add($A);}else{$6.add('');$7.add($A);}}else{$6.add('');$7.add($A);}}var $9=$4.get_item($5).get_genericObject().getPropertyByName('Name').toString();if($('[val="'+$9+'"]').length>0){}else{this.appendtoUI($0,$7,$6,$1);$1++;}}}}if(!$2){var $C=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$0][0].length;var $D='<tr id="'+$0+'_noRecords"><td colspan="'+$C+'">No Records to Display</td></tr>';$('#'+$0+'_noRecords').remove();$('#'+$0+'_Table > tbody').append($D);}}catch($E){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.GetAllToolsFromAssignments'+$E);}},getAllAssignments:function(lstAssignments){try{var $0='Task';var $1=0;if(!lstAssignments.get_count()){var $2=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$0][0].length;var $3='<tr id="'+$0+'_noRecords"><td colspan="'+$2+'">No Records to Display</td></tr>';$('#'+$0+'_noRecords').remove();$('#'+$0+'_Table > tbody').append($3);}else{var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $4=$enum1.current;var $5=[];var $6=[];var $7=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$0];var $enum2=ss.IEnumerator.getEnumerator($7);while($enum2.moveNext()){var $8=$enum2.current;var $9='';if($4.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,$8)!=null){$9=$4.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,$8).toString();if(!!$9){if(P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeNeedTobeFormatted.contains($8)){var $A=$4.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,$8);$9=$A.format(P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeFormat);}$5.add($9);$6.add($8);}else{$5.add('');$6.add($8);}}else{$5.add('');$6.add($8);}}this.appendtoUIWithKey($0,$6,$5,$1,$4.get_key());$1++;}}}catch($B){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.GetAllAssignments'+$B);}},getAllMaterialAssignments:function(lstAssignments){try{if(lstAssignments.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator(lstAssignments);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'CallID').toString();var $2=$0.getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Number').toString();P2.PS.AMEREN.CM.AmerenP2Constants.assignmentList.add($1+'_'+$2);}}}catch($3){this.$0.showMessageBox('in catch','2',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.GetAllMaterialAssignments'+$3);}},appendtoUI:function(objectName,propertyName,propertyValue,position){try{$('#'+objectName+'_noRecords').remove();var $0='<tr id="'+objectName+'_Row_'+position+'">';var $1=position+1;var $2='<td id="'+objectName+'_SLNO_Value'+position+'" style="border: 1px solid rgb(2,113,182);padding-left: 10px;padding-right: 10px;">'+$1+'</td>';for(var $3=0;$3<propertyName.length;$3++){$2+='<td val="'+propertyValue[$3]+'" id="'+objectName+'_'+propertyName[$3]+'_Value'+position+'" style="border: 1px solid rgb(2,113,182);">'+propertyValue[$3]+'</td>';}$0=$0+$2+'</tr>';if(!position){$('#'+objectName+'_Table > tbody').append($0);}else{$('#'+objectName+'_Table > tbody tr:last').after($0);}}catch($4){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.AppendtoUI'+$4);}},appendtoUIWithKey:function(objectName,propertyName,propertyValue,position,key){try{$('#'+objectName+'_noRecords').remove();var $0=objectName+'_Row_'+position;var $1='<tr id="'+$0+'" key="'+key+'">';var $2=position+1;var $3='<td id="'+objectName+'_SLNO_Value'+position+'" style="border: 1px solid rgb(2,113,182);padding-left: 10px;padding-right: 10px;">'+$2+'</td>';for(var $4=0;$4<propertyName.length;$4++){$3+='<td id="'+objectName+'_'+propertyName[$4]+'_Value'+position+'" style="border: 1px solid rgb(2,113,182);padding-left: 10px;padding-right: 10px;">'+propertyValue[$4]+'</td>';}$1=$1+$3+'</tr>';if(!position){$('#'+objectName+'_Table > tbody').append($1);}else{$('#'+objectName+'_Table > tbody tr:last').after($1);}this.registerRowEvents($0);}catch($5){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.AppendtoUIWithKey'+$5);}},openForm:function(e){try{var $0='';if($('#'+e.target.id).parent().attr('Key')!=null){$0=$('#'+e.target.id).parent().attr('Key').toString();}var $1=$('#'+e.target.id).parent().attr('id').toString().split('_')[0];switch($1){case 'Task':this.$0.openFormByKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,parseInt($0),false,null);break;default:this.$0.openFormByKey(this.$0.getCollectionIDByName($1),parseInt($0),false,null);break;}}catch($2){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.openForm'+$2);}},createFiler:function(ObjectName,propertyList,headingList){try{var $0='<div id="'+ObjectName+'_Filterdiv" filter="off" style= "margin-left:3%;margin-top:1%;"><fieldset id="'+ObjectName+'_Fieldset" style="border:none;width:90%;"><legend id="'+ObjectName+"_FilterBtn\"  style= \"color: rgb(2, 113, 182);font-family: 'Calibri', sans-serif;font-weight: bold;font-size: 11.0pt;height: 1.8em;margin-top: 1%;text-decoration: underline;\">Add Filter</legend><div id=\""+ObjectName+'_filterContents"></fieldset></div>';var $1='<div id="'+ObjectName+'_quickSearchdiv" style="margin-left:3%;"><table><tr><td><input type="text"  style= "width: 25em;font-size: 10pt !important;" placeholder="Quick Search" id="'+ObjectName+'_quickSearchBtn"/></td><td style="padding-left: 4em;"><span id="'+ObjectName+"_refreshbtn\"  style= \" color: rgb(2, 113, 182);font-family: 'Calibri', sans-serif;font-weight:bold;font-size: 11.0pt;width: 12em;height: 1.8em;margin-top: 1%;text-decoration: underline;\">Refresh View</span></div>";var $2='<div propertyList="'+propertyList+'" headingList="'+headingList+'" id="'+ObjectName+"_searchOptionsDiv\" style=\"display:none;color: rgb(2, 113, 182);font-family: 'Calibri', sans-serif;font-weight: 540;font-size: 11pt;\"><table id=\""+ObjectName+'_selectedOptionTable" style="width: fit-content;"><tbody></tbody></table>'+'<div id="'+ObjectName+'_searchItemsContainerDiv"><select style="width: 11.5em;padding-right: 1.8em;font-size: 10pt !important;"id="'+ObjectName+'_searchOptionsSearchPropertyDDL">';var $3='<option value="noVal">Select Field</option>';for(var $5=0;$5<propertyList.length;$5++){$3+='<option value="'+propertyList[$5]+'">'+headingList[$5]+'</option>';}$3+='</select>';var $4='<span id="space-custom" style="padding-left: 2em;"></span>'+'<button type="button" id="'+ObjectName+"_ApplyBtn\"  style= \" background-color: rgb(2, 113, 182);color: white;font-family: 'Calibri', sans-serif;font-weight: 540;font-size: 11.0pt;width: 11em;height: 1.8em;margin-left: 1.1em;border: solid thin grey;\">Apply Filter</button>";$2=$2+$3+$4+'</div></div>';$('#'+ObjectName+'_Filterdiv').remove();$('#'+ObjectName+'_quickSearchdiv').remove();$('#'+this.viewDivName).append($0);$('#'+ObjectName+'_filterContents').append($2);$('#'+this.viewDivName).append($1);$('#'+ObjectName+'_quickSearchBtn').keyup(ss.Delegate.create(this,function($p1_0){
this.quickSearch($p1_0);}));$('#'+ObjectName+'_FilterBtn').click(ss.Delegate.create(this,function($p1_0){
this.filterClick($p1_0);}));$('#'+ObjectName+'_ApplyBtn').click(ss.Delegate.create(this,function($p1_0){
this.applyButtonClick($p1_0);}));$('#'+ObjectName+'_searchOptionsSearchPropertyDDL').change(ss.Delegate.create(this,function($p1_0){
this.selectFieldClick($p1_0);}));$('#'+ObjectName+'_refreshbtn').click(ss.Delegate.create(this,function($p1_0){
this.refreshButtonClick($p1_0);}));}catch($6){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.createFiler'+$6);}},filterClick:function(e){try{var $0=e.target.id.split('_')[0];var $1=$('#'+$0+'_Filterdiv').attr('filter');if($1==='off'){$('#'+$0+'_searchOptionsDiv').css('display','block');$('#'+$0+'_Filterdiv').attr('filter','on');var $2=$('#'+$0+'_searchOptionsDiv').attr('propertyList');var $3=$('#'+$0+'_searchOptionsDiv').attr('headinglist');var $4=null;var $5=null;$4=$2.split(',');$5=$3.split(',');var $6='<option value="noVal">Select Field</option>';for(var $7=0;$7<$4.length;$7++){$6+='<option value="'+$4[$7]+'">'+$5[$7]+'</option>';}$('#'+$0+'_searchOptionsSearchPropertyDDL option').remove();$('#'+$0+'_searchOptionsSearchPropertyDDL').append($6);$('#'+$0+'_Fieldset').css('border','solid thin lightgrey');$('#'+e.target.id).text('Remove Filter');}if($1==='on'){$('#'+$0+'_searchOptionsDiv').css('display','none');$('#'+$0+'_selectedOptionTable > tbody').children().remove();$('#'+$0+'_searchOptionsSearchPropertyDDL').val('noVal');$('#'+$0+'_Filterdiv').attr('filter','off');$('#'+e.target.id).text('Add Filter');$('#'+$0+'_Fieldset').css('border','none');var $8=$('#'+$0+'_Table > tbody');$('tr',$8).each(function($p1_0,$p1_1){
$('#'+$p1_1.id).css('display','table-row');});$('#'+$0+'_noRecords').remove();}}catch($9){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.FilterClick'+$9);}},selectFieldClick:function(e){try{var $0=e.target.id.split('_')[0];var $1=$('#'+e.target.id).val();var $2=$('#'+$0+'_searchOptionsDiv').attr('propertyList');var $3=$('#'+$0+'_searchOptionsDiv').attr('headinglist');var $4=null;var $5=null;$4=$2.split(',');$5=$3.split(',');if(!!$1){var $6=$4.indexOf($1);var $7=$5[$6];var $8=0;var $9=0;var $A=$('#'+$0+'_selectedOptionTable tr').length;if($('#'+$0+'_selectedOptionTable tr:last').index()>-1){var $F=$('#'+$0+'_selectedOptionTable tr:last').attr('id').toString().split('_')[2];$9=parseInt($F);$8=$9+1;}$8=$9+1;var $B='';var $C='';if(!$A){$C='<tr id="'+$0+'_selectedOption_'+$8+'" class="'+$0+'_selectedOption">'+'<td property="'+$1+'" style="padding-right: 3em;width:50%">'+"<span style=\"color: rgb(2, 113, 182);font-family: 'Calibri', sans-serif;font-weight: 540;font-size: 11pt;\">"+$7+' Contains</span></td>'+'<td style="padding-right: 1em;padding-bottom: .5em;"><input type="text" id="'+$0+'_SearchValue_'+$8+'" property="'+$1+'"  style ="font-size: 10pt !important;" placeholder="Enter Text To Search" /></td>';}else{$C='<tr id="'+$0+'_selectedOption_'+$8+'" class="'+$0+'_selectedOption">'+'<td property="'+$1+'" style="padding-right: 3em;width:50%"><span id="'+$0+'_AndLabel_'+$8+"\" style=\"color: rgb(2, 113, 182);font-family: 'Calibri', sans-serif;font-weight: 540;font-size: 11pt;\">and </span>"+"<span style=\"color: rgb(2, 113, 182);font-family: 'Calibri', sans-serif;font-weight: 540;font-size: 11pt;\">"+$7+' Contains</span></td>'+'<td style="padding-right: 1em;padding-bottom: .5em;"><input type="text" id="'+$0+'_SearchValue_'+$8+'" property="'+$1+'"  style ="font-size: 10pt !important;" placeholder="Enter Text To Search" /></td>';}var $D=$('#'+$0+'_searchOptionsDiv').attr('propertyList');$B+='<td><img src="Images/ClearSignature.png" id="'+$0+'_searchOptionsRemoveBtn_'+$8+'" style= " height:1em"></img></td>';$C=$C+$B+'</td></tr>';var $E=$($C);$E.appendTo('#'+$0+'_selectedOptionTable > tbody');$('#'+$0+'_searchOptionsRemoveBtn_'+$8).click(ss.Delegate.create(this,function($p1_0){
this.removeButtonClick($p1_0);}));$('#'+$0+'_searchOptionsSearchPropertyDDL').find('option[value = '+$1+']').remove();$('#'+$0+'_searchOptionsSearchPropertyDDL').find('option[value = noVal]').prop('selected',true);}}catch($10){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.SelectFieldClick'+$10);}},removeButtonClick:function(e){try{var $0=e.target.id.split('_')[0];var $1=e.target.id.split('_')[2];var $2=$('#'+$0+'_selectedOption_'+$1).children()[0].getAttribute('property').toString();var $3=$('#'+$0+'_searchOptionsDiv').attr('propertyList');var $4=$('#'+$0+'_searchOptionsDiv').attr('headinglist');var $5=null;var $6=null;$5=$3.split(',');$6=$4.split(',');var $7=$5.indexOf($2);var $8='<option value="'+$5[$7]+'">'+$6[$7]+'</option>';$('#'+$0+'_searchOptionsSearchPropertyDDL').append($8);var $9=$('#'+$0+'_selectedOption_'+$1).next().attr('id');$('#'+$0+'_selectedOption_'+$1).remove();if(!!$9){var $A=$('#'+$9).index();if(!$A){var $B=$9.split('_')[2];$('#'+$0+'_AndLabel_'+$B).remove();}}if(!$('#'+$0+'_selectedOptionTable tr').length){var $C=$('#'+$0+'_Table > tbody');$('tr',$C).each(function($p1_0,$p1_1){
$('#'+$p1_1.id).css('display','table-row');});$('#'+$0+'_noRecords').remove();}}catch($D){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.RemoveButtonClick'+$D);}},applyButtonClick:function(e){try{var $0=e.target.id.split('_')[0];$('#'+$0+'_noRecords').remove();var $1=$('#'+$0+'_selectedOptionTable > tbody');var $2={};var $3=0;var $4=false;$('input',$1).each(function($p1_0,$p1_1){
if(!$p1_1.id.indexOf($0+'_SearchValue')){var $1_0=(!!$('#'+$p1_1.id).val()||$('#'+$p1_1.id).val()!=null)?$('#'+$p1_1.id).val():'';var $1_1=(!!$('#'+$p1_1.id).attr('Property')||$('#'+$p1_1.id).attr('Property')!=null)?$('#'+$p1_1.id).attr('Property'):'';$2[$1_1]=$1_0;$3++;}});var $5=$('#'+$0+'_Table > tbody');$('tr',$5).each(function($p1_0,$p1_1){
var $1_0=0;var $1_1=$('#'+$p1_1.id);$('td',$1_1).each(function($p2_0,$p2_1){
if($p2_1.id!=null){if($p2_1.id.toString().split('_')!=null){if(Object.keyExists($2,$p2_1.id.toString().split('_')[1])){if($('#'+$p2_1.id).text().toLowerCase().indexOf($2[$p2_1.id.split('_')[1]].toString().toLowerCase())>-1){$1_0++;}}}}});if($1_0!==$3){$('#'+$p1_1.id).css('display','none');}else{$('#'+$p1_1.id).css('display','table-row');$4=true;}});if(!$4){var $6=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$0].length;var $7='<tr id="'+$0+'_noRecords"><td colspan="'+$6+'">No Records to Display</td></tr>';$('#'+$0+'_Table > tbody').append($7);}}catch($8){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.ApplyButtonClick'+$8);}},quickSearch:function(e){try{var $0='';var $1=e.target.id.split('_')[0];var $2=false;$('#'+$1+'_noRecords').remove();if($('#'+e.target.id).val()!=null){$0=$('#'+e.target.id).val().toString();}var $3=$('#'+$1+'_Table > tbody');if(!!$0){$('tr',$3).each(function($p1_0,$p1_1){
var $1_0=false;var $1_1=$('#'+$p1_1.id);$('td',$1_1).each(function($p2_0,$p2_1){
var $2_0=$('#'+$p2_1.id).text();if($2_0.toLowerCase().indexOf($0.toLowerCase())>=0){$1_0=true;}});if(!$1_0){$('#'+$p1_1.id).css('display','none');}else{$('#'+$p1_1.id).css('display','table-row');$2=true;}});if(!$2){var $4=P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails[$1].length;var $5='<tr id="'+$1+'_noRecords"><td colspan="'+$4+'">No Records to Display</td></tr>';$('#'+$1+'_Table > tbody').append($5);}}else{$('tr',$3).each(function($p1_0,$p1_1){
$('#'+$p1_1.id).css('display','table-row');});$('#'+$1+'_noRecords').remove();}}catch($6){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.QuickSearch'+$6);}},refreshButtonClick:function(e){try{var $0=e.target.id.split('_')[0];$('#'+$0+'_Table > tbody tr').remove();this.currentObject=$0;$('#'+$0+'_noRecords').remove();if($('#'+$0+'_Filterdiv').length>0){$('#'+$0+'_searchOptionsDiv').css('display','none');$('#'+$0+'_selectedOptionTable > tbody').children().remove();$('#'+$0+'_searchOptionsSearchPropertyDDL').val('noVal');$('#'+$0+'_Filterdiv').attr('filter','off');$('#'+$0+'_FilterBtn').text('Add Filter');$('#'+$0+'_Fieldset').css('border','none');var $1=$('#'+$0+'_Table > tbody');$('#'+$0+'_noRecords').remove();$('#'+$0+'_quickSearchBtn').val('');}this.getData($0);}catch($2){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.RefreshButtonClick'+$2);}},createRefreshButton:function(ObjectName){try{$('#'+ObjectName+'_Refreshdiv').remove();var $0='<div id="'+ObjectName+'_Refreshdiv" filter="off" style= "margin-left:3%;margin-top:1%;">'+'<span id="'+ObjectName+"_refreshbtn\"  style= \" color: rgb(2, 113, 182);font-family: 'Calibri', sans-serif;font-weight:bold;font-size: 11.0pt;width: 12em;height: 1.8em;margin-top: 1%;text-decoration: underline;cursor:pointer\">Refresh View</span></div>";$('#'+this.viewDivName).append($0);$('#'+ObjectName+'_refreshbtn').click(ss.Delegate.create(this,function($p1_0){
this.refreshButtonClick($p1_0);}));}catch($1){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.createRefreshButton'+$1);}},sortOnHeadingClick:function(e){try{var $0='';if(e.target.getAttribute('colNum')!=null){$0=e.target.getAttribute('colNum').toString();}var $1=e.target.id.toString().split('_')[0];sortTable($0,$1+'_Table');var $2=0;var $3=$('#'+$1+'_Table > tbody');$('tr',$3).each(function($p1_0,$p1_1){
$2++;var $1_0=$p1_1.id.split('_')[2];$('#'+$1+'_SLNO_Value'+$1_0).text($2.toString());});}catch($4){this.$0.errorLog('P2.PS.AMEREN.CM.Events.CreateCustomTables.SortOnHeadingClick'+$4);}}}
P2.PS.AMEREN.CM.Events.FormValidations=function(customSettings){this.$10='';this.$12='';this.$14='';this.$15='';this.$17='';this.$18='';this.$19='';this.$1A='';this.$1B='';this.$1C='';this.$1D='';this.$4A='';W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$5B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeSaveForm(ss.Delegate.create(this,this.$5E));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$5D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterSaveForm(ss.Delegate.create(this,this.$60));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterCloseForm(ss.Delegate.create(this,this.$5A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$5C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterMsgProcessed(ss.Delegate.create(this,this.$58));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeCloseForm(ss.Delegate.create(this,this.$59));this.$69(customSettings);}
P2.PS.AMEREN.CM.Events.FormValidations.prototype={$0:false,$1:false,$2:false,$3:false,$4:false,$5:false,$6:false,$7:false,$8:false,$9:false,$A:false,$B:false,$C:false,$D:false,$E:false,$F:false,$11:null,$13:null,$16:true,$1E:'CurrentEngineerTimePhasedSkills',$1F:'TASK_REQUIRED_SKILLS',$20:'ASSIGNMENT_DATA',$21:'TimePhasedSkills',$22:'RequiredSkills1',$23:'Status',$24:'TaskType',$25:'REG_LeakFound',$26:'FollowUpWorks',$27:'FUWStatus',$28:'FUWType',$29:'TaskType',$2A:'IsHelper',$2B:'Assets',$2C:'Status',$2D:false,$2E:'Emergency Valve Inspection',$2F:'Odorizer Inspection',$30:'Tank Fill',$31:'Pipe Examination Steel',$32:'Pipeline Patrol',$33:'Leak Survey',$34:'Leak Investigation',$35:'Corrosion and Steel Damage Evaluation',$36:'Leak Recheck',$37:'Leak Surveillance',$38:'Regulator Station Inspection',$39:'Complete',$3A:'OperationalStatus',$3B:'Complete',$3C:'Inaccessible',$3D:'ClickMobile Message',$3E:'Asset(s) not in final status!',$3F:'A leak investigation must be initiated and completed as follow up work or a leak surveillance must be self-scheduled and completed as a related task',$40:'A leak investigation must be initiated and completed as follow up work or a leak surveillance must be self-scheduled and completed as a related task',$41:'Corrosion and Steel Damage Evaluation Form must be completed',$42:'',$43:'Required tool is missing or expired',$44:'RegStation',$45:'Odorizer',$46:'O_LeakFound',$47:'LeakInvestigation',$48:'LI_LeakLocation',$49:'FileType',$4B:'Valve',$4C:'V_LeakageFound',$4D:'PipeExamSteel',$4E:'PXS_ActionCode',$4F:'FUWType',$50:'Leak Found',$51:'Evaluation Form Required',$52:'Below Grade',$53:'FollowUpWork',$54:'CorrosionTP',$55:false,$56:true,$57:false,$58:function($p0,$p1){if($p1.message!=null&&$p1.message.toString().startsWith('<SXPMobileGetGenericObjectsResult>')){var $0=ss.parseXml($p1.message.toString());if($0.selectSingleNode('CollectionID').text==='8'){$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
this.$1C=$p1_0.getPropertyByName('District').toString();this.$1B=$p1_0.getPropertyByName('ID').toString();if($p0.get_loggedInEngineerKey()!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,$p0.get_loggedInEngineerKey(),ss.Delegate.create(this,function($p2_0){
if($p2_0!=null){if($p2_0.getPropertyByName('LastCompletedOdorizerIntensity')!=null){this.$13=Date.parseDate($p2_0.getPropertyByName('LastCompletedOdorizerIntensity').toString());}else{this.$13=Date.empty;}}}));}}));}}},$59:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){var $0=$p1.get_formObject().get_parentObject();}},$5A:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&!($p1.get_formObject()).get_isNA()){$p0.setSharedData('ParentAssignmentKey','');$p0.setSharedData('REQ_CAME_FROM_EPOCH',true);}},$5B:function($p0,$p1){try{if(this.$1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){this.getSchedulePerDispatchHorizon($p0);}}if(this.$8){this.$55=false;this.$56=true;}if(this.$0){$p0.getBusinessViewServices().getBusinessViewItemByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,$p0.get_loggedInEngineerKey(),ss.Delegate.create(this,function($p1_0){
this.$1C=$p1_0.getPropertyByName('District').toString();this.$1B=$p1_0.getPropertyByName('ID').toString();if($p1_0.getPropertyByName(this.$21)!=null){var $1_0=$p1_0.getPropertyByName(this.$21);$p0.setSharedData(this.$1E,$1_0);}}));}}catch($0){$p0.errorLogEx('Error source:: FormValidations/FormEvents_BeforeOpenForm()',$0);}},$5C:function($p0,$p1){if(this.$4){try{$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0!=null){$p0.getBusinessViewServices().getBusinessViewItemByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,$p0.get_loggedInEngineerKey(),ss.Delegate.create(this,function($p2_0){
this.$1B=$p2_0.getPropertyByName('ID').toString();this.$1C=$p2_0.getPropertyByName('District').toString();var $2_0=this.$6C(Date.get_now());if($p2_0.getPropertyByName('LastForcedReloadSettings')!=null){var $2_1=Date.parseDate($p2_0.getPropertyByName('LastForcedReloadSettings').toString());var $2_2=parseInt(this.$17);var $2_3=this.$6B($2_1,86400*$2_2);if($2_3<Date.get_now()){$p0.sendGetSettingsMessage();var $2_4=new ss.StringBuilder();$2_4.append('<SXPEngineerUpdate><Engineer>');$2_4.append('<ID>'+this.$1B+'</ID>');$2_4.append('<District>'+this.$1C+'</District>');$2_4.append('<LastForcedReloadSettings>'+$2_0+'</LastForcedReloadSettings>');$2_4.append('</Engineer></SXPEngineerUpdate>');$p0.sendWrappedCustomSXP($2_4.toString());}}else{$p0.sendGetSettingsMessage();var $2_5=new ss.StringBuilder();$2_5.append('<SXPEngineerUpdate><Engineer>');$2_5.append('<ID>'+this.$1B+'</ID>');$2_5.append('<District>'+this.$1C+'</District>');$2_5.append('<LastForcedReloadSettings>'+$2_0+'</LastForcedReloadSettings>');$2_5.append('</Engineer></SXPEngineerUpdate>');$p0.sendWrappedCustomSXP($2_5.toString());}}));}}));}catch($0){$p0.errorLog('FormValidations.ClientEvents_AfterClientInitialized:ReloadCheck'+$0);}}},$5D:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&!($p1.get_formObject()).get_isNA()){var $0=$p1.get_formObject().getPropertyByName(2,this.$22);$p0.setSharedData(this.$1F,$0);$p0.setSharedData('ParentAssignmentKey',$p1.get_formObject().get_key());$p0.setSharedData('REQ_CAME_FROM_EPOCH',false);}}catch($1){$p0.showMessageBox('Error:FormValidations.FormEvents_AfterOpenForm',this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p0.errorLog('FormValidations.FormEvents_AfterOpenForm'+$1);}},$5E:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&!($p1.get_formObject()).get_isNA()){if(!!this.$0){var $0=$p0.getSharedData(this.$1E);var $1=$p0.getSharedData(this.$1F);var $2=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$23);if(($0!=null)&&($1!=null)&&($2.toString()===this.$39)){var $3=this.isEngineerHasRequiredSkills($p0);if(!$3){$p0.showMessageBox(this.$10,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}if(!!this.$1){var $4=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$23);if($4!=null){var $5=false;if(this.$11.length>0){for(var $6=0;$6<this.$11.length;$6++){if($4.toString()===this.$11[$6].toString()){$5=true;break;}}}if(!!$5){var $7=$p0.getSharedData(this.$20);if($7!=null){var $8=$p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,'Key');if(this.$61($7,$8)){$p0.showMessageBox('The schedule includes another task in status Arrived or En Route.',this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}if(!!this.$2){var $9=$p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$24);var $A=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$23).toString();if(($9!=null)&&($9.toString()===this.$38)&&($A===this.$39)){var $B=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$44);if($B!=null){if(this.$63($B)){if(!this.$62($p0,$p1)){if(!this.$5F($p0,$p1)){$p0.showMessageBox(this.$12,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}}if(!!this.$3){try{if($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$23).toString()===this.$39&&$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$24).toString()==='Odorant Intensity Test'){this.$16=true;this.$57=false;if(this.$13!=null){var $C=parseInt(this.$15)*60;var $D=this.$6B(this.$13,$C);if($D>Date.get_now()){this.$16=false;}}if(!this.$16){$p1.cancel=true;$p0.showMessageBox(this.$14,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}}}catch($E){$p0.errorLog('FormValidations - Odorant Intensity Test Validation'+$E);}}if(this.$8){if(!this.$55){try{$p0.infoLog('IN Leak Survey/Pipeline Patrol Tasks Completion Validation');var $F=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$2C).toString();if($F===this.$39){var $10=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$29).toString();var $11=Boolean.parse($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$2A).toString());if(!$11&&$10===this.$33||$10===this.$32){var $12=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$2B);var $13=true;if($12!=null){var $14=$12.get_count();var $15=0;var $enum1=ss.IEnumerator.getEnumerator($12);while($enum1.moveNext()){var $16=$enum1.current;$p1.cancel=true;if(!String.isNullOrEmpty($16.get_mobileKey())){$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey(30000008,$16.get_mobileKey(),ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0.getPropertyByName(this.$3A);if($1_0!=null){var $1_1=$1_0.toString();if($1_1!==this.$3B&&$1_1!==this.$3C){this.$56=false;}}$15+=1;if($15===$14){if(!this.$56){$p0.showMessageBox(this.$3E,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}else{this.$55=true;this.$56=true;$p1.get_formServices().saveForm();}}}));}else{$p0.getBusinessViewServices().getBusinessViewItemByObjectType(30000008,$16.get_key(),ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0.getPropertyByName(this.$3A);if($1_0!=null){var $1_1=$1_0.toString();if($1_1!==this.$3B&&$1_1!==this.$3C){this.$56=false;}}$15+=1;if($15===$14){if(!this.$56){$p0.showMessageBox(this.$3E,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}else{this.$55=true;this.$56=true;$p1.get_formServices().saveForm();}}}));}}if(!$13){$p0.showMessageBox(this.$3E,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}catch($17){$p0.errorLog('FormValidations.163 - Leak Survey/Pipeline Patrol Tasks Completion Validation'+$17);}}}if(this.$9){try{$p0.infoLog('IN Odorizer Inspection/Tank Fill Tasks Completion Validation');var $18=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$2C).toString();if($18===this.$39){var $19=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$29).toString();if($19===this.$2F||$19===this.$30){var $1A=Type.safeCast($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$45),W6.ClickMobile.Web.ObjectModel.W6CMBusinessObjectItem);var $1B=$1A.get_genericObject().getPropertyByName(this.$46).toString();if($1B===this.$50){var $1C=this.$64($p1,this.$4F,this.$34);if(!$1C){if(!this.$5F($p0,$p1)){$p0.showMessageBox(this.$3F,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}}catch($1D){$p0.errorLog('FormValidations.164 - Odorizer Inspection/Tank Fill Tasks Completion Validation'+$1D);}}if(this.$A){try{$p0.infoLog('IN Emergency Valve Inspection Tasks Completion Validation');var $1E=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$2C).toString();if($1E===this.$39){var $1F=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$29).toString();if($1F===this.$2E){var $20=Type.safeCast($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$4B),W6.ClickMobile.Web.ObjectModel.W6CMBusinessObjectItem);var $21=$20.get_genericObject().getPropertyByName(this.$4C);if($21.toString()===this.$50){var $22=this.$64($p1,this.$4F,this.$34);if(!$22){if(!this.$5F($p0,$p1)){$p0.showMessageBox(this.$40,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}}catch($23){$p0.errorLog('FormValidations.165 - Emergency Valve Inspection Tasks Completion Validation'+$23);}}if(this.$B){try{$p0.infoLog('IN 167 - Pipe Examination Steel Tasks Completion Validation');var $24=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$2C).toString();if($24===this.$39){var $25=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$29).toString();if($25===this.$31){var $26=Type.safeCast($p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$4D),W6.ClickMobile.Web.ObjectModel.W6CMBusinessObjectItem);var $27=$26.get_genericObject().getPropertyByName(this.$4E).toString();if($27===this.$51){var $28=this.$64($p1,this.$4F,this.$35);if(!$28){$p0.showMessageBox(this.$41,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}catch($29){$p0.errorLog('FormValidations.167 - Pipe Examination Steel Tasks Completion Validation'+$29);}}if(this.$7){try{$p0.infoLog('IN 168 - Leak Surveillance/Leak Recheck Tasks Completion Validation');var $2A=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$2C).toString();if($2A===this.$39){var $2B=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$29).toString();if($2B===this.$36||$2B===this.$37){var $2C=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$47);var $2D=$2C.get_genericObject().getPropertyByName($p0.getCollectionIDByName(this.$47),this.$48);if($2D!=null&&$2D.toString()===this.$52){if(!this.$66($p0,$p1)){$p1.cancel=true;$p0.showMessageBox(this.$4A,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);}}}}}catch($2E){$p0.errorLog('FormValidations.168 - Leak Surveillance/Leak Recheck Tasks Completion Validation'+$2E);}}}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$53)){try{if(this.$5){if($p1.get_formServices().getUIPropertyValueByName(this.$27)!=null&&$p1.get_formServices().getUIPropertyValueByName(this.$28)!=null){if($p1.get_formServices().getUIPropertyValueByName(this.$27).toString()==='Complete'){if($p1.get_formServices().getUIPropertyValueByName(this.$28).toString()==='Leak Repair'){var $2F=$p1.get_formServices().getUIPropertyValueByName('LeakRepair');if($2F!=null){var $30=$2F.get_genericObject().getPropertyByName($p0.getCollectionIDByName('LeakRepair'),'LR_Location');if($30!=null&&$30.toString()==='Below Grade'){if(!this.$67($p1)){$p0.showMessageBox(this.$18,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}}}}catch($31){$p0.errorLog('FormValidations- Leak Repair FollowUp Validation'+$31);}if(this.$6&&$p1.get_formServices().getUIPropertyValueByName(this.$27)!=null&&$p1.get_formServices().getUIPropertyValueByName(this.$28)!=null){if($p1.get_formServices().getUIPropertyValueByName(this.$27).toString()===this.$39){if($p1.get_formServices().getUIPropertyValueByName(this.$28).toString()===this.$34){var $32=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName('FollowUpWork'),'LeakInvestigation');var $33=$32.get_genericObject().getPropertyByName($p0.getCollectionIDByName(this.$47),'LI_LeakLocation');if($33!=null&&$33.toString()===this.$52){if(!this.$67($p1)){$p0.showMessageBox(this.$19,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}if(!this.$65($p0,$p1)){$p0.showMessageBox(this.$1A,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}}}try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){var $34='';var $35='';var $36='';$p0.setSharedData('AssetSavedOnForm',true);$p0.setSharedData('AssetStatusChangedFromForm',true);if($p0.getSharedData('ParentAssignmentKey')!=null){$36=$p0.getSharedData('ParentAssignmentKey').toString();}if($p1.get_formObject().getPropertyByName(this.$3A)!=null){$34=$p1.get_formObject().getPropertyByName(this.$3A).toString();}if($p1.get_formServices().getUIPropertyValueByName(this.$3A)!=null){$35=$p1.get_formServices().getUIPropertyValueByName(this.$3A).toString();}if($35===this.$3B&&!!$36){var $37=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,parseInt($36));var $38=$37.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'RequiredTools');if($38!=null){if($38.get_count()>0){if(this.$C){var $enum2=ss.IEnumerator.getEnumerator($38);while($enum2.moveNext()){var $39=$enum2.current;if($39.get_genericObject().getPropertyByName('ContractorToolExpDate')!=null){if(Date.parseDate($39.get_genericObject().getPropertyByName('ContractorToolExpDate').toString())<Date.get_now()||String.isNullOrEmpty($39.get_genericObject().getPropertyByName('ContractorToolSN').toString())){$p1.cancel=true;$p0.setSharedData('AssetSavedOnForm',false);$p0.showMessageBox(this.$42,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);break;}}else{$p1.cancel=true;$p0.setSharedData('AssetSavedOnForm',false);$p0.showMessageBox(this.$42,this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);break;}}}}}}}}catch($3A){$p0.errorLog('FormValidations- Validate Asser Completion'+$3A);}if(!$p1.cancel&&$p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$54)){if(this.$D){if($p1.get_formServices().getUIPropertyValueByName('CTP_PS')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('CTP_PS').toString())&&parseFloat($p1.get_formServices().getUIPropertyValueByName('CTP_PS').toString())>7||parseFloat($p1.get_formServices().getUIPropertyValueByName('CTP_PS').toString())<0){$p0.showMessageBox('PS must be between 0 and 7',this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}if(this.$E){if($p1.get_formServices().getUIPropertyValueByName('CTP_CS')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('CTP_CS').toString())&&parseFloat($p1.get_formServices().getUIPropertyValueByName('CTP_CS').toString())>7||parseFloat($p1.get_formServices().getUIPropertyValueByName('CTP_CS').toString())<0){$p0.showMessageBox('CS must be between 0 and 7',this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}if(this.$F){if($p1.get_formServices().getUIPropertyValueByName('CTP_PSOff')!=null&&!String.isNullOrEmpty($p1.get_formServices().getUIPropertyValueByName('CTP_CS').toString())&&parseFloat($p1.get_formServices().getUIPropertyValueByName('CTP_PSOff').toString())>7||parseFloat($p1.get_formServices().getUIPropertyValueByName('CTP_PSOff').toString())<0){$p0.showMessageBox('PS Off must be between 0 and 7',this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);$p1.cancel=true;}}}}catch($3B){$p0.errorLogEx('Error source:: FormValidations/FormEvents_BeforeSaveForm()',$3B);}},$5F:function($p0,$p1){var $0=false;try{var $1=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'RelatedTasks');if($1!=null&&$1.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if(!$0){if($2.get_genericObject().getPropertyByName('TaskType').toString()==='Leak Surveillance'&&$2.get_status()!==W6CMClientGlobals.W6CMBusinessObjectItemStatus.eDeleted){$0=true;}}}}return $0;}catch($3){$p0.errorLogEx('Error source::HasLeakSurveillanceRelatedTask',$3);return false;}},$60:function($p0,$p1){if(!!this.$3){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&($p1.get_formObject()).get_taskKey()!==-1){if(!this.$57&&$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$23).toString()==='Complete'&&$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$24).toString()==='Odorant Intensity Test'){if(this.$16){var $0=new ss.StringBuilder();$0.append('<SXPEngineerUpdate><Engineer>');$0.append('<ID>'+this.$1B+'</ID>');$0.append('<District>'+this.$1C+'</District>');$0.append('<LastCompletedOdorizerIntensity>'+this.$6C(Date.get_now())+'</LastCompletedOdorizerIntensity>');$0.append('</Engineer></SXPEngineerUpdate>');this.$57=true;$p0.sendWrappedCustomSXP($0.toString());}}}}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){$p0.setSharedData('AssetSavedOnForm',false);}},$61:function($p0,$p1){var $0=false;var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.getPropertyByName('Key');if(($2!=null)&&($p1===$2)){continue;}else{for(var $3=0;$3<this.$11.length;$3++){var $4=this.$11[$3].toString();if(($1.get_status()!=null)&&($1.get_status().toString()===$4)){$0=true;return $0;}}}}return $0;},$62:function($p0,$p1){var $0=false;var $1=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$26);if($1.get_count()>0){var $2=$1.toArray();for(var $3=0;$3<$2.length;$3++){var $4=$2[$3].get_genericObject().getPropertyByName(this.$4F);if($4!=null&&$4.toString()===this.$34){$0=true;}}}return $0;},$63:function($p0){var $0=false;var $1=$p0.get_genericObject().getPropertyByName(this.$25);if($1!=null&&$1.toString()==='Leak Found'){$0=true;}return $0;},$64:function($p0,$p1,$p2){var $0=$p0.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$26);if($0!=null){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.get_genericObject().getPropertyByName($p1).toString();if($2===$p2){return true;}}}return false;},$65:function($p0,$p1){var $0=$p1.get_formServices().getUIPropertyValueByNameEx($p0.getCollectionIDByName('FollowUpWork'),'FUWAttachments');var $1=false;if($0!=null){for(var $2=0;$2<$0.get_count();$2++){var $3=($0.get_item($2)).get_genericObject();var $4=!String.isNullOrEmpty($3.get_mobileKey());if($4){$1=true;break;}}}return $1;},$66:function($p0,$p1){var $0=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Attachments');var $1=false;if($0!=null){for(var $2=0;$2<$0.get_count();$2++){var $3=($0.get_item($2)).get_genericObject();var $4=!String.isNullOrEmpty($3.get_mobileKey());if($4){$1=true;break;}}}return $1;},$67:function($p0){var $0=false;var $1=$p0.get_formServices().getUIPropertyValueByName('FUWRequiredTools');if($1!=null){var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if($2.get_genericObject().getPropertyByName('RequiredToolType').toString()==='CGI'){$0=true;break;}}}return $0;},isEngineerHasRequiredSkills:function(controllerServices){var $0=false;var $1=controllerServices.getSharedData(this.$1E);var $2=controllerServices.getSharedData(this.$1F);var $3=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper($2.toString());if($3!=null&&$3.selectNodes('P/TaskRequiredSkill1').length>0){var $enum1=ss.IEnumerator.getEnumerator($3.selectNodes('P/TaskRequiredSkill1'));while($enum1.moveNext()){var $4=$enum1.current;var $5=$4.selectSingleNode('Key').attributes[1].nodeValue;if($5!=null){var $6=[];var $7=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper($1.toString());if(!$7.selectNodes('P/SkillPhase').length){return $0;}var $enum2=ss.IEnumerator.getEnumerator($7.selectNodes('P/SkillPhase'));while($enum2.moveNext()){var $8=$enum2.current;var $9=$8.selectSingleNode('SkillKey').attributes[1].nodeValue;if($9===$5){var $A=Date.parseDate($8.selectSingleNode('FinishTime').text);if(($A!=null)&&($A>Date.get_now())){$0=true;break;}}}}else{$0=true;}}}else if(!$3.selectNodes('P/TaskRequiredSkill1').length){$0=true;}return $0;},$68:function($p0){try{if($p0!=null){return Boolean.parse($p0.toString());}}catch($0){return false;}return false;},$69:function($p0){try{var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper($p0);var $1=$0.selectNodes('Settings/Events/Event');var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if($2.attributes.getNamedItem('ID').nodeValue==='200'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$0=true;this.readSkillsValidationSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='162'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$1=true;this.readTaskStatusValidationSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='166'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$2=true;this.readRegulatorStationInspectionSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='171'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$3=true;this.readOdorantIntensityValidationSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='145'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$4=true;this.readLastReloadCheckSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='169'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$5=true;this.readLeakRepairFWSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='170'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$6=true;this.readLeakInvestigationIncompleteSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='163'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$8=true;this.$3E=$2.selectSingleNode('Settings/ErrorMessage').text;}}if($2.attributes.getNamedItem('ID').nodeValue==='164'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$9=true;this.$3F=$2.selectSingleNode('Settings/ErrorMessage').text;}}if($2.attributes.getNamedItem('ID').nodeValue==='165'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$A=true;this.$40=$2.selectSingleNode('Settings/ErrorMessage').text;}}if($2.attributes.getNamedItem('ID').nodeValue==='167'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$B=true;this.$41=$2.selectSingleNode('Settings/ErrorMessage').text;}}if($2.attributes.getNamedItem('ID').nodeValue==='168'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$7=true;this.readLeakRecheckSettings($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='158'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$C=true;this.$6A($2.firstChild.xml);}}if($2.attributes.getNamedItem('ID').nodeValue==='1811'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$D=true;}}if($2.attributes.getNamedItem('ID').nodeValue==='1812'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$E=true;}}if($2.attributes.getNamedItem('ID').nodeValue==='1813'){if(this.$68($2.attributes.getNamedItem('Enabled').nodeValue)){this.$F=true;}}}}catch($3){}},$6A:function($p0){try{if(!String.isNullOrEmpty($p0)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper($p0);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$42=$1.selectSingleNode('ErrorMessage').text;this.$43=this.$42;}}}catch($2){}},readLeakRepairFWSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$18=$1.selectSingleNode('ErrorMessage').text;}}}catch($2){}},readLeakRecheckSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$4A=$1.selectSingleNode('ErrorMessage').text;}}}catch($2){}},readLastReloadCheckSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$17=$1.selectSingleNode('MaxDaysToReloadSettings').text;}}}catch($2){}},readLeakInvestigationIncompleteSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$19=$1.selectSingleNode('CGIErrorMessage').text;this.$1A=$1.selectSingleNode('ScreenshotErrorMessage').text;}}}catch($2){}},readOdorantIntensityValidationSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$14=$1.selectSingleNode('ErrorMessage').text;this.$15=$1.selectSingleNode('MinTimeDurationinMinutes').text;}}}catch($2){}},readTaskStatusValidationSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);this.$11=[];var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings/Statuses/Status'));while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.text;this.$11.add($2);}}}catch($3){}},getSchedulePerDispatchHorizon:function(controllerServices){try{var $0=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHistory().seconds;var $1=W6.ClickMobile.Web.ObjectModel.Settings.W6CMSettings.get_instance().get_adminSettings().get_scheduleSettings().get_dispatchingHorizon().seconds;var $2=this.$6B(Date.get_now(),-($0+216000));var $3=this.$6B(Date.get_now(),($1+216000));controllerServices.getTodaySchedule($2,$3,ss.Delegate.create(this,function($p1_0){
if(($p1_0!=null&$p1_0.get_count()>0)===1){controllerServices.setSharedData(this.$20,$p1_0);}}));}catch($4){controllerServices.showMessageBox('Error:FormValidations.GetSchedulePerDispatchHorizon',this.$3D,W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok,null);controllerServices.errorLog('FormValidations.GetSchedulePerDispatchHorizon'+$4);}},$6B:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);},$6C:function($p0){var $0=$p0.getFullYear().toString();var $1=($p0.getMonth()+1).toString();if($1.length===1){$1='0'+$1;}var $2=$p0.getDate().toString();if($2.length===1){$2='0'+$2;}var $3=$p0.getHours().toString();if($3.length===1){$3='0'+$3;}var $4=$p0.getMinutes().toString();if($4.length===1){$4='0'+$4;}return $0+'-'+$1+'-'+$2+'T'+$3+':'+$4+':00';},readRegulatorStationInspectionSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$12=$1.selectSingleNode('ErrorMessage').text;}}}catch($2){}},readSkillsValidationSettings:function(setting){try{if(!String.isNullOrEmpty(setting)){var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(setting);var $enum1=ss.IEnumerator.getEnumerator($0.selectNodes('Settings'));while($enum1.moveNext()){var $1=$enum1.current;this.$10=$1.selectSingleNode('ErrorMessage').text;}}}catch($2){}}}
P2.PS.AMEREN.CM.Events.GenericClientEvents=function(){W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$13));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterDictionarySync(ss.Delegate.create(this,this.$11));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterDictionaryDataLoaded(ss.Delegate.create(this,this.$10));}
P2.PS.AMEREN.CM.Events.GenericClientEvents.prototype={$0:'Accepted',$1:'SDID_TASK_STATUS_ACCEPT',$2:'Dispatched',$3:'SDID_TASK_STATUS_DISPATCHED',$4:'SDID_TASK_TYPE_LIST',$5:'OPERATING',$6:'ACTIVE',$7:'Status',$8:'Complete',$9:'Incomplete',$A:'Rejected',$B:'SDID_FOLLOWUP_TASK_TYPE_LIST',$C:0,$D:56,$E:1600,$F:function($p0,$p1){if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){if($p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'TaskType')!=null&&($p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'TaskType').toString()==='Leak Survey'||$p1.get_formObject().getPropertyByName(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'TaskType').toString()==='Pipeline Patrol')){}}},$10:function($p0,$p1){},$11:function($p0,$p1){if($p1.get_dictionaryID()===$p0.getDictionaryIDByName('OperationalStatus')){$p0.getDictionaryItems($p0.getDictionaryIDByName('OperationalStatus'),50,function($p1_0){
$p0.setSharedData('OperationalStatus',$p1_0);});}if($p1.get_dictionaryID()===$p0.getDictionaryIDByName('AssetType')){$p0.getDictionaryItems($p0.getDictionaryIDByName('AssetType'),50,function($p1_0){
$p0.setSharedData('AssetType',$p1_0);});}var $0=[];if($p1.get_dictionaryID()===$p0.getDictionaryIDByName('TaskType')){$p0.getDictionaryItems(this.$D,this.$E,ss.Delegate.create(this,function($p1_0){
$p0.setSharedData(this.$4,$p1_0);var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=ss.parseXml($1_0.get_body());var $1_2='';if($1_1.selectSingleNode('FollowUpTaskTypeCategory')==null||!$1_1.selectSingleNode('FollowUpTaskTypeCategory').text.toString().toLowerCase()||$1_1.selectSingleNode('FollowUpTaskTypeCategory').text.toString().toLowerCase()!==$p0.getSharedData('BusinessLineForFollowup').toString().toLowerCase()){$0.add($1_0);}}$p0.setSharedData(this.$B,$0);}));}if($p1.get_dictionaryID()===$p0.getDictionaryIDByName('TaskStatus')){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('TaskStatus'),this.$0,-1,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;$p0.setSharedData(this.$1,$1_0);}}));$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('TaskStatus'),this.$2,-1,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;$p0.setSharedData(this.$3,$1_0);}}));}},$12:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&($p1.get_formObject()).get_taskKey()!==-1){var $0=$p1.get_formServices().getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,this.$7);if($0!=null){if($0.toString()===this.$8||$0.toString()===this.$9||$0.toString()===this.$A){$p1.get_formServices().closeForm();}}}}catch($1){$p0.errorLogEx('Error source:: APCMT-364/FormEvents_AfterSaveForm()',$1);}},$13:function($p0,$p1){var $0=0;if($p0.getSharedData(this.$4)!=null){var $1=$p0.getSharedData(this.$4);$0=$1.get_count();}if($p0.getSharedData(this.$1)==null||!$p0.getSharedData(this.$1)){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('TaskStatus'),this.$0,-1,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;$p0.setSharedData(this.$1,$1_0);}}));}if($p0.getSharedData(this.$3)==null||!$p0.getSharedData(this.$3)){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('TaskStatus'),this.$2,-1,ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;$p0.setSharedData(this.$3,$1_0);}}));}if($p0.getSharedData(this.$4)==null||!$p0.getSharedData(this.$4)||!$0){$p0.getDictionaryItems(this.$D,this.$E,ss.Delegate.create(this,function($p1_0){
$p0.setSharedData(this.$4,$p1_0);}));}if($p0.getSharedData('OperationalStatus')==null||!$p0.getSharedData('OperationalStatus')){$p0.getDictionaryItems($p0.getDictionaryIDByName('OperationalStatus'),50,function($p1_0){
$p0.setSharedData('OperationalStatus',$p1_0);});}if($p0.getSharedData('AssetType')==null||!$p0.getSharedData('AssetType')){$p0.getDictionaryItems($p0.getDictionaryIDByName('AssetType'),50,function($p1_0){
$p0.setSharedData('AssetType',$p1_0);});}}}
P2.PS.AMEREN.CM.Events.PopulateFields=function(customSettings){this.$5='';this.$18={};W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenForm(ss.Delegate.create(this,this.$1F));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeOpenNewForm(ss.Delegate.create(this,this.$1D));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterOpenForm(ss.Delegate.create(this,this.$1C));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterClientInitialized(ss.Delegate.create(this,this.$1E));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_beforeCloseForm(ss.Delegate.create(this,this.$1B));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_afterMsgProcessed(ss.Delegate.create(this,this.$1A));W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_formEvents().add_afterPropertyChanged(ss.Delegate.create(this,this.$19));this.$26(customSettings);}
P2.PS.AMEREN.CM.Events.PopulateFields.prototype={$0:'FollowUpWork',$1:'ServiceCard',$2:'LI_EngineerID',$3:'SID_ENGG_NAME',$4:'SC_Type',$6:43839192,$7:43354653,$8:40684946,$9:45282796,$A:47951104,$B:42150534,$C:'PXS_DateContacted',$D:'MF_EDTime',$E:'SCD_Action',$F:'SCD_DateInstalled',$10:'SCD_InstalledBy',$11:'O_OdorizerType',$12:'SCD_ParentServiceType',$13:'SC_Type',$14:'Add',$15:'ADDWTNKF',$16:'SCWork',$17:'OOdorizerType',$19:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('LeakRepair')&&$p1.get_propertyName()==='LR_LeakCause'){$p0.setSharedData('LRLeakCause',$p1.get_newValue());}},$1A:function($p0,$p1){if($p0.getSharedData(this.$3)==null||!$p0.getSharedData(this.$3)){if($p1.message!=null&&$p1.message.toString().startsWith('<SXPMobileGetGenericObjectsResult>')){var $0=ss.parseXml($p1.message.toString());if($0.selectSingleNode('CollectionID').text==='8'){$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p0.get_loggedInEngineerKey()!==-1){$p0.getBusinessViewServices().getBusinessViewItemByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,$p0.get_loggedInEngineerKey(),ss.Delegate.create(this,function($p2_0){
if($p2_0!=null){this.$5=$p2_0.getPropertyByName('Name').toString();$p0.setSharedData(this.$3,this.$5);}}));}}));}}}},$1B:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('Asset')){var $0=$p1.get_formObject().get_parentObject();}},$1C:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===this.$9){var $0=$p1.get_formObject().getPropertyByName(this.$13);if($0!=null){$p0.setSharedData(this.$4,$0);}}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('LeakRepair')){if(($p1.get_formServices().getUIPropertyValueByName('LR_AssetType')!=null&&!$p1.get_formServices().getUIPropertyValueByName('LR_AssetType').toString())||$p1.get_formServices().getUIPropertyValueByName('LR_AssetType')==null){if($p1.get_formObject().get_parentObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $1=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$p1.get_formObject().get_parentObject().get_key());var $2=$1.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($2!=null&&$2.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;if($3.get_key()===-1){this.$24($p0,$p1,$3);}if($3.get_key()!==-1){this.$25($p0,$p1,$3);}}}}else if($p1.get_formObject().get_parentObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_parentObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')){var $4=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$p1.get_formObject().get_parentObject().get_parentObject().get_key());var $5=$4.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($5!=null&&$5.get_count()>0){var $enum2=ss.IEnumerator.getEnumerator($5);while($enum2.moveNext()){var $6=$enum2.current;if($6.get_key()===-1){this.$24($p0,$p1,$6);}if($6.get_key()!==-1){this.$25($p0,$p1,$6);}}}}else if($p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){var $7=null;if($p1.get_formObject().get_parentObject().get_key()!==-1){var $8=$p0.getFormServices().getOpenFormByTypeAndKey($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_parentObject().get_key());$7=$8.getUIPropertyValueByName('FUWAssets');}else{var $9=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_mobileKey());$7=$9.getUIPropertyValueByName('FUWAssets');}if($7!=null&&$7.get_count()>0){var $enum3=ss.IEnumerator.getEnumerator($7);while($enum3.moveNext()){var $A=$enum3.current;if($A.get_key()===-1){this.$24($p0,$p1,$A);}if($A.get_key()!==-1){this.$25($p0,$p1,$A);}}}}else if($p1.get_formObject().get_parentObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')&&$p1.get_formObject().get_parentObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){var $B=null;if($p1.get_formObject().get_parentObject().get_parentObject().get_key()!==-1){$B=$p0.getFormServices().getOpenFormByTypeAndKey($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_parentObject().get_parentObject().get_key());}else{$B=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_parentObject().get_mobileKey());}var $C=$B.getUIPropertyValueByName('FUWAssets');if($C!=null&&$C.get_count()>0){var $enum4=ss.IEnumerator.getEnumerator($C);while($enum4.moveNext()){var $D=$enum4.current;if($D.get_key()===-1){this.$24($p0,$p1,$D);}if($D.get_key()!==-1){this.$25($p0,$p1,$D);}}}}}}}catch($E){$p0.errorLogEx('Error source:: PopulateFields/FormEvents_BeforeOpenNewForm()',$E);}},$1D:function($p0,$p1){if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('LeakRepair')&&$p1.get_formObject().get_key()===-1){if($p1.get_formObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')){if($p1.get_formObject().get_parentObject().get_mobileKey()!=null){var $0=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_mobileKey());var $1=$0.getUIPropertyValueByName('LI_LeakLocation').toString();$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('LRLocation'),$1,1,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;$p1.get_formServices().setUIPropertyValueByName('LR_Location',$1_0);$p1.get_formObject().setPropertyByName('LR_Location',$1_0);break;}});}}}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('LeakRepair')){if(($p1.get_formServices().getUIPropertyValueByName('LR_AssetType')!=null&&!$p1.get_formServices().getUIPropertyValueByName('LR_AssetType').toString())||$p1.get_formServices().getUIPropertyValueByName('LR_AssetType')==null){if($p1.get_formObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $2=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$p1.get_formObject().get_parentObject().get_key());var $3=$2.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($3!=null&&$3.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $4=$enum1.current;if($4.get_key()===-1){this.$22($p0,$p1,$4);}if($4.get_key()!==-1){this.$23($p0,$p1,$4);}}}}else if($p1.get_formObject().get_parentObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_parentObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')){var $5=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$p1.get_formObject().get_parentObject().get_parentObject().get_key());var $6=$5.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($6!=null&&$6.get_count()>0){var $enum2=ss.IEnumerator.getEnumerator($6);while($enum2.moveNext()){var $7=$enum2.current;if($7.get_key()===-1){this.$22($p0,$p1,$7);}if($7.get_key()!==-1){this.$23($p0,$p1,$7);}}}}else if($p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){var $8=null;if($p1.get_formObject().get_parentObject().get_key()!==-1){var $9=$p0.getFormServices().getOpenFormByTypeAndKey($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_parentObject().get_key());$8=$9.getUIPropertyValueByName('FUWAssets');}else{var $A=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_mobileKey());$8=$A.getUIPropertyValueByName('FUWAssets');}if($8!=null&&$8.get_count()>0){var $enum3=ss.IEnumerator.getEnumerator($8);while($enum3.moveNext()){var $B=$enum3.current;if($B.get_key()===-1){this.$22($p0,$p1,$B);}if($B.get_key()!==-1){this.$23($p0,$p1,$B);}}}}else if($p1.get_formObject().get_parentObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')&&$p1.get_formObject().get_parentObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){var $C=null;if($p1.get_formObject().get_parentObject().get_parentObject().get_key()!==-1){$C=$p0.getFormServices().getOpenFormByTypeAndKey($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_parentObject().get_parentObject().get_key());}else{$C=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_parentObject().get_mobileKey());}var $D=$C.getUIPropertyValueByName('FUWAssets');if($D!=null&&$D.get_count()>0){var $enum4=ss.IEnumerator.getEnumerator($D);while($enum4.moveNext()){var $E=$enum4.current;if($E.get_key()===-1){this.$22($p0,$p1,$E);}if($E.get_key()!==-1){this.$23($p0,$p1,$E);}}}}}}if($p1.get_formObject().get_objectType()===this.$7){$p1.get_formServices().setUIPropertyValueByName(this.$C,Date.get_now());}if($p1.get_formObject().get_objectType()===this.$8){$p1.get_formServices().setUIPropertyValueByName(this.$D,Date.get_now());if($p0.getSharedData('LRLeakCause')!=null){$p1.get_formObject().setPropertyByName('MF_ParentLeakCause',$p0.getSharedData('LRLeakCause'));}}if($p1.get_formObject().get_objectType()===this.$A){if($p0.getSharedData(this.$4)!=null&&$p0.getSharedData(this.$4).toString()!=='Partial Replacement'){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName(this.$16),this.$14,1,ss.Delegate.create(this,function($p1_0){
$p1.get_formServices().setUIPropertyValueByName(this.$E,$p1_0.get_item(0));$p1.get_formObject().setPropertyByName(this.$E,$p1_0.get_item(0));}));}$p1.get_formServices().setUIPropertyValueByName(this.$F,Date.get_now());$p1.get_formServices().setUIPropertyValueByName(this.$10,$p0.getSharedData(this.$3));$p1.get_formObject().setPropertyByName(this.$12,$p0.getSharedData(this.$4));}if($p1.get_formObject().get_objectType()===this.$B){$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName(this.$17),this.$15,1,ss.Delegate.create(this,function($p1_0){
$p1.get_formObject().setPropertyByName(this.$11,$p1_0.get_item(0));}));}},$1E:function($p0,$p1){if($p0.getSharedData(this.$3)==null||!$p0.getSharedData(this.$3)){$p0.getLoggedInEngineer(ss.Delegate.create(this,function($p1_0){
if($p1_0!=null){$p0.getBusinessViewServices().getBusinessViewItemByObjectType(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Engineer,$p0.get_loggedInEngineerKey(),ss.Delegate.create(this,function($p2_0){
if($p2_0!=null){this.$5=$p2_0.getPropertyByName('Name').toString();$p0.setSharedData(this.$3,this.$5);}}));}}));}},$1F:function($p0,$p1){try{if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName(this.$0)){if(($p1.get_formServices().getUIPropertyValueByName('FUWOpenDate')==null)){$p1.get_formServices().setUIPropertyValueByName('FUWOpenDate',Date.get_now());}if(($p1.get_formServices().getUIPropertyValueByName('FUWStart')==null)){$p1.get_formServices().setUIPropertyValueByName('FUWStart',Date.get_now());$p1.get_formServices().setUIPropertyValueByName('FUWFinish',this.$27(Date.get_now(),60));}}if($p1.get_formObject().get_objectType()===this.$8){if($p0.getSharedData('LRLeakCause')!=null){$p1.get_formObject().setPropertyByName('MF_ParentLeakCause',$p0.getSharedData('LRLeakCause'));}}}catch($0){$p0.errorLogEx('Error source:: PopulateFields/FormEvents_BeforeOpenForm()',$0);}if($p1.get_formObject().get_objectType()===this.$6){$p1.get_formServices().setUIPropertyValueByName(this.$2,$p0.getSharedData(this.$3));}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('LeakRepair')&&$p1.get_formObject().get_key()===-1){if($p1.get_formObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')){if($p1.get_formObject().get_parentObject().get_mobileKey()!=null){var $1=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_mobileKey());var $2=$1.getUIPropertyValueByName('LI_LeakLocation').toString();$p0.getDictionaryItemsFilterByName($p0.getDictionaryIDByName('LRLocation'),$2,1,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($p1_0);while($enum1.moveNext()){var $1_0=$enum1.current;$p1.get_formServices().setUIPropertyValueByName('LR_Location',$1_0);$p1.get_formObject().setPropertyByName('LR_Location',$1_0);break;}});}}}if($p1.get_formObject().get_objectType()===$p0.getCollectionIDByName('LeakRepair')){if(($p1.get_formServices().getUIPropertyValueByName('LR_AssetType')!=null&&!$p1.get_formServices().getUIPropertyValueByName('LR_AssetType').toString())||$p1.get_formServices().getUIPropertyValueByName('LR_AssetType')==null){if($p1.get_formObject().get_parentObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment){var $3=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$p1.get_formObject().get_parentObject().get_key());var $4=$3.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($4!=null&&$4.get_count()>0){var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $5=$enum1.current;if($5.get_key()===-1){this.$20($p0,$p1,$5);}if($5.get_key()!==-1){this.$21($p0,$p1,$5);}}}}else if($p1.get_formObject().get_parentObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_parentObject().get_objectType()===W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')){var $6=$p0.getFormServices().getOpenFormByTypeAndKey(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Assignment,$p1.get_formObject().get_parentObject().get_parentObject().get_key());var $7=$6.getUIPropertyValueByNameEx(W6.ClickMobile.Web.ObjectModel.W6CMObjectTypes.Task,'Assets');if($7!=null&&$7.get_count()>0){var $enum2=ss.IEnumerator.getEnumerator($7);while($enum2.moveNext()){var $8=$enum2.current;if($8.get_key()===-1){this.$20($p0,$p1,$8);}if($8.get_key()!==-1){this.$21($p0,$p1,$8);}}}}else if($p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){var $9=null;if($p1.get_formObject().get_parentObject().get_key()!==-1){var $A=$p0.getFormServices().getOpenFormByTypeAndKey($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_parentObject().get_key());$9=$A.getUIPropertyValueByName('FUWAssets');}else{var $B=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_mobileKey());$9=$B.getUIPropertyValueByName('FUWAssets');}if($9!=null&&$9.get_count()>0){var $enum3=ss.IEnumerator.getEnumerator($9);while($enum3.moveNext()){var $C=$enum3.current;if($C.get_key()===-1){this.$20($p0,$p1,$C);}if($C.get_key()!==-1){this.$21($p0,$p1,$C);}}}}else if($p1.get_formObject().get_parentObject().get_parentObject()!=null&&$p1.get_formObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('LeakInvestigation')&&$p1.get_formObject().get_parentObject().get_parentObject().get_objectType()===$p0.getCollectionIDByName('FollowUpWork')){var $D=null;if($p1.get_formObject().get_parentObject().get_parentObject().get_key()!==-1){$D=$p0.getFormServices().getOpenFormByTypeAndKey($p0.getCollectionIDByName('FollowUpWork'),$p1.get_formObject().get_parentObject().get_parentObject().get_key());}else{$D=$p0.getFormServices().getOpenFormByMobileKey($p1.get_formObject().get_parentObject().get_parentObject().get_mobileKey());}var $E=$D.getUIPropertyValueByName('FUWAssets');if($E!=null&&$E.get_count()>0){var $enum4=ss.IEnumerator.getEnumerator($E);while($enum4.moveNext()){var $F=$enum4.current;if($F.get_key()===-1){this.$20($p0,$p1,$F);}if($F.get_key()!==-1){this.$21($p0,$p1,$F);}}}}}}},$20:function($p0,$p1,$p2){var $0='';try{$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('Asset'),$p2.get_mobileKey(),ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('AssetType')!=null){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum1.moveNext()){var $1_0=$enum1.current;if(Object.keyExists(this.$18,$p1_0.getPropertyByName('AssetType').toString())){$0=this.$18[$p1_0.getPropertyByName('AssetType').toString()];break;}}$p0.getDictionaryItems($p0.getDictionaryIDByName('LRAssetType'),50,function($p2_0){
var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;if($0===$2_0.get_name()){$p1.get_formServices().setUIPropertyValueByName('LR_AssetType',$2_0);break;}}});}}));}catch($1){$p0.errorLogEx('Error in PopulateFields:FetchAssetTypeofAssetFromMobileKey '+$1.message,$1);}},$21:function($p0,$p1,$p2){var $0='';try{$p0.getBusinessViewServices().getBusinessViewItemByObjectType($p0.getCollectionIDByName('Asset'),$p2.get_key(),ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('AssetType')!=null){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum1.moveNext()){var $1_0=$enum1.current;if(Object.keyExists(this.$18,$p1_0.getPropertyByName('AssetType').toString())){$0=this.$18[$p1_0.getPropertyByName('AssetType').toString()];}}$p0.getDictionaryItems($p0.getDictionaryIDByName('LRAssetType'),50,function($p2_0){
var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;if($0===$2_0.get_name()){$p1.get_formServices().setUIPropertyValueByName('LR_AssetType',$2_0);break;}}});}}));}catch($1){$p0.errorLogEx('Error in PopulateFields:FetchAssetTypeFromKey '+$1.message,$1);}},$22:function($p0,$p1,$p2){var $0='';try{$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('Asset'),$p2.get_mobileKey(),ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('AssetType')!=null){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum1.moveNext()){var $1_0=$enum1.current;if(Object.keyExists(this.$18,$p1_0.getPropertyByName('AssetType').toString())){$0=this.$18[$p1_0.getPropertyByName('AssetType').toString()];break;}}$p0.getDictionaryItems($p0.getDictionaryIDByName('LRAssetType'),50,function($p2_0){
var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;if($0===$2_0.get_name()){$p1.get_formServices().setUIPropertyValueByName('LR_AssetType',$2_0);break;}}});}}));}catch($1){$p0.errorLogEx('Error in PopulateFields:FetchAssetTypeofAssetFromMobileKey '+$1.message,$1);}},$23:function($p0,$p1,$p2){var $0='';try{$p0.getBusinessViewServices().getBusinessViewItemByObjectType($p0.getCollectionIDByName('Asset'),$p2.get_key(),ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('AssetType')!=null){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum1.moveNext()){var $1_0=$enum1.current;if(Object.keyExists(this.$18,$p1_0.getPropertyByName('AssetType').toString())){$0=this.$18[$p1_0.getPropertyByName('AssetType').toString()];}}$p0.getDictionaryItems($p0.getDictionaryIDByName('LRAssetType'),50,function($p2_0){
var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;if($0===$2_0.get_name()){$p1.get_formServices().setUIPropertyValueByName('LR_AssetType',$2_0);break;}}});}}));}catch($1){$p0.errorLogEx('Error in PopulateFields:FetchAssetTypeFromKey '+$1.message,$1);}},$24:function($p0,$p1,$p2){var $0='';try{$p0.getBusinessViewServices().getBusinessViewItemByObjectTypeWithMobileKey($p0.getCollectionIDByName('Asset'),$p2.get_mobileKey(),ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('AssetType')!=null){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum1.moveNext()){var $1_0=$enum1.current;if(Object.keyExists(this.$18,$p1_0.getPropertyByName('AssetType').toString())){$0=this.$18[$p1_0.getPropertyByName('AssetType').toString()];break;}}$p0.getDictionaryItems($p0.getDictionaryIDByName('LRAssetType'),50,function($p2_0){
var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;if($0===$2_0.get_name()){$p1.get_formServices().setUIPropertyValueByName('LR_AssetType',$2_0);break;}}});}}));}catch($1){$p0.errorLogEx('Error in PopulateFields:FetchAssetTypeofAssetFromMobileKey '+$1.message,$1);}},$25:function($p0,$p1,$p2){var $0='';try{$p0.getBusinessViewServices().getBusinessViewItemByObjectType($p0.getCollectionIDByName('Asset'),$p2.get_key(),ss.Delegate.create(this,function($p1_0){
if($p1_0.getPropertyByName('AssetType')!=null){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum1.moveNext()){var $1_0=$enum1.current;if(Object.keyExists(this.$18,$p1_0.getPropertyByName('AssetType').toString())){$0=this.$18[$p1_0.getPropertyByName('AssetType').toString()];}}$p0.getDictionaryItems($p0.getDictionaryIDByName('LRAssetType'),50,function($p2_0){
var $enum1=ss.IEnumerator.getEnumerator($p2_0);while($enum1.moveNext()){var $2_0=$enum1.current;if($0===$2_0.get_name()){$p1.get_formServices().setUIPropertyValueByName('LR_AssetType',$2_0);break;}}});}}));}catch($1){$p0.errorLogEx('Error in PopulateFields:FetchAssetTypeFromKey '+$1.message,$1);}},$26:function($p0){try{var $0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper($p0);var $1=$0.selectNodes('AssetTypeLeakRepairMapping/AssetType');var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;this.$18[$2.attributes.getNamedItem('Name').nodeValue]=$2.text;}}catch($3){}},$27:function($p0,$p1){return new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds()+$p1);}}
P2.PS.AMEREN.CM.Events.SelfSchedulingTaskFilter=function(customSettings){this.$6='';var $0=ss.parseXml(customSettings);var $1=[];var $2=null;if($0!=null){$2=$0.selectNodes('Name');var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;$1.add($3.text.toString());}}window.localStorage.setItem(this.$1,$1.toString());W6.ClickMobile.Web.AddIns.AddInManager.W6CMAddInManager.get_clientEvents().add_beforeMsgSend(ss.Delegate.create(this,this.$7));}
P2.PS.AMEREN.CM.Events.SelfSchedulingTaskFilter.prototype={$0:'SDID_TASK_TYPE_LIST',$1:'SDID_TASK_TYPE_CATEGORY_LIST',$2:'CHKBOXDIVID',$3:'TASKCATEGORYDIVID',$4:56,$5:1600,checkBoxClick:function(e){var $0=e.target.id;if($0==='kall'&&$('#'+$0).is(':checked')){var $1=$('.reloadCheckboxContainer >input:checked');$1.each(function($p1_0,$p1_1){
if($p1_1.id!=='kall'){$('#'+$p1_1.id).prop('checked',false);}});}else if($0!=='kall'&&$('#'+$0).is(':checked')){var $2=$('.reloadCheckboxContainer >input:checked');$2.each(function($p1_0,$p1_1){
if($p1_1.id==='kall'){$('#'+$p1_1.id).prop('checked',false);}});}},createTaskType:function(controllerServices,e,taskTypeCategory){var $0='<div class="cm_ui_window_title_inner_surface" id ="testdiv"></div>';var $1="<div class='cm_ui_window_content_surface' style='overflow-y: auto; overflow-x: hidden;'><div class='form' id='frmAbout' style='display: block;'><div id='form_dialog'><div class='dialogBox'><div class='title' id='title'>Select Task Types<br/><span style=\"color:red;display:none;font-size: 13px;\" id=\"mandatoryMsg\">Please Select a Task Type</span></div>CHK_BOX_PLACE_HOLDER</div></div></div></div>";var $2=controllerServices.getSharedData(this.$0);var $3='<tr class="reloadDataRow"><td class="reloadCheckboxContainer"><input class="RAD_AMEREN" name="RAD_AMEREN" checked type="checkbox" id="kall"   value="ALL"></td><td style="padding-top:7px;margin-top:7px;"><label class="reloadLabel" for="kall"> ALL </label></td></tr>';var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $6=$enum1.current;var $7=ss.parseXml($6.get_body());var $8='';if($7.selectSingleNode('TaskTypeCategory').text!=null){$8=$7.selectSingleNode('TaskTypeCategory').text;}if($8===taskTypeCategory){$3=$3+'<tr class="reloadDataRow"><td class="reloadCheckboxContainer"><input class="RAD_AMEREN" name="RAD_AMEREN" type="checkbox"  id="k'+$6.get_key()+'" value=" '+$6.get_name()+' "></td><td style="padding-top:7px;margin-top:7px;"><label class="reloadLabel"  for="k'+$6.get_key()+'" >'+$6.get_name()+'</label></td></tr>';}}var $4='<table id="'+this.$2+'" class="frmreload_table">'+$3+'</table>';$1=$1.replaceAll('CHK_BOX_PLACE_HOLDER',$4);var $5=$($0).append($1);controllerServices.showMessageBox_With_Element($5.get(0),'Select Task Type',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok_Cancel,ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper(e.message.toString());var $1_1=$1_0.selectSingleNode('InnerSXP/SXPGetCandidateTasks/AdditionalLoadingCriterias');var $1_2=$1_1.firstChild.cloneNode(false);var $1_3=$1_0.createElement('IsModifiedByAmeren');$1_1.appendChild($1_3);if($p1_1===W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.ok){var $1_4=$('input:checked',$5);if($1_4.length>0){for(var $1_6=0;$1_6<$1_4.length;$1_6++){var $1_7=$1_4[$1_6].getAttribute('value').toString();if($1_7!=null){if($1_7!=='ALL'){var $1_8=$1_0.createElement('Value');$1_8.appendChild($1_0.createTextNode($1_7.trim()));$1_2.attributes[1].nodeValue='TaskType';$1_2.appendChild($1_8);$1_1.appendChild($1_2);}else{var $1_9=$1_0.createElement('Value');$1_9.appendChild($1_0.createTextNode(this.$6));$1_2.attributes[1].nodeValue='TaskTypeCategory';$1_2.appendChild($1_9);$1_1.appendChild($1_2);}}else{var $1_A=$1_0.createElement('Value');$1_A.appendChild($1_0.createTextNode(this.$6));$1_2.attributes[1].nodeValue='TaskTypeCategory';$1_2.appendChild($1_A);$1_1.appendChild($1_2);}}e.message=new ss.StringBuilder($1_0.xml);var $1_5=$1_0.selectSingleNode('SXPGetCandidateTasks');if(window.localStorage.getItem('CrewKey')!=null&&!!window.localStorage.getItem('CrewKey').toString()){var $1_B=$1_5.getElementsByTagName('Engineer')[0].xml;var $1_C="<Engineer Key='"+window.localStorage.getItem('CrewKey')+"'><ID>"+window.localStorage.getItem('CrewID')+'</ID></Engineer>';var $1_D=$1_5.xml.replaceAll($1_B,$1_C);controllerServices.sendWrappedCustomSXP($1_D);}else{controllerServices.sendWrappedCustomSXP($1_5.xml);}e.cancel=false;return true;}else{$('#mandatoryMsg').css('display','block');e.cancel=true;return false;}}else{var $1_E=$('#reloadButton').get(0);$1_E.setAttribute('src','Images/RefreshGray.png');var $1_F=$('#btnReloadContainer').get(0);$1_F.className='editButton highlightEnable';$('#updatingMessage').css('display','none');$('#slidingDiv').css('display','none');$('#mandatoryMsg').css('display','none');e.cancel=true;return true;}}));$('.RAD_AMEREN').unbind('change');$('.RAD_AMEREN').change(ss.Delegate.create(this,function($p1_0){
this.checkBoxClick($p1_0);}));},$7:function($p0,$p1){if($p1.message.toString().indexOf('SXPScheduleTaskToEngineer')>0){if(window.localStorage.getItem('CrewKey')!=null&&!!window.localStorage.getItem('CrewKey').toString()){var $1=new ss.StringBuilder();var $2=W6.ClickMobile.Web.Core.W6CMUtilities.parseXMLHelper($p1.message.toString());var $3=$2.selectSingleNode('SXPScheduleTaskToEngineer');var $4=$3.getElementsByTagName('ResourceKey')[0].xml;var $5='<ResourceKey>'+window.localStorage.getItem('CrewKey')+'</ResourceKey>';var $6=$p1.message.toString().replaceAll($4,$5);$1.append($6);$p1.message=$1;}return;}var $0=0;this.$6='';if($p0.getSharedData(this.$0)!=null){var $7=$p0.getSharedData(this.$0);$0=$7.get_count();}if($p0.getSharedData(this.$0)==null||!$p0.getSharedData(this.$0)||!$0){$p0.getDictionaryItems(this.$4,this.$5,ss.Delegate.create(this,function($p1_0){
$p0.setSharedData(this.$0,$p1_0);if($p1.message.toString().indexOf('SXPGetCandidateTasks')>0){if($p1.message.toString().indexOf('IsModifiedByAmeren')>0){return;}$p1.cancel=true;var $1_0='';var $1_1=[];if(window.localStorage.getItem(this.$1)!=null&&!!window.localStorage.getItem(this.$1)){$1_0=window.localStorage.getItem(this.$1).toString();$1_1=$1_0.split(',');}var $1_2='<div class="cm_ui_window_title_inner_surface" id ="testdiv"></div>';var $1_3="<div class='cm_ui_window_content_surface' style='overflow-y: auto; overflow-x: hidden;'><div class='form' id='frmAbout' style='display: block;'><div id='form_dialog'><div class='dialogBox'><div class='title' id='title'>Select Task Type Category<br/><span style=\"color:red;display:none;font-size: 13px;\" id=\"mandatoryMsg\">Please Select a Type Category</span></div>TASK_CAT_PLACE_HOLDER</div></div></div></div>";var $1_4='';if($1_1!=null){var $enum1=ss.IEnumerator.getEnumerator($1_1);while($enum1.moveNext()){var $1_7=$enum1.current;$1_4=$1_4+'<tr class="reloadDataRow"><td class="reloadCheckboxContainer"><input name="RAD_AMEREN" type="radio"  id="k'+$1_7+'" value="'+$1_7+'"></td><td style="padding-top:7px;margin-top:7px;"><label class="reloadLabel"  for="k'+$1_7+'" >'+$1_7+'</label></td></tr>';}}var $1_5='<table id="'+this.$3+'" class="frmreload_table">'+$1_4+'</table>';$1_3=$1_3.replaceAll('TASK_CAT_PLACE_HOLDER',$1_5);var $1_6=$($1_2).append($1_3);$p0.showMessageBox_With_Element($1_6.get(0),'Select Task Type Category',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok_Cancel,ss.Delegate.create(this,function($p2_0,$p2_1){
if($p2_1===W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.ok){var $2_0=$('input:checked',$1_6);if($2_0.length>0){var $2_1=$2_0.val();this.$6=$2_1;this.createTaskType($p0,$p1,$2_1);$('#mandatoryMsg').css('display','none');return true;}else{$('#mandatoryMsg').css('display','block');return false;}}else{var $2_2=$('#reloadButton').get(0);$2_2.setAttribute('src','Images/RefreshGray.png');var $2_3=$('#btnReloadContainer').get(0);$2_3.className='editButton highlightEnable';$('#updatingMessage').css('display','none');$('#slidingDiv').css('display','none');$('#mandatoryMsg').css('display','none');return true;}}));}}));}else{if($p1.message.toString().indexOf('SXPGetCandidateTasks')>0){if($p1.message.toString().indexOf('IsModifiedByAmeren')>0){return;}$p1.cancel=true;if($p1.message.toString().indexOf('IsModifiedByAmeren')>0){return;}$p1.cancel=true;var $8='';var $9=[];if(window.localStorage.getItem(this.$1)!=null&&!!window.localStorage.getItem(this.$1)){$8=window.localStorage.getItem(this.$1).toString();$9=$8.split(',');}var $A='<div class="cm_ui_window_title_inner_surface" id ="testdiv"></div>';var $B="<div class='cm_ui_window_content_surface' style='overflow-y: auto; overflow-x: hidden;'><div class='form' id='frmAbout' style='display: block;'><div id='form_dialog'><div class='dialogBox'><div class='title' id='title'>Select Task Type Category<br/><span style=\"color:red;display:none;font-size: 13px;\" id=\"mandatoryMsg\">Please Select a Task Type Category</span></div>TASK_CAT_PLACE_HOLDER</div></div></div></div>";var $C='';if($9!=null){var $enum1=ss.IEnumerator.getEnumerator($9);while($enum1.moveNext()){var $F=$enum1.current;$C=$C+'<tr class="reloadDataRow"><td class="reloadCheckboxContainer"><input name="RAD_AMEREN" type="radio"  id="k'+$F+'" value="'+$F+'"></td><td style="padding-top:7px;margin-top:7px;"><label class="reloadLabel"  for="k'+$F+'" >'+$F+'</label></td></tr>';}}var $D='<table id="'+this.$3+'" class="frmreload_table">'+$C+'</table>';$B=$B.replaceAll('TASK_CAT_PLACE_HOLDER',$D);var $E=$($A).append($B);$p0.showMessageBox_With_Element($E.get(0),'Select Task Type Category',W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowSelectButtonsType.ok_Cancel,ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_1===W6.ClickMobile.Web.ObjectModel.W6CMAdaptiveViewWindowButtonType.ok){var $1_0=$('input:checked',$E);if($1_0.length>0){var $1_1=$1_0.val();this.$6=$1_1;this.createTaskType($p0,$p1,$1_1);$('#mandatoryMsg').css('display','none');return true;}else{$('#mandatoryMsg').css('display','block');return false;}}else{var $1_2=$('#reloadButton').get(0);$1_2.setAttribute('src','Images/RefreshGray.png');var $1_3=$('#btnReloadContainer').get(0);$1_3.className='editButton highlightEnable';$('#updatingMessage').css('display','none');$('#slidingDiv').css('display','none');$('#mandatoryMsg').css('display','none');return true;}}));}}}}
Type.registerNamespace('P2.PS.AMEREN.CM.ResourceFile');P2.PS.AMEREN.CM.ResourceFile.P2PSAMERENCM$0={$0:'Activity_SO',
$1:'Category',
$2:'Type_SO',
$3:'Approved',
$4:'AssetID',
$5:'Calendar',
$6:'The exception is from method FetchDictionaryValue() of class DictionaryProcessing. Message is :',
$7:'UpgradeJobCode',
$8:'StandingOrders',
$9:'Status_SO',
$A:'TaskNumber',
$B:'TimesheetStatus_SO',
$C:'SXPMobileGetEngineerPropertiesResult',
$D:'FinishTime_SO',
$E:'Hours',
$F:'LocationDescription',
$10:'Engineer_SO',
$11:'Timesheet_SO',
$12:'Amount',
$13:'EngineerName',
$14:'StartTime_SO',
$15:'Submitted',
$16:'SubstationName',
$17:'TaskDescription',
$18:'MaximoTaskNumber',
$19:'MaximoWONumber',
$1A:'ActivityType_SO',
$1B:'PayCode',
$1C:'ActivityType',
$1D:'PayCode',
$1E:'Straight Time',
$1F:'Work',
$20:'Driving',
$21:'Delay - Other',
$22:'Dept. Transp. Requirements',
$23:'Lunch',
$24:'Lunch - Unpaid',
$25:'CrewMembersKey'
};Type.registerNamespace('P2.PS.AMEREN.CM');P2.PS.AMEREN.CM.P2PSAMERENCM$1={$0:'Asset',
$1:'AssetID',
$2:'FollowUpWork',
$3:'IsEmergentTask',
$4:'MobileKey',
$5:'Are you sure to save the form?',
$6:'objEngineer',
$7:'crewAllocationList',
$8:'StartTime_SO',
$9:'EmergentTaskFlag',
$A:'ActivityType_SO',
$B:'MobileKey_SO',
$C:'Engineer_SO',
$D:'FinishTime_SO',
$E:'Duration_SO',
$F:'Type_SO',
$10:'ReportingEngineer_SO',
$11:'RelatedActivity',
$12:'Engineer',
$13:'Activity_SO',
$14:'IsWorkRequest',
$15:'ServiceRequest',
$16:'BusinessLine',
$17:'CallID',
$18:'yyyy-MM-dd hh:mm:ss tt',
$19:'Key',
$1A:'LastUpdated',
$1B:'LastUpdatedDate',
$1C:'Number',
$1D:'-Data-PlannedFinishDateTime_',
$1E:'-Heading-PlannedFinishDateTime_',
$1F:'-Data-PlannedStartDateTime_',
$20:'-Heading-PlannedStartDateTime_',
$21:'PVSubTask',
$22:'//SXPServerGetObjectsResult/Objects/PVSubTask',
$23:'SubTaskID',
$24:'SXPServerGetObjectsResult',
$25:'yyyy-MM-dd',
$26:'ActualFinishDate',
$27:'ActualStartDate',
$28:'Street1',
$29:'CompletedBy',
$2A:'EstimatedFinishDate',
$2B:'IEEEDevice',
$2C:'IsComplete',
$2D:'IsCompleted',
$2E:'LastTestDate',
$2F:'NERC_PRC',
$30:'Phase',
$31:'Position',
$32:'RelayCompleteList',
$33:'RelayInspection',
$34:'//SXPServerGetObjectsResult/Objects/RelayInspection',
$35:'RelayName',
$36:'RelayType',
$37:'Remarks',
$38:'Status',
$39:'SubTasksCompleteList',
$3A:'false',
$3B:'FinishDate',
$3C:'Finish',
$3D:'StartDate',
$3E:'Start',
$3F:'true',
$40:'AssetNum',
$41:'District',
$42:'ExpDate',
$43:'FuelType',
$44:'Material',
$45:'MaterialDescription',
$46:'//SXPServerGetObjectsResult/Objects/Material',
$47:'QuantityReceived',
$48:'QuantityRemaining',
$49:'QuantityRequired',
SN:'SN',
$4A:'StockNumber',
$4B:'Tool',
$4C:'ToolType',
$4D:'//SXPServerGetObjectsResult/Objects/Tool',
$4E:'genericTableFields',
$4F:'Object',
id:'Id',
$50:'AssetFeatureSpecID',
$51:'SpecValue',
$52:'MeterHistory',
$53:'//SXPServerGetObjectsResult/Objects/MeterHistory',
$54:'MeterID',
$55:'Reading1',
$56:'Reading2',
$57:'ReadingDate1',
$58:'ReadingDate2',
$59:'AssetFeatureSpec',
$5A:'//SXPServerGetObjectsResult/Objects/AssetFeatureSpec',
$5B:'Unit',
$5C:'-Data-ActivityName_',
$5D:'-Heading-ActivityName_',
$5E:'Arrived',
$5F:'Complete',
$60:'TaskType',
$61:'Dispatched',
$62:'En Route',
$63:'Task',
$64:'TaskStatus',
$65:'Accepted',
$66:'Warning',
$67:'You already have one order in En Route or Arrived status. Please complete the order before proceeding with the other',
$68:'DisObjectIdentifier',
$69:'DisObjectUpdateDate',
$6A:'MRLineNumber',
$6B:'MRNumber',
$6C:'POLineNumber',
$6D:'PONumber',
$6E:'StoreRoomLocation',
$6F:'District',
$70:'SourceSite',
$71:'ServiceRequestType',
$72:'Relay',
$73:'Substation',
$74:'Transmission',
$75:'IL',
$76:'MO',
$77:'SXPMobileGetGenericObjectsResult',
$78:'PayCode',
$79:'Straight Time',
$7A:'Work',
$7B:'EngineerName',
$7C:'CollectionID',
$7D:'//CMCustomButton/CustomButtonTitle',
$7E:'//CMCustomButton/CustomButtonID',
$7F:'//CMCustomButton/CustomButtonText',
$80:'ServiceRequestType',
$81:'Record Updates',
$82:'AssetDetails',
$83:'AssetDescription',
$84:'AssetUpdateComments',
$85:'CircuitNumber',
$86:'Manufacturer',
$87:'ManufacturerModel',
$88:'SerialNumber',
$89:'LocationID',
$8A:'LocationDescription',
$8B:'ServiceRequestComments',
$8C:'InServiceDate',
$8D:'Rejected',
$8E:'RejectionReason',
$8F:'IncompleteReason',
$90:'Incomplete',
$91:'Corrective',
$92:'ManufactureDate',
$93:'SourceSite',
$94:'AssetType',
$95:'ParentLocation',
$96:'SubstationName',
$97:'Description',
$98:'Duration',
$99:'Start',
$9A:'ExpectedFinishTime',
$9B:'finishDateOfAllSchedules',
$9C:'Finish',
$9D:'P',
$9E:'i',
$9F:'WorkType',
$A0:'SiteID',
$A1:'IL-SUB',
$A2:'MO-SUB',
$A3:'TRNS-EL',
$A4:'REL-CAP',
$A5:'SUB-REPAIR',
$A6:'[aria-labelledby^=InServiceDate]',
$A7:'[aria-labelledby^=ManufactureDate]',
$A8:'substation',
$A9:'relay',
$AA:'transmission',
$AB:'UserBusinessLine',
$AC:'#ServiceRequest',
$AD:'#Createandcompletetask',
$AE:'#CreateTask',
$AF:'#issueTypeDropDown',
$B0:'#issueTypes',
$B1:'servicerequest',
$B2:'maximowo',
$B3:'none',
$B4:'Error in Scanning',
$B5:'IsFollowUpTask',
$B6:'SelectedBusinessLine',
$B7:'false',
$B8:'true',
$B9:'Alert!',
ok:'ok',
$BA:'AcknowledgeTime',
$BB:'EnRouteTime',
$BC:'ArriveTime',
$BD:'AcceptedDate',
$BE:'OnSiteDate',
$BF:'TravelDate',
$C0:'Name',
$C1:'MobileEngineer',
$C2:'mobileEngineerID',
$C3:'State',
$C4:'CompletionFormURL',
IL:'IL',
MO:'MO',
$C5:'CompletionForms/',
$C6:'AssignmentStart',
$C7:'AssignmentFinish',
$C8:'--None--',
$C9:'REL-CAP_HIGH CURRENT TEST (TRANS)',
$CA:'busDifferentialTable-tbody',
$CB:'StartTime',
$CC:'FinishTime',
$CD:'//SXPServerGetObjectsResult/Objects/CrewAllocation',
$CE:'DisplayString',
$CF:'Key',
$D0:'Crew',
$D1:'servicerequestupdate'
};P2.PS.AMEREN.CM.AmerenP2Constants=function(){}
P2.PS.AMEREN.CM.CustomPanels.CrewChanges.registerClass('P2.PS.AMEREN.CM.CustomPanels.CrewChanges',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.Asset.registerClass('P2.PS.AMEREN.CM.CustomPanels.Asset');P2.PS.AMEREN.CM.CustomPanels.CreateCustomTableForInlineObject.registerClass('P2.PS.AMEREN.CM.CustomPanels.CreateCustomTableForInlineObject',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButtonSupervisor.registerClass('P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButtonSupervisor',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable.registerClass('P2.PS.AMEREN.CM.CustomPanels.CreateOrUpdateTable');P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequest.registerClass('P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequest',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequestSupervisor.registerClass('P2.PS.AMEREN.CM.CustomPanels.CreateServiceRequestSupervisor',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.TimesheetPayCodeFilter.registerClass('P2.PS.AMEREN.CM.CustomPanels.TimesheetPayCodeFilter',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject.registerClass('P2.PS.AMEREN.CM.CustomPanels.PayCodeDictionaryObject');P2.PS.AMEREN.CM.CustomPanels.GenericGridView.registerClass('P2.PS.AMEREN.CM.CustomPanels.GenericGridView',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation.registerClass('P2.PS.AMEREN.CM.CustomPanels.GenrericObjectValidation',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.LoadCompletionForm.registerClass('P2.PS.AMEREN.CM.CustomPanels.LoadCompletionForm',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations.registerClass('P2.PS.AMEREN.CM.CustomPanels.RelayInspectionObjectValidations',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation.registerClass('P2.PS.AMEREN.CM.CustomPanels.RelayTableCreation',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor.registerClass('P2.PS.AMEREN.CM.CustomPanels.RelayTableCreationForSupervisor',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.ReloadTaskData.registerClass('P2.PS.AMEREN.CM.CustomPanels.ReloadTaskData',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.SubTasksObjectValidations.registerClass('P2.PS.AMEREN.CM.CustomPanels.SubTasksObjectValidations',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation.registerClass('P2.PS.AMEREN.CM.CustomPanels.SubTasksTableCreation',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor.registerClass('P2.PS.AMEREN.CM.CustomPanels.SubTaskTableCreationForSupervisor',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.AcceptAll.registerClass('P2.PS.AMEREN.CM.CustomPanels.AcceptAll',null,W6.ClickMobile.Web.AddIns.AddInsInterfaces.IW6CMWidget);P2.PS.AMEREN.CM.CustomPanels.AddInformationClass.registerClass('P2.PS.AMEREN.CM.CustomPanels.AddInformationClass',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButton.registerClass('P2.PS.AMEREN.CM.CustomPanels.CreateFollowUpTaskButton',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.FWTaskTypeFilter.registerClass('P2.PS.AMEREN.CM.CustomPanels.FWTaskTypeFilter',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.CustomPanels.TimesheetUpdateJobCode.registerClass('P2.PS.AMEREN.CM.CustomPanels.TimesheetUpdateJobCode',null,W6.ClickMobile.Web.AddIns.AddInsInterfaces.IW6CMCustomTab);P2.PS.AMEREN.CM.Events.AfterOpenFormTask.registerClass('P2.PS.AMEREN.CM.Events.AfterOpenFormTask');P2.PS.AMEREN.CM.Events.AfterSaveFormTask.registerClass('P2.PS.AMEREN.CM.Events.AfterSaveFormTask');P2.PS.AMEREN.CM.Events.AfterTabChangedTask.registerClass('P2.PS.AMEREN.CM.Events.AfterTabChangedTask');P2.PS.AMEREN.CM.Events.AssetCompletion.registerClass('P2.PS.AMEREN.CM.Events.AssetCompletion');P2.PS.AMEREN.CM.Events.AssetRelayCompletion.registerClass('P2.PS.AMEREN.CM.Events.AssetRelayCompletion');P2.PS.AMEREN.CM.Events.BeforeOpenViewBarcode.registerClass('P2.PS.AMEREN.CM.Events.BeforeOpenViewBarcode');P2.PS.AMEREN.CM.Events.BeforeSaveFormTask.registerClass('P2.PS.AMEREN.CM.Events.BeforeSaveFormTask');P2.PS.AMEREN.CM.Events.CapturingTimeProperties.registerClass('P2.PS.AMEREN.CM.Events.CapturingTimeProperties');P2.PS.AMEREN.CM.Events.CompletionFormPopUp.registerClass('P2.PS.AMEREN.CM.Events.CompletionFormPopUp');P2.PS.AMEREN.CM.Events.CompletionOutput.registerClass('P2.PS.AMEREN.CM.Events.CompletionOutput',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.Events.CompletionJSON.registerClass('P2.PS.AMEREN.CM.Events.CompletionJSON');P2.PS.AMEREN.CM.Events.CompletionJSONList.registerClass('P2.PS.AMEREN.CM.Events.CompletionJSONList');P2.PS.AMEREN.CM.Events.DisplayPopUpForFieldInitiatedTask.registerClass('P2.PS.AMEREN.CM.Events.DisplayPopUpForFieldInitiatedTask');P2.PS.AMEREN.CM.Events.AfterPropertyChangedTask.registerClass('P2.PS.AMEREN.CM.Events.AfterPropertyChangedTask');P2.PS.AMEREN.CM.Events.Timesheet_CalendarInterval.registerClass('P2.PS.AMEREN.CM.Events.Timesheet_CalendarInterval');P2.PS.AMEREN.CM.Events.CreateAndCompleteTask.registerClass('P2.PS.AMEREN.CM.Events.CreateAndCompleteTask');P2.PS.AMEREN.CM.Events.CreateServiceRequest.registerClass('P2.PS.AMEREN.CM.Events.CreateServiceRequest',W6.ClickMobile.Web.UI.Controls.PropertyPanels.W6CMCustomPanel);P2.PS.AMEREN.CM.Events.CreateTask.registerClass('P2.PS.AMEREN.CM.Events.CreateTask');P2.PS.AMEREN.CM.Events.ObjRetrievalSupervisor.registerClass('P2.PS.AMEREN.CM.Events.ObjRetrievalSupervisor');P2.PS.AMEREN.CM.Events.SubtaskRetrieval.registerClass('P2.PS.AMEREN.CM.Events.SubtaskRetrieval');P2.PS.AMEREN.CM.Events.AfterMessageReceived_Timesheet.registerClass('P2.PS.AMEREN.CM.Events.AfterMessageReceived_Timesheet');P2.PS.AMEREN.CM.Events.CopyAssetMVtoSharedMemory.registerClass('P2.PS.AMEREN.CM.Events.CopyAssetMVtoSharedMemory');P2.PS.AMEREN.CM.Events.AssetObj.registerClass('P2.PS.AMEREN.CM.Events.AssetObj');P2.PS.AMEREN.CM.Events.CreateCustomTables.registerClass('P2.PS.AMEREN.CM.Events.CreateCustomTables',null,W6.ClickMobile.Web.AddIns.AddInsInterfaces.IW6CMCustomTab);P2.PS.AMEREN.CM.Events.FormValidations.registerClass('P2.PS.AMEREN.CM.Events.FormValidations');P2.PS.AMEREN.CM.Events.GenericClientEvents.registerClass('P2.PS.AMEREN.CM.Events.GenericClientEvents');P2.PS.AMEREN.CM.Events.PopulateFields.registerClass('P2.PS.AMEREN.CM.Events.PopulateFields');P2.PS.AMEREN.CM.Events.SelfSchedulingTaskFilter.registerClass('P2.PS.AMEREN.CM.Events.SelfSchedulingTaskFilter');P2.PS.AMEREN.CM.AmerenP2Constants.registerClass('P2.PS.AMEREN.CM.AmerenP2Constants');P2.PS.AMEREN.CM.Events.CompletionOutput.globalFormServices=null;P2.PS.AMEREN.CM.Events.CreateAndCompleteTask.$2=false;P2.PS.AMEREN.CM.Events.AfterMessageReceived_Timesheet.$1D=false;P2.PS.AMEREN.CM.Events.AfterMessageReceived_Timesheet.$1E=false;P2.PS.AMEREN.CM.AmerenP2Constants.allObjectDetails={};P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeNeedTobeFormatted=['AssignmentStart','AssignmentFinish','FutureReleaseDate','MRNeedByDate'];P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeFormat='yyyy-MM-dd hh:mm:ss tt';P2.PS.AMEREN.CM.AmerenP2Constants.dateFormat='yyyy-MM-dd';P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFormat='MM-dd-yyyy';P2.PS.AMEREN.CM.AmerenP2Constants.dateandMinuteOnlyFormat='yyyy-MM-dd hh:mm tt';P2.PS.AMEREN.CM.AmerenP2Constants.callid=null;P2.PS.AMEREN.CM.AmerenP2Constants.number=0;P2.PS.AMEREN.CM.AmerenP2Constants.taskType=null;P2.PS.AMEREN.CM.AmerenP2Constants.interval=0;P2.PS.AMEREN.CM.AmerenP2Constants.formServices=null;P2.PS.AMEREN.CM.AmerenP2Constants.remarkColor='#FFCC99';P2.PS.AMEREN.CM.AmerenP2Constants.completeColor='#CCFFCC';P2.PS.AMEREN.CM.AmerenP2Constants.startColor='white';P2.PS.AMEREN.CM.AmerenP2Constants.finishColor='#F7DA64';P2.PS.AMEREN.CM.AmerenP2Constants.meterID='MeterID';P2.PS.AMEREN.CM.AmerenP2Constants.meterHistory='MeterHistory';P2.PS.AMEREN.CM.AmerenP2Constants.subTask='SubTask';P2.PS.AMEREN.CM.AmerenP2Constants.pvSubTask='PVSubTask';P2.PS.AMEREN.CM.AmerenP2Constants.relayInspection='RelayInspection';P2.PS.AMEREN.CM.AmerenP2Constants.material='Material';P2.PS.AMEREN.CM.AmerenP2Constants.specification='AssetFeatureSpec';P2.PS.AMEREN.CM.AmerenP2Constants.dateTimeFields=['PVSubTask-EstimatedFinishDate','PVSubTask-FinishDate','PVSubTask-StartDate','PVSubTask-ActualStartDate','PVSubTask-ActualFinishDate','FutureReleaseDate'];P2.PS.AMEREN.CM.AmerenP2Constants.dateOnlyFields=['RelayInspection-LastTestDate'];P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForStart=['SubTaskID','StartDate','FinishDate'];P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForFinish=['SubTaskID','ActualStartDate','EstimatedFinishDate'];P2.PS.AMEREN.CM.AmerenP2Constants.fieldsToBeVisibleForComplete=['SubTaskID','ActualStartDate','ActualFinishDate'];P2.PS.AMEREN.CM.AmerenP2Constants.subTabHeading='Primavera Activities';P2.PS.AMEREN.CM.AmerenP2Constants.relayTabHeading='Relay Inspection';P2.PS.AMEREN.CM.AmerenP2Constants.relayOrderTypes=['REL-INSP_DIST_RTN_DIST 6-RLY'];P2.PS.AMEREN.CM.AmerenP2Constants.subTaskItemList=['SubTaskID','Key','CallID','Number','IsComplete','ActualFinishDate','ActualStartDate','EstimatedFinishDate','FinishDate','StartDate','Name','Status','MobileKey'];P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionItemList=['Key','CallID','MobileKey','Number','IsCompleted','LastTestDate','AssetID','CompletedBy','IEEEDevice','Name','NERC_PRC','Phase','Position','RelayName','RelayType','Remarks'];P2.PS.AMEREN.CM.AmerenP2Constants.materialItemList=['Key','Number','QuantityReceived','QuantityRemaining','QuantityRequired','CallID','Description','Name','StockNumber','MobileKey','MRNumber','MRLineNumber','PONumber','POLineNumber','StoreRoomLocation'];P2.PS.AMEREN.CM.AmerenP2Constants.specificationItemList=['Key','Name','AssetFeatureSpecID','SpecValue','CallID','Number','MobileKey'];P2.PS.AMEREN.CM.AmerenP2Constants.meterhistoryItemList=['Key','CallID','Name','MeterID','Number','Reading1','Reading2','ReadingDate1','ReadingDate2','Unit','MobileKey'];P2.PS.AMEREN.CM.AmerenP2Constants.relayInspectionRequired=false;P2.PS.AMEREN.CM.AmerenP2Constants.subtaskRequired=false;P2.PS.AMEREN.CM.AmerenP2Constants.duration=0;P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdCompletionForm=0;P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdRelay=0;P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdErrorLoadingCompletionForm=0;P2.PS.AMEREN.CM.AmerenP2Constants.setIntervalIdNoCompletionForm=0;P2.PS.AMEREN.CM.AmerenP2Constants.intervalForMeterHistoryLoad=0;P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjectsUpdated=false;P2.PS.AMEREN.CM.AmerenP2Constants.disconnectedObjects={};P2.PS.AMEREN.CM.AmerenP2Constants._globalcontrollerservice=null;P2.PS.AMEREN.CM.AmerenP2Constants.timesheetCustomSettings='';P2.PS.AMEREN.CM.AmerenP2Constants.crewActivityCreated=false;P2.PS.AMEREN.CM.AmerenP2Constants.activityCreated=false;P2.PS.AMEREN.CM.AmerenP2Constants.showActivityCreatedPopup=false;P2.PS.AMEREN.CM.AmerenP2Constants.failSafeButtonWarning='Timesheet login activities already created for';P2.PS.AMEREN.CM.AmerenP2Constants.shiftNotDefinedWarning='Timesheet login activities not created as shift timings are not defined for today. Please contact the system administrator or helpdesk for support';P2.PS.AMEREN.CM.AmerenP2Constants.activityCreationTimedOutWarning='Timesheet login activities creation timed out as the shift details were not retrieved. The activities can be created by clicking the <b>Create Login Activities</b> button in Timesheet Activity page';P2.PS.AMEREN.CM.AmerenP2Constants.assignmentList=null;})(jQuery);// This script was generated using Script# v0.7.0.0
